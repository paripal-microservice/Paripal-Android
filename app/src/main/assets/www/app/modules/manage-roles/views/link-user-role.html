<div class="col-xs-12 col-sm-12" ng-if="dateError"><div class="col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4 errorListBox"><span class="errorMsg" ng-repeat="error in dateErrorList">{{$index + 1}}. {{error}}<br></span></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10"><form name="addNewLinkUserRole" class="form-horizontal" ng-submit="createUserRole(addNewLinkUserRole)" novalidate="novalidate" autocomplete="off"><help-directive help-id="MANAGE_USER_ROLE_LINK" class="divContainer"></help-directive><div class="pageTitle"><span ng-hide="editMode || viewMode">{{"ADD_USER_ROLE_LINK"|translate}}</span> <span ng-show="editMode && !viewMode">{{"EDIT_USER_ROLE_LINK"|translate}}</span> <span ng-show="viewMode">{{"VIEW_USER_ROLE_LINK"|translate}}</span></div><div class="row"><org-loc-combo selected-org="organization" disable-org="isLocationDisable" required-org="true" selected-org-loc="organizationLocation" disable-org-loc="isLocationDisable" required-org-loc="true" org-loc-permission="featurePrivilegeConstants.ROLE_MANAGEMENT_VIEW"></org-loc-combo><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'USER_NAME'|translate}}<span class="mandatoryStar">*</span></label><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><input ng-model="linkUserRole.user" name="userName" id="User" required ng-disabled="editMode || viewMode" ng-change="userNameChanged()" autocomplete="off" uib-typeahead="user as user.displayName for user in getUserNames($viewValue, linkUserRole.orgLocationId)" typeahead-min-length="3" typeahead-editable="false"> <span ng-if="addNewLinkUserRole.userName.$error.editable" class="errorMsg">{{'USER_FROM_DROP_LIST' | translate}}</span><div ng-messages="addNewLinkUserRole.userName.$error" ng-class="{'md-auto-hide':!addNewLinkUserRole.userName.$error.required}"><div ng-message="required">{{'USERNAME_REQ' | translate}}</div><div ng-message="userIdErr">{{'USERID_ERR' | translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="roleNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="roleNameAutoCmpLoading" is-auto-complete="true"></spinner><label>{{'ROLE_NAME'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="linkUserRole.role" id="RoleName" name="roleName" ng-maxlength="75" id="RoleName" required ng-disabled="editMode ||viewMode|| (organization | checkNull)" typeahead-editable="false" ng-change="roleNameChanged()" autocomplete="off" uib-typeahead="role as role.roleName for role in getRoleNames($viewValue, organization.data.id)" typeahead-loading="loading" typeahead-min-length="3"><div ng-messages="addNewLinkUserRole.roleName.$error"><div ng-message="required">{{'ROLENAME_REQ' | translate}}</div><div ng-message="maxlength">{{'ROLENAME_MAXLENGTH_ERR' | translate}}</div><div ng-message="roleIdErr">{{'ROLEID_ERR' | translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'VALID_FROM' | translate}}<span class="mandatoryStar">*</span></label><input type="text" class="pointer" placeholder="{{userDateFormat}}" restrict="reject" datepicker from-min-date="fromMinDate" ng-model="linkUserRole.validFrom" ng-change="setValidFromDate(linkUserRole.validFrom)" name="fromDate" required ng-disabled="viewModeValidFrom"><md-icon class="datepickerIcon"></md-icon><div ng-messages="addNewLinkUserRole.fromDate.$error"><div ng-message="required">{{'VALIDFROM_REQ' | translate}}</div></div><div class="errorMsg"><span class="error" ng-show="validFromError">Valid From date cannot be less than Role Valid From :<br>({{linkUserRole.role.roleValidFrom | timestampToDate}})</span> <span class="error" ng-show="selectRoleError">Select a Role first.</span> <span class="error" ng-show="isValidFromLessThanToday">Valid From date cannot be less than Today</span></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"><md-input-container ng-if="!viewModeValidTill"><label>{{'VALID_TILL'|translate}}</label><input datepicker type="text" class="pointer" placeholder="{{userDateFormat}}" restrict="reject" max-date="tillMaxDate" ng-model="linkUserRole.validTill" ng-change="setValidTillDate(linkUserRole.validTill)" name="tillDate"><md-icon class="datepickerIcon"></md-icon><div class="errorMsg"><span class="error" ng-show="validTillError">Valid Till date cannot be greater than Role Valid Till :<br>({{linkUserRole.role.roleValidTill | timestampToDate}})</span> <span class="error" ng-show="selectRoleError">Select a Role first.</span> <span class="error" ng-show="isValidTillLessThanToday">Valid Till date cannot be less than Today</span> <span class="error" ng-show="isValidTillLessThanValidFrom">Valid Till date cannot be less than Valid From</span></div></md-input-container><md-input-container ng-if="viewModeValidTill"><label>{{'VALID_TILL'|translate}}</label><input type="text" class="pointer" placeholder="{{userDateFormat}}" restrict="reject" ng-model="linkUserRole.validTill" name="tillDate" disabled="disabled"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-t-b-10 padding-0 wizardFooter"><div class="textAlign-R"><md-button type="button" class="md-raised" ng-click="back()">{{'CANCEL'|translate}}</md-button><md-button type="submit" class="md-raised md-warn" ng-hide="viewMode" ng-disabled="uneditable || validFromError || validTillError || isValidFromLessThanToday" ng-if="!editMode">{{'SAVE'|translate}}</md-button><md-button type="submit" class="md-raised md-warn" ng-hide="viewMode" ng-disabled="uneditable || validFromError || validTillError || isValidFromLessThanToday" ng-if="editMode">{{'UPDATE'|translate}}</md-button></div></div></div></form></div>
<form name="addUserMeasurementForm" novalidate="novalidate" class="form-horizontal" autocomplete="off"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 margin-b-10"><help-directive help-id="MANAGE_USER_MEASUREMENT" class="divContainer"></help-directive><div class="pageTitle"><span ng-if="pageState==='add' || pageState===undefined">{{'ADD_USER_MEASUREMENT'|translate}}</span> <span ng-if="pageState==='edit'">{{'EDIT_USER_MEASUREMENT'|translate}}</span> <span ng-if="pageState==='view'">{{'VIEW_USER_MEASUREMENT'|translate}}</span></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmp" is-auto-complete="true"></spinner><label>{{'USER'| translate }} <span class="mandatoryStar">*</span></label><input ng-model="userMeasurementObject.user" name="user" id="user" autocomplete="off" uib-typeahead="user as user.value for user in getUsersList($viewValue)" typeahead-editable="commonConstants.typeaheadEditable" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-change="clearUserTestFields()" ng-disabled="isUserDisable" required><div ng-messages="addUserMeasurementForm.user.$error"><div ng-message="required">{{'REQUIRED' | translate }}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="userTestNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userTestNameAutoCmp" is-auto-complete="true"></spinner><label>{{'DIAGNOSTIC_TEST'| translate }} <span class="mandatoryStar">*</span></label><input ng-model="userMeasurementObject.diagnosticTestUser" name="diagnosticTestUser" ng-maxlength="commonConstants.textFieldLengthMedium" id="diagnosticTestUser" autocomplete="off" uib-typeahead="diagnosticTestName as diagnosticTestName.value for diagnosticTestName in getUserTestList(userMeasurementObject.user, $viewValue)" typeahead-min-length="getSmartSearchMinLength('diagnosticTestMinLength')" typeahead-editable="commonConstants.typeaheadEditable" typeahead-on-select="loadMeasurementList(userMeasurementObject.diagnosticTestUser.code, userMeasurementObject.diagnosticTestUser.id)" ng-disabled="!userMeasurementObject.user" required><div ng-messages="addUserMeasurementForm.diagnosticTestUser.$error"><div ng-message="required">{{'REQUIRED' | translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'TEST_IDENTIFIER'| translate }}</label><input ng-model="userMeasurementObject.userTestCode" name="testId" id="testId" disabled="disabled"></md-input-container></div></div><div class="row"><div class="col-sm-12 col-xs-12 col-md-4 col-lg-4"><md-input-container><label>{{'CREATED_DATE'| translate }}</label><input class="datepicker datepickerIcon pointer" datepicker placeholder="{{userDateFormat}}" restrict="reject" till-max-date="today" ng-model="userMeasurementObject.measurementDate" name="measurementDate" id="measurementDate" ng-disabled="!userMeasurementObject.diagnosticTestUser" required="true"><md-icon class="datepickerIcon ng-isolate-scope material-icons" aria-hidden="true"></md-icon></md-input-container></div><div class="col-sm-12 col-xs-12 col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4"><div class="wizardFooter textAlign-R"><md-button ng-click="back()" class="md-raised">{{'CANCEL' | translate}}</md-button><md-button ng-click="createUserMeasurement(userMeasurementObject, !addUserMeasurementForm.value.$valid)" class="md-raised md-warn">{{'SAVE' | translate}}</md-button></div></div></div></div><div class="foo" ng-if="userMeasurementObject.wsUserMeasurements.length > 0"><div ng-class="{'posRelative':packagesListSpinner}"><div class="standard-master-table table-responsive-y" style="width:100%; overflow:auto"><spinner name="packagesListSpinner" img-src="{{pageLoaderImg}}" show="packagesListSpinner"></spinner><table class="table table-striped table-hover table-responsive" style="min-width: 768px"><thead><tr><th ng-show="userMeasurementObject.diagnosticTestUser.value != 'Generic Measurement Capture'">{{'MEASUREMENT_INDICATORS' | translate}}</th><th ng-show="userMeasurementObject.diagnosticTestUser.value == 'Generic Measurement Capture'">{{'MEASUREMENT_INDICATORS' | translate}} <span class="mandatoryStar">*</span></th><th>{{'VALUE' | translate}} <span class="mandatoryStar">*</span></th><th>{{'CHARTING_VALUE' | translate}}</th><th>{{'VIEW_SYMPTOMS' | translate}}</th><th width="12%" ng-show="userMeasurementObject.diagnosticTestUser.value == 'Generic Measurement Capture'"></th></tr></thead><tbody><tr ng-repeat="row in userMeasurementObject.wsUserMeasurements"><td ng-show="userMeasurementObject.diagnosticTestUser.value != 'Generic Measurement Capture'">{{ row.measurementIndicatorName }}</td><td ng-show="userMeasurementObject.diagnosticTestUser.value == 'Generic Measurement Capture'" data-th="{{'NAME' | translate}}"><input ng-model="row.measurementIndicatorName" placeholder="{{'REQUIRED' | translate}}" class="form-control" name="name" id="name" uib-typeahead="indicator as indicator.value for indicator in getIndicator($viewValue)" typeahead-editable="commonConstants.typeaheadEditable" typeahead-min-length="3" required></td><td data-th="{{'VALUE' | translate}}"><input ng-model="row.value" placeholder="{{'REQUIRED' | translate}}" class="form-control" name="value" id="name" ng-blur="row.chartingValue=checkNumber(row.value)" required></td><td data-th="{{'CHARTING_VALUE' | translate}}"><input ng-model="row.chartingValue" tooltip-placement="bottom" uib-tooltip="{{'CHARTING_VALUE_ALERT'|translate}}" tooltip-trigger="focus || mouseenter" class="form-control" placeholder="{{'REQUIRED' | translate}}" name="chartingValue" id="name" required></td><td data-th="{{'VIEW_SYMPTOMS' | translate}}"><md-button ng-click="viewMeasurementSymptoms(row)" class="btn btn-default nextBtn btn-md center-block" style="line-height: 0.428571 !important"><span class="">{{'VIEW_SYMPTOMS' | translate}}</span></md-button></td><td ng-show="userMeasurementObject.diagnosticTestUser.value == 'Generic Measurement Capture'"><md-button class="md-raised md-warn md-button md-ink-ripple fa fa-plus availability-add-btn" ng-click="addRow()"></md-button><md-button class="md-raised md-warn availability-remove-btn fa fa-minus" ng-click="removeRow($index)" ng-disabled="userMeasurementObject.wsUserMeasurements == 1"></md-button></td></tr></tbody></table></div></div></div><div ng-if="userMeasurementObject.wsUserMeasurements.length == 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-b-10 margin-b-10">{{'NO_INDICATORS_ADDED_FOR_THE_TEST'|translate}}</div></form>
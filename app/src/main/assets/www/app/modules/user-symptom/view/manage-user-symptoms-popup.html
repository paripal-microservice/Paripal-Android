<md-dialog class="calendar-event-popup" aria-label="Mango (Fruit)" ng-cloak><md-toolbar><div class="md-toolbar-tools"><h2>{{'MANAGE_SYMPTOMS'|translate}}</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel()"><i class="fa fa-times" aria-hidden="true"></i></md-button></div></md-toolbar><div class="dialog-content"><div class="pull-left fullWidth" style="border:1px solid #EEE"><form name="symptomForm"><div class="clearfix"></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'USER'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="manageSymptom.user" required ng-disabled="viewmode || editmode || isFromAppointment" ng-readonly="userReadOnly" name="user" id="user" autocomplete="off" uib-typeahead="user as user.value for user in getUserNamesForRoleHistory($viewValue)" typeahead-on-select="getDisease(manageSymptom.user.id)" typeahead-loading="loading" typeahead-min-length="3"><div ng-messages="symptomForm.user.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'LOCATION'|translate}}<span class="mandatoryStar">*</span></label><input type="text" name="creatingOrgLoc" ng-model="manageSymptom.creatingOrgLoc" name="creatingOrgLoc" id="creatingOrgLoc" ng-disabled="viewmode || whethersub || isFromAppointment" autocomplete="off" uib-typeahead="creatingOrgLoc as creatingOrgLoc.value for creatingOrgLoc in getCreatedBy($viewValue)" typeahead-loading="loading" typeahead-min-length="3" required><div ng-messages="symptomForm.creatingOrgLoc.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'SYMPTOM'|translate}}<span class="mandatoryStar">*</span></label><input type="text" name="symptom" id="symptom" ng-model="manageSymptom.symptom" ng-disabled="viewmode || editmode" autocomplete="off" uib-typeahead="symptom as symptom.name for symptom in getSymptom($viewValue)" typeahead-loading="loading" typeahead-min-length="3" required><div ng-messages="symptomForm.symptom.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container><label>{{'FIRST_FELT'|translate}}<span class="mandatoryStar"></span></label><input datepicker class="pointer" ng-change="getDate(manageSymptom.dateFirstExperienced)" ng-disabled="viewmode" ng-model="manageSymptom.dateFirstExperienced" till-max-date="maxDate" ng-required="requireValidFrom" name="validFrom" ng-disabled="disableValidFrom" ng-change="validFromChnaged()"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12"><md-input-container><label>{{'LAST_FELT_ON'|translate}}<span class="mandatoryStar"></span></label><input datepicker class="pointer" ng-disabled="viewmode" ng-model="manageSymptom.dateLastFelt" name="validTill" ng-disabled="disableValidTill" ng-required="requireValidTill" till-max-date="maxDate"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'LINK_TO'|translate}} {{'DISEASE'|translate}}<span class="mandatoryStar">*</span></label><md-select ng-model="manageSymptom.disease" ng-disabled="viewmode || allMode" name="disease" ng-change="getDiseaseVariant(manageSymptom.disease.id)"><md-option ng-repeat="diseaseList in diseases" ng-value="diseaseList" ng-selected="{{diseaseList.id == diseaseId}}" typeahead-on-select="getDiseaseVariant(manageSymptom.disease.id)" required>{{diseaseList.value}}</md-option></md-select><div ng-messages="symptomForm.disease.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'TIMES'|translate}}</label><input type="number" maxlength="6" ng-model="manageSymptom.numberOfOccurrences" ng-disabled="viewmode"></md-input-container></div><div class="col-xs-12" ng-hide="whethersub"><md-input-container><label class="md-required">{{'DISEASE_VARIANT'|translate}}</label><md-select ng-model="manageSymptom.diseaseVariant" ng-disabled="viewmode || allMode" required name="diseaseVariant" id="diseaseVariant"><md-option ng-repeat="diseaseVariantList in diseaseVariants" ng-value="diseaseVariantList" ng-selected="{{diseaseVariantList.id == diseaseVariantId}}">{{diseaseVariantList.value}}</md-option></md-select><div ng-messages="symptomForm.diseaseVariant.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12" ng-hide="whethersub"><div class="radio_Check_box margin-t-10"><md-checkbox ng-model="manageSymptom.stillExperiencing" ng-disabled="viewmode"><span>{{'CONTINUING'|translate}}</span></md-checkbox></div></div><div class="col-xs-12" ng-hide="whethersub"><md-input-container class="md-block" layout="row"><label>{{'EQU_REMARKS'|translate}}</label><textarea ng-model="manageSymptom.remarks" rows="5" ng-disabled="viewmode" name="remark" md-select-on-focus="" style="overflow-y: scroll"></textarea></md-input-container></div><div class="col-xs-12" ng-hide="whethersub"><md-input-container class="md-block"><label>{{'RECORD_ID'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-disabled="viewmode || field || !viewMode" name="manageSymptom.symptomRecordId" id="manageSymptom.symptomRecordId" ng-model="manageSymptom.symptomRecordId"><div ng-messages="symptomForm.symptomRecordId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 padding-b-10"><div class="pull-right"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><span ng-if="pageState !=='view' && expressionDisabled !== true"><md-button class="md-raised md-warn" ng-click="saveUserSymptom(manageSymptom)" ng-disabled="!symptomForm.$valid">{{'SAVE'|translate}}</md-button></span></div></div></form></div></div></md-dialog>
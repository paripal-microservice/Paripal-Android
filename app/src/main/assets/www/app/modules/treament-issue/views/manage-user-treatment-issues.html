<div class="pageTitle"><span>{{'MANAGE_USER_TREATMENT_ISSUES'|translate}}</span><help-directive help-id="MANAGE_USER_TREATMENT_ISSUES" class="divContainer"></help-directive></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div class="stepwizard-step"><a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-tint" aria-hidden="true"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard"><spinner name="addOrgLocSpinner" img-src="{{pageLoaderImg}}" show="addOrgLocSpinner"></spinner><form name="addUsertreatmentIssue" class="form-horizontal" ng-submit="save()" autocomplete="off" novalidate><div class="col-xs-12"><h3>{{'MANAGE_USER_TREATMENT_ISSUES'|translate}}</h3><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'USER'|translate}}<span style="color:red">*</span></label><input name="user" ng-model="treatmentIssue.user" ng-disabled="viewmode|| editmode" name="user" id="user" autocomplete="off" uib-typeahead="user as user.value for user in getUserNamesForRoleHistory($viewValue)" typeahead-loading="loading" typeahead-on-select="getRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.diseaseVariant.id,treatmentIssue.creatingOrganization.id);getSymRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.creatingOrganization.id)" typeahead-min-length="getSmartSearchMinLength('userMinLength')" required><div ng-messages="addUsertreatmentIssue.user.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'ENTERED_BY'|translate}}<span style="color:red">*</span></label><input type="text" name="creatingOrganization" ng-model="treatmentIssue.creatingOrganization" autocomplete="off" uib-typeahead="creatingOrgLoc as creatingOrgLoc.value for creatingOrgLoc in getCreatingOrgLoc($viewValue)" typeahead-loading="loading" typeahead-on-select="getRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.diseaseVariant.id,treatmentIssue.creatingOrganization.id);getSymRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.creatingOrganization.id)" typeahead-min-length="getSmartSearchMinLength('orgMinLength')" ng-disabled="viewmode" required><div ng-messages="addUsertreatmentIssue.creatingOrganization.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'DISEASE'|translate}}<span style="color:red">*</span></label><input type="text" name="disease" ng-model="treatmentIssue.disease" autocomplete="off" uib-typeahead="disease as disease.value for disease in getDisease($viewValue)" typeahead-loading="loading" typeahead-on-select="getRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.diseaseVariant.id,treatmentIssue.creatingOrganization.id);getSymRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.creatingOrganization.id)" typeahead-min-length="getSmartSearchMinLength('diseaseMinLength')" ng-disabled="disabled" required><div ng-messages="addUsertreatmentIssue.disease.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropdown"><md-input-container class="md-block"><label>{{'DISEASE_VARIANT'|translate}}<span style="color:red">*</span></label><input type="text" name="diseaseVariant" ng-model="treatmentIssue.diseaseVariant" ng-disabled="disabled" autocomplete="off" uib-typeahead="diseaseVariant as diseaseVariant.value for diseaseVariant in getDiseaseVariant($viewValue)" typeahead-on-select="getRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.diseaseVariant.id,treatmentIssue.creatingOrganization.id);getSymRecId(treatmentIssue.user.id,treatmentIssue.disease.id,treatmentIssue.creatingOrganization.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('diseaseVariantMinLength')" required><div ng-messages="addUsertreatmentIssue.diseaseVariant.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'TMT_REC_ID'|translate}}<span style="color:red">*</span></label><md-select ng-change="getDetails(treatmentIssue.treatmentRecordId.value)" ng-model="treatmentIssue.treatmentRecordId" ng-disabled="viewmode"><md-option ng-repeat="recId in treatmentRecordId" ng-value="recId" ng-selected="recId.id == treatmentIssue.treatmentRecordId.id ? true:false">{{recId.value}}</md-option></md-select><div ng-messages="addUsertreatmentIssue.treatmentRecordId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label>{{'DATE_START'|translate}}</label><input datepicker class="pointer" name="dateStart" ng-disabled="disabled" ng-model="treatmentIssue.dateStart" till-max-date="minDate" restrict="reject"><md-icon class="datepickerIcon"></md-icon><div ng-messages="addUsertreatmentIssue.dateStart.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label>{{'DATE_END'|translate}}</label><input datepicker class="pointer" name="dateEnd" ng-model="treatmentIssue.dateEnd" ng-disabled="disabled" from-min-date="treatmentIssue.dateStart" restrict="reject"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'TREATMENT_TYPE'|translate}}</label><input type="text" name="treatmentType" ng-model="treatmentIssue.treatmentType" ng-disabled="disabled" autocomplete="off" uib-typeahead="treatmentTypeId as treatmentTypeId.value for treatmentTypeId in getTreatmentTypeId($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('treatmentTypeMinLength')"></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'TREATMENT_ISSUE'|translate}}<span style="color:red">*</span></label><input type="text" name="treatmentIssue" ng-model="treatmentIssue.treatmentIssue" ng-disabled="viewmode" autocomplete="off" uib-typeahead="treatmentIssue as treatmentIssue.value for treatmentIssue in getTreatmentIssue($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('treatmentTypeMinLength')" required><div ng-messages="addUsertreatmentIssue.treatmentIssue.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label>{{'NOTICED_ON'|translate}}</label><input datepicker class="pointer" ng-model="treatmentIssue.noticedOn" restrict="reject" name="noticedOn" till-max-date="minDate" ng-disabled="viewmode"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label>{{'UPDATED_PROF_ON'|translate}}</label><input datepicker class="pointer" ng-model="treatmentIssue.updatedToProfessionalOn" from-min-date="treatmentIssue.noticedOn" restrict="reject" name="updatedToProfessionalOn" ng-disabled="viewmode"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'SYMP_REC_ID'|translate}}</label><md-select ng-model="treatmentIssue.symptomRecordId" ng-disabled="viewmode"><md-option ng-repeat="symRecId in symptomRecordId" ng-value="symRecId" ng-selected="symRecId.id == treatmentIssue.symptomRecordId.id ? true:false">{{symRecId.value}}</md-option></md-select></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'ORG_STATUS'|translate}}<span style="color:red">*</span></label><input type="text" name="issueResolutionStatus" ng-model="treatmentIssue.issueResolutionStatus" ng-disabled="viewmode" autocomplete="off" uib-typeahead="treatmentIssueId as treatmentIssueId.value for treatmentIssueId in getIssueResolutionStatus($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('defaultMinLength')" required><div ng-messages="addUsertreatmentIssue.issueResolutionStatus.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REL_TMT_ID'|translate}}</label><input type="text" ng-model="treatmentIssue.relatedTreatmentId" ng-disabled="viewmode"></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><md-input-container class="md-block" layout="row"><label>{{'EQU_REMARKS'|translate}}</label><textarea ng-model="treatmentIssue.remarks" rows="3" cols="50" ng-disabled="viewmode" name="remarks" md-select-on-focus="" style="overflow-y: scroll;max-height:150px"></textarea><div ng-messages="treatmentIssue.remarks.$error"><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 textAlign-R"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><span ng-if="pageState !=='view' && expressionDisabled !== true"><md-button class="md-raised md-warn" ng-click="save()" ng-disabled="!addUsertreatmentIssue.$valid">{{'SAVE'|translate}}</md-button></span></div></div></div></form></div>
<md-dialog class="calendar-event-popup" aria-label="Mango (Fruit)" ng-cloak><md-toolbar><div class="md-toolbar-tools"><h2>{{'CREATE_REQUEST' | translate}}</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel()"><i class="fa fa-times" aria-hidden="true"></i></md-button></div></md-toolbar><div class="dialog-content"><div class="pull-left fullWidth" style="border:1px solid #EEE"><form name="createRequestForm"><div class="clearfix"></div><div class="col-xs-12"><md-input-container><label>{{'SERVICE_TYPE'|translate}}<span style="color:red">*</span></label><input type="text" name="treatmentType" ng-model="createRequest.treatmentType" ng-disabled="viewmode" autocomplete="off" uib-typeahead="treatmentType as treatmentType.value for treatmentType in getTreatmentType($viewValue)" typeahead-loading="loading" typeahead-min-length="3" required><div ng-messages="createRequestForm.treatmentType.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container><spinner name="onBehalfOfAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><label class="md-required">{{'REQ_ON_BEHALF_OF'|translate}}</label><input ng-model="createRequest.onBehalfOf" ng-blur="checkNewUser()" ng-disabled="viewmode ||Guardian" ng-readonly="userReadOnly" name="onBehalfOf" id="onBehalfOf" autocomplete="off" uib-typeahead="onBehalfOf as onBehalfOf.value for onBehalfOf in getOnBehalfOf($viewValue)" typeahead-on-select="checkNewUser()" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgMinLength')" required><div ng-messages="createRequestForm.onBehalfOf.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12" ng-if="notNewUser"><md-input-container><label class="md-required">{{'MOBILE_NUMBER'|translate}}</label><input ng-model="createRequest.phoneNumber" name="phoneNumber" maxlength="10" placeholder="{{'MOBILE_HINT' |translate}}" ng-pattern="/^[0-9]{10}$/" required><div ng-messages="createRequestForm.phoneNumber.$error"><div ng-message="required">{{'INPUT_REQ' |translate}}</div><div ng-message="pattern">{{'INVALID_MOBILE' |translate}}</div></div></md-input-container></div><div class="col-xs-12" ng-if="notNewUser"><md-input-container><label class="md-required">{{'REQ_ADDRESS'|translate}}</label><input name="address" id="address" ng-model="createRequest.address" ng-disabled="viewmode" required><div ng-messages="createRequestForm.address.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12" ng-if="notNewUser"><md-input-container><label class="md-required">{{'POSTAL_CODE'|translate}}</label><input name="postalCode" maxlength="6" id="postalCode" ng-model="createRequest.postalCode" ng-disabled="viewmode" ng-pattern="/^[0-9]{6}$/" required><div ng-messages="createRequestForm.postalCode.$error"><div ng-message="pattern">{{'INVALID_POSTAL_CODE' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container><label>{{'PROBLEM_DESCRIPTION'|translate}}<span style="color:red">*</span></label><textarea ng-model="createRequest.requestDescription" rows="1" ng-disabled="viewmode" name="requestDescription" ng-required="prblmDesFieldMandatory" md-select-on-focus="" style="overflow-y: scroll"></textarea><div ng-show="prblmDesFieldMandatory" ng-messages="createRequestForm.requestDescription.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12"><md-input-container><label>{{'VALID_TILL'|translate}}<span style="color:red">*</span></label><input datepicker class="pointer" ng-model="createRequest.expiryDate" restrict="reject" name="expiryDate" ng-disabled="viewmode" from-min-date="createRequest.requestDate"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12" ng-if="requestType=='REQ_HOME_VISIT' || requestType=='REQ_MEDICAL_CERTIFICATE'"><md-input-container class="md-block" layout="row"><label>{{'Why'|translate}}</label><textarea ng-model="createRequest.why" rows="1" ng-disabled="viewmode" name="why" md-select-on-focus="" style="overflow-y: scroll"></textarea><div ng-messages="createRequestForm.why.$error"><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12" ng-if="requestType=='REQ_HOME_VISIT' || requestType=='REQ_MEDICAL_CERTIFICATE'"><md-input-container class="md-block md-icon-right"><label>{{'START_DATE'|translate}}</label><input datepicker class="pointer" from-min-date="minDate" ng-change="getTillDate(createRequest.start)" ng-model="createRequest.start" ng-disabled="viewmode"><md-icon class="datepickerIcon ng-isolate-scope material-icons"></md-icon></md-input-container></div><div class="col-xs-12" ng-if="requestType=='REQ_HOME_VISIT' || requestType=='REQ_MEDICAL_CERTIFICATE'"><md-input-container class="md-block md-icon-right"><label>{{'END_DATE'|translate}}</label><input datepicker class="pointer" from-min-date="endDate" ng-model="createRequest.end" ng-disabled="viewmode"><md-icon class="datepickerIcon ng-isolate-scope material-icons"></md-icon></md-input-container></div><div class="col-xs-12"><md-input-container class="md-block"><label>{{'PROFESSIONALS'|translate}}</label><input type="text" name="healthProfessional" ng-model="createRequest.healthProfessional" autocomplete="off" uib-typeahead="healthProfessional as healthProfessional.value for healthProfessional in getHealthProf($viewValue)" typeahead-on-select="getHpDetails(createRequest.healthProfessional.id)" typeahead-loading="loading" typeahead-min-length="3" ng-disabled="viewmode" ng-required="hpMandatory"></md-input-container></div><div class="col-xs-12"><div class="col-xs-6"><md-checkbox ng-value="true" ng-model="createRequest.isConfirmed">{{'CONFIRMED'|translate}}</md-checkbox></div><div class="col-xs-6"><md-checkbox ng-value="true" ng-change="leadChange()" ng-model="createRequest.isLead">{{'LEAD'|translate}}</md-checkbox></div></div><div class="col-xs-12" ng-if="createRequest.isLead"><md-input-container><label>{{'REFERRER_NAME'|translate}}</label><input ng-model="createRequest.referrerName" name="referrerName" id="referrerName" autocomplete="off"></md-input-container></div><div class="col-xs-12" ng-if="createRequest.isLead"><md-input-container><label>{{'REFERRAL_AMOUNT'|translate}}</label><input ng-model="createRequest.referralAmount" name="referralAmount" type="number" min="0"><div ng-messages="createRequestForm.referralAmount.$error"><div ng-message="pattern">{{'INVALID_CURRENCY' |translate}}</div></div></md-input-container></div><div class="col-xs-12 padding-b-10"><div class="pull-right"><button class="md-raised md-button md-ink-ripple" type="button" ng-click="cancel()" aria-label="Cancel"><span class="ng-binding ng-scope"><span class="ng-binding ng-scope">{{'CANCEL'|translate}}</span></span></button> <button class="md-warn md-raised md-button md-ink-ripple" type="button" ng-disabled="!createRequestForm.$valid" ng-click="saveCreateRequest()" aria-label="Save"><span class="ng-binding ng-scope">{{'SAVE'|translate}}</span></button></div></div></form></div></div></md-dialog>
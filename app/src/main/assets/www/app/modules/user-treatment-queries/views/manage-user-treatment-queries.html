<div class="pageTitle"><span>{{'MNGE_USER_TMT_QUERIES'|translate}}</span><help-directive help-id="MNGE_USER_TMT_QUERIES" class="divContainer"></help-directive></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div class="stepwizard-step"><a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-tint" aria-hidden="true"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard"><spinner name="addOrgLocSpinner" img-src="{{pageLoaderImg}}" show="addOrgLocSpinner"></spinner><form name="formQueries" class="form-horizontal" autocomplete="off" novalidate><div class="col-xs-12"><h3>{{'MNGE_USER_TMT_QUERIES'|translate}}</h3><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'QUERY_SEQ'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-model="queries.querySequenceId" ng-disabled="viewmode || field || !viewMode"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'USER'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="queries.queryUserId" ng-readonly="userReadOnly" ng-disabled="viewmode||editmode" required name="queryUserId" id="queryUserId" autocomplete="off" uib-typeahead="queryUserId as queryUserId.value for queryUserId in getUserNamesForRoleHistory($viewValue)" typeahead-loading="loading" typeahead-on-select="getRecId(queries.queryUserId.id,queries.disease.id,queries.creatingOrganizationId.id);getQueryId(queries.queryUserId.id)" typeahead-on-select="getDiseaseId(queries.disease.id)" typeahead-on-select="getSequenceId(queries.queryUserId.id)" typeahead-min-length="getSmartSearchMinLength('userMinLength')"><div ng-messages="formQueries.queryUserId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'LOCATION'|translate}}<span class="mandatoryStar">*</span></label><input type="text" name="creatingOrganizationId" id="creatingOrganizationId" ng-model="queries.creatingOrganizationId" typeahead-on-select="getRecId(queries.queryUserId.id,queries.disease.id,queries.creatingOrganizationId.id)" typeahead-on-select="getMainProfessionalAssociated(queries.creatingOrganizationId.id)" typeahead-on-select="getDiseaseId(queries.disease.id)" typeahead-on-select="validate(sideeffect.creatingOrgn,medicationSideEffectForm.creatingOrgn)" name="creatingOrgn" id="creatingOrgn" ng-disabled="viewmode" required autocomplete="off" uib-typeahead="orgLocationCode as orgLocationCode.value for orgLocationCode in getCreatedBy($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgLocMinLength')"><div ng-messages="formQueries.queryUserId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'DISEASE'|translate}}<span class="mandatoryStar">*</span></label><input ng-disabled="disabled" ng-model="queries.disease" name="disease" ng-maxlength="50" id="autocompleteFieldOrg" ng-disabled="viewmode" autocomplete="off" uib-typeahead="disease as disease.value for disease in getDisease($viewValue)" typeahead-on-select="getRecId(queries.queryUserId.id,queries.disease.id,queries.creatingOrganizationId.id)" typeahead-min-length="getSmartSearchMinLength('diseaseMinLength')" typeahead-on-select="getDiseaseId(queries.disease.id)" required><div ng-messages="formQueries.queryUserId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container><label>{{'EQU_VARIANT'|translate}}<span class="mandatoryStar">*</span></label><input ng-disabled="disabled" ng-model="queries.diseaseVariant" name="diseaseVariant" ng-maxlength="50" id="autocompleteFieldOrg" autocomplete="off" uib-typeahead="diseaseVariant as diseaseVariant.value for diseaseVariant in getDiseaseVariant($viewValue)" typeahead-min-length="getSmartSearchMinLength('diseaseVariantMinLength')" required><div ng-messages="searchForm.autocompleteFieldOrg.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="minlength">{{'MIN_LENGTH'|translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown" ng-show="hideField"><md-input-container class="md-block"><label>{{'TMT_REC_ID'|translate}}<span class="mandatoryStar">*</span></label><md-select ng-model="queries.treatmentRecordId" ng-disabled="viewmode" ng-change="getDetails(queries.treatmentRecordId.value)"><md-option ng-repeat="recId in treatmentRecordId" ng-value="recId" ng-selected="recId.id == queries.treatmentRecordId.id ? true:false">{{recId.value}}</md-option></md-select><div ng-messages="formQueries.queryUserId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown" ng-show="hideField"><md-input-container><label>{{'D_START'|translate}}</label><input datepicker class="pointer" ng-model="queries.dateStart" restrict="reject" ng-disabled="disabled" name="dateRequestCreated"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown" ng-show="hideField"><md-input-container><label>{{'D_END'|translate}}</label><input datepicker class="pointer" ng-disabled="disabled" ng-model="queries.dateEnd" restrict="reject" name="dateRequestCreated"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'TREATMENT_TYPE'|translate}}</label><input type="text" ng-model="queries.treatmentType" ng-disabled="disabled" autocomplete="off" uib-typeahead="treatmentType as treatmentType.value for treatmentType in getTreatmenttype($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('treatmentTypeMinLength')"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown" ng-show="hideField"><md-input-container><label>{{'DATE'|translate}}</label><input datepicker class="pointer" ng-model="queries.currentDate" restrict="reject" name="currentDate" id="currentDate" ng-disabled="viewmode" till-max-date="maxDate"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block" layout="row"><label>{{'QUERY'|translate}}<span class="mandatoryStar">*</span></label><textarea ng-model="queries.query" rows="4" cols="50" ng-disabled="disabled" required name="query" id="query" md-select-on-focus="" style="overflow-y: scroll;max-height:150px"></textarea><div ng-messages="formQueries.query.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REPLY_BY'|translate}}</label><input type="text" ng-model="queries.replyBy" autocomplete="off" uib-typeahead="mainProfessionalAssociated as mainProfessionalAssociated.value for mainProfessionalAssociated in getMainProfessionalAssociated($viewValue,queries.creatingOrganizationId.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-disabled="viewmode"></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><md-input-container class="md-block"><label>{{'LINKED_TO_QUERY'|translate}}</label><md-select ng-model="queries.linkedToQuerySequence" ng-disabled="viewmode"><md-option ng-repeat="sequenceId in linkedToQuerySequence" ng-value="sequenceId" ng-selected="{{sequenceId.id == queries.linkedToQuerySequence.id}}">{{sequenceId.value}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-6 col-lg-6" ng-show="hideField"><div class="radio_Check_box margin-t-10"><md-checkbox ng-model="queries.allowAccessHidingNames" ng-disabled="viewmode"><span>{{'OTHER_CLIENT'|translate}}</span></md-checkbox></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block" layout="row"><label>{{'REPLY'|translate}}</label><textarea ng-model="queries.reply" rows="3" cols="50" ng-disabled="disabled" name="reply" md-select-on-focus="" style="overflow-y: scroll;max-height:150px"></textarea></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block" ng-show="hideField"><label>{{'STATUS'|translate}}<span class="mandatoryStar">*</span></label><input type="text" name="queryStatus" id="queryStatus" ng-model="queries.queryStatus" ng-disabled="viewmode" ng-blur="validate(sideeffect.creatingOrgn,medicationSideEffectForm.creatingOrgn)" name="creatingOrgn" id="creatingOrgn" ng-disabled="viewmode" required autocomplete="off" uib-typeahead="orgLocationCode as orgLocationCode.value for orgLocationCode in getIssue($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgLocMinLength')"><div ng-messages="formQueries.queryUserId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 textAlign-R"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><span ng-if="pageState !=='view' && expressionDisabled !== true"><md-button class="md-raised md-warn" ng-click="saveTreatmentQueries()" ng-disabled="!formQueries.$valid">{{'SAVE'|translate}}</md-button></span></div></div></div></form></div>
<md-dialog class="dialog-min-50" aria-label="Mango (Fruit)" ng-cloak><md-toolbar><div class="md-toolbar-tools"><h2 ng-if="pageState == 'add'">{{'ADD_ALLERGY' | translate}}</h2><h2 ng-if="pageState == 'edit'">{{'EDIT_ALLERGY' | translate}}</h2><h2 ng-if="pageState == 'view'">{{'VIEW_ALLERGY' | translate}}</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel()"><i class="fa fa-times" aria-hidden="true"></i></md-button></div></md-toolbar><div class="dialog-content"><div class="pull-left fullWidth" style="border:1px solid #EEE; min-height: 385px"><form name="addAllergyForm"><div class="clearfix"></div><div class="col-xs-12 md-dialog-content-data padding-t-10"><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmp" is-auto-complete="true"></spinner><md-input-container><label>{{'USER'|translate}}</label><input ng-disabled="!isOrgUser || disablePatient" ng-model="addAllergyObj.patientUser" name="userName" ng-maxlength="100" id="userObj" autocomplete="off" uib-typeahead="userObj as userObj.value for userObj in findUserByName($viewValue)" typeahead-editable="commonConstants.typeaheadEditable" typeahead-min-length="getSmartSearchMinLength('userMinLength')"></md-input-container></div><div class="col-xs-12"><div class="md-dialog-content-data padding-t-5"><md-input-container><spinner name="diseaseAutoCmp" img-src="{{autoCompletLoaderImg}}" show="diseaseAutoCmpLoading" is-auto-complete="true"></spinner><label class="md-required">{{'ALLERGY'|translate}}</label><input ng-model="addAllergyObj.allergy" name="allergy" id="allergy" maxlength="150" required><div ng-messages="addAllergyForm.allergy.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="col-xs-12"><div class="md-dialog-content-data padding-t-5"><md-input-container><spinner name="diseaseAutoCmp" img-src="{{autoCompletLoaderImg}}" show="diseaseAutoCmpLoading" is-auto-complete="true"></spinner><label class="md-required">{{'REACTION'|translate}}</label><input ng-model="addAllergyObj.allergyReaction" name="allergy" id="reaction" maxlength="150" required><div ng-messages="addAllergyForm.reaction.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="col-xs-12"><md-input-container><label>{{'START_DATE'|translate}}</label><input datepicker class="pointer" ng-model="addAllergyObj.allergyStartedDate" name="startedDate" ng-disabled="false" till-max-date="maxDate"><md-icon class="datepickerIcon"></md-icon><div ng-messages="addAllergyForm.startedDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12" style="margin-top: 60px"><div class="pull-right"><button class="md-raised md-button md-ink-ripple" type="button" ng-click="cancel()" aria-label="Cancel"><span class="ng-binding ng-scope"><span class="ng-binding ng-scope">{{'CANCEL'|translate}}</span></span></button> <button class="md-warn md-raised md-button md-ink-ripple" type="button" ng-disabled="!addAllergyForm.$valid || pageState=='view'" ng-click="addUpdateAllergyRecord()" aria-label="Save"><span class="ng-binding ng-scope">{{'SAVE'|translate}}</span></button></div></div></form></div></div></md-dialog>
<div class="pageTitle"><span>{{'APPOINTMENT_LIST'|translate}}</span><help-directive help-id="APPOINTMENT_LIST" class="divContainer"></help-directive></div><div class="filterPanel filter"><uib-accordion><uib-accordion-group is-open="false"><uib-accordion-heading><i class="fa fa-filter"></i> <span>{{'FILTER' | translate}}</span> <span ng-if="searchCriteria.entityName && searchCriteria.apptDate && !searchCriteria.entityName.value.id">{{'APPOINTMENTS_FOR' | translate}} {{searchCriteria.entityName.value}} {{'ON_S' | translate}} {{searchCriteria.apptDate}}</span> <span ng-if="searchCriteria.entityName && searchCriteria.apptDate && searchCriteria.entityName.value.id">{{'APPOINTMENTS_FOR' | translate}} {{searchCriteria.entityName.value.value}} {{'ON_S' | translate}} {{searchCriteria.apptDate}}</span> <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i></uib-accordion-heading><form name="listForm" class="form-horizontal panel-body-top" id="listForm" autocomplete="off"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ws-client-search-combo label-name="ENTITY_TYPE" query-param="false" required="true" disable="false" name-value-list="searchCriteria.entityType" query-url="entityType.queryUrl" query-parameter="entityType.queryParameter" json-parameter="entityType.jsonParameter"></ws-client-search-combo><ws-client-search-combo label-name="EQUIPMENT_NAME" ng-if="isEquipment" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-name-value-combo label-name="HEALTH_SUPPORT_PROF_NAME" ng-if="isOrgUser" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="searchString" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-name-value-combo><ws-client-search-combo label-name="PROCESS_NAME" ng-if="isProcess" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-client-search-combo label-name="EVENT_TYPE" query-param="false" disable="false" name-value-list="searchCriteria.eventType" query-url="eventType.queryUrl" query-parameter="eventType.queryParameter" json-parameter="eventType.jsonParameter"></ws-client-search-combo></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ws-name-value-combo label-name="EVENT_NAME" query-param="false" disable="isEventNameDisabled" name-value-list="searchCriteria.eventName" query-search-key="eventNameKeyword" query-url="eventName.queryUrl" query-parameter="eventName.queryParameter" json-parameter="eventName.jsonParameter"></ws-name-value-combo><div class="col-sm-12 col-md-4 col-lg-4 col-xs-12"><md-input-container><label>{{'APPOINTMENT_DATE'|translate}} <span ng-if="true" class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="searchCriteria.apptDate" from-min-date="minDate" name="apptDate" ng-disabled="false" ng-required="true"><md-icon class="datepickerIcon"></md-icon><div ng-messages="listForm.apptDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><current-start-end-time css-class="col-xs-12 col-md-2 col-lg-2 timepickerArrow margin-b-10" start-time-label="START_TIME" end-time-label="END_TIME" start-date="startDate" end-date="endDate" start-time="searchCriteria.apptStartTime" end-time="searchCriteria.apptEndTime" required-start-time="false" required-end-time="false" disable-start-time="false" disable-end-time="false"></current-start-end-time></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ws-name-value-combo org-loc-permission="featurePrivilegeConstants.ORGANIZATION_LOCATION_MGMT_VIEW" label-name="ORG_LOCATION" query-param="false" required="false" disable="false" name-value-list="searchCriteria.orgLocation" query-search-key="keyword" query-url="orgLocation.queryUrl" query-parameter="orgLocation.queryParameter" json-parameter="orgLocation.jsonParameter"></ws-name-value-combo><ws-client-search-combo label-name="SERVICE_TYPE" query-param="false" required="false" disable="false" name-value-list="searchCriteria.serviceType" query-url="serviceType.queryUrl" query-parameter="serviceType.queryParameter" json-parameter="serviceType.jsonParameter"></ws-client-search-combo><ws-client-search-combo label-name="STATUS" query-param="false" required="false" disable="false" name-value-list="searchCriteria.apptStatus" query-url="apptStatus.queryUrl" query-parameter="apptStatus.queryParameter" json-parameter="apptStatus.jsonParameter"></ws-client-search-combo></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ws-name-value-combo label-name="SPECIFIC_PROFESSIONAL" query-param="false" required="false" disable="!isProcessSelected" name-value-list="searchCriteria.specificProfessional" query-search-key="keyword" query-url="specificProfessional.queryUrl" query-parameter="specificProfessional.queryParameter" json-parameter="specificProfessional.jsonParameter"></ws-name-value-combo><ws-name-value-combo label-name="ALLOTED_TO_FORWARDED_TO" query-param="true" required="false" disable="false" query-search-key="searchString" name-value-list="searchCriteria.allocatedForwarded" query-url="allocatedForwarded.queryUrl" query-parameter="allocatedForwarded.queryParameter" json-parameter="allocatedForwarded.jsonParameter"></ws-name-value-combo></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><md-input-container><md-checkbox ng-model="searchCriteria.forwardedAppt" aria-class="md-warn md-align-top-left padding-b-25" ng-change="forwardedApptChecked(searchCriteria.forwardedAppt)" flex>{{'FORWARDED_APPOINTMENTS' |translate}}</md-checkbox><md-checkbox ng-model="searchCriteria.walkInAppt" aria-class="md-warn md-align-top-left padding-b-25" flex>{{'WALK_IN_APPOINTMENT' |translate}}</md-checkbox><md-checkbox ng-model="searchCriteria.followUpAppt" aria-class="md-warn md-align-top-left padding-b-25" flex>{{'FOLLOW_UP_APPOINTMENT' |translate}}</md-checkbox></md-input-container></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 textAlign-R wizardFooter"><md-button type="reset" ng-click="clear()" class="md-raised">{{"CLEAR"|translate}}</md-button><md-button class="md-raised md-warn" ng-click="searchFixAppointment(listForm)" ng-disabled="!listForm.$valid">{{"APPLY"|translate}}</md-button></div></form></uib-accordion-group></uib-accordion></div><div class="padding-b-10 padding-t-20 ng-scope pull-left fullWidth"><div class="padding-0"><div class="col-sm-12 col-md-10 col-lg-10 col-xs-12 padding-0"><md-menu class="pull-left padding-0"><md-button type="button" class="md-raised md-warn" ng-click="$mdOpenMenu($event)"><i class="fa fa-plus"></i> {{'NEW' | translate}}</md-button><md-menu-content class="appt-add-mn-btn" width="2"><md-menu-item><md-button ng-if="appointmentType!='FCFS'" type="button" class="md-raised" ng-click="manageFixAppointment(listForm)" check-permission feature-privilege="{{featurePrivilegeConstants.APPOINTMENT_ADD}}"><span md-menu-align-target><i class="fa fa-plus"></i> {{'APPOINTMENT' | translate}}</span></md-button></md-menu-item><md-menu-item><md-button type="button" class="md-raised" ng-click="manageRecordWalkInForm(null,'manageAppointmentWalkIn','RECORDWALKIN',listForm)" check-permission feature-privilege="{{featurePrivilegeConstants.APPOINTMENT_WALK_IN}}"><span md-menu-align-target><i class="fa fa-plus"></i> {{'WALK_IN' | translate}}</span></md-button></md-menu-item></md-menu-content></md-menu><div class="padding-l-15 padding-t-10 pull-left"><md-checkbox ng-model="searchByPatient" ng-change="searchFixAppointment(listForm)" class="" aria-class="md-warn md-align-top-left padding-b-25" flex>{{'SEARCH_BY_PATIENT' |translate}}</md-checkbox></div><div ng-if="searchByPatient==true" class="col-sm-12 col-md-4 col-lg-4 padding-0 padding-l-15"><md-input-container><label>{{"PATIENT_NAME"|translate}}</label><input ng-model="searchCriteria.patientUserId" name="inFavorOfName" ng-disabled="isMadeToSSDisabled===true || disableControls===true" ng-maxlength="100" id="inFavorOfName" autocomplete="off" uib-typeahead="patientName as patientName.value for patientName in getPatientList($viewValue)" typeahead-min-length="filterCriteria.partyType == 'INDIVIDUAL'?getSmartSearchMinLength('userMinLength'):getSmartSearchMinLength('orgLocMinLength')" typeahead-on-select="searchFixAppointment(listForm)"></md-input-container></div><ws-client-search-combo css-class="col-sm-12 col-xs-12 col-md-4 col-lg-4" label-name="EQUIPMENT_NAME" ng-if="isEquipment && searchByPatient!=true" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="" on-select="searchFixAppointment(listForm)" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-name-value-combo css-class="col-sm-12 col-xs-12 col-md-3 col-lg-3" label-name="HEALTH_SUPPORT_PROF_NAME" ng-if="isOrgUser && searchByPatient!=true" on-select="searchFixAppointment(listForm)" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="searchString" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-name-value-combo><ws-client-search-combo css-class="col-sm-12 col-xs-12 col-md-3 col-lg-3" label-name="PROCESS_NAME" ng-if="isProcess && searchByPatient!=true" on-select="searchFixAppointment(listForm)" query-param="false" disable="isEntityNameDisabled" name-value-list="searchCriteria.entityName" query-search-key="" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-client-search-combo ng-if="searchByPatient!=true" css-class="col-sm-12 col-xs-12 col-md-3 col-lg-3" label-name="STATUS" query-param="false" on-select="searchFixAppointment(listForm)" required="false" disable="false" name-value-list="searchCriteria.apptStatus" query-url="apptStatus.queryUrl" query-parameter="apptStatus.queryParameter" json-parameter="apptStatus.jsonParameter"></ws-client-search-combo><md-checkbox ng-if="(isProcess || isOrgUser) && searchByPatient!=true" ng-model="forwardedToMe" aria-class="md-warn md-align-top-left padding-b-25" ng-change="forwardedToMeChanged(forwardedToMe)" flex>{{'FORWARDED_TO_ME' |translate}}</md-checkbox></div><div class="pull-right"><md-menu><md-button type="button" class="md-raised" ng-click="$mdOpenMenu($event)">{{'SHOW'|translate}} {{itemPerPage}}</md-button><md-menu-content width="3" ng-init="maxRecordsAr = [10,25,50,100]"><md-menu-item ng-repeat="item in maxRecordsAr"><md-button ng-click="setMaxRecords(item)"><span md-menu-align-target>{{'SHOW'|translate}} {{item}}</span></md-button></md-menu-item></md-menu-content></md-menu></div></div></div><div class="divtable accordion-xs" id="capture"><div class="row"><div ng-repeat="row in WSAppoinrmentList" class="col-sm-12 col-md-12 col-lg-12 padding-b-10"><md-card ng-class="" class="table custom-event-card" style="margin: 5px 0;padding: 10px 0"><div style="padding-left:10px; padding-right:10px"><div class="col-xs-12 col-sm-12 col-md-2 col-lg-2"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 padding-0 textAlign-C"><img src="app/images/user.jpg" style="height: 50px;width: 50px; margin:0 auto" id="logo"><br><b>{{row.patientName}}</b><br><br></div></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 card-text"><table class="table card-view-table"><tr><td><a class="view-appointment-link" ng-click="viewAppointment(row)" check-permission feature-privilege="{{featurePrivilegeConstants.APPOINTMENT_VIEW}}"><b>{{row.apptDate | timestampToDate}}</b> {{row.startTime | time24to12Hour}} - {{row.endTime | time24to12Hour}}</a></td><td><span ng-if="row.checkIn"><b>{{'CHECK_IN' | translate}}:</b> {{row.checkIn | time24to12Hour}} <b ng-if="row.isWalkIn" class="redText pull-right">{{'WALKIN' | translate}}</b></span></td></tr><tr><td><span><b>{{row.eventType.value}}</b></span></td><td><span ng-if="row.checkOut"><b>{{'CHECK_OUT' | translate}}:</b> {{row.checkOut | time24to12Hour}}</span></td></tr><tr><td><span><b>{{row.apptStatus}}</b></span></td><td><span ng-if="row.checkIn"><b>{{'TOKEN' | translate}}:</b> {{row.tokenNo}}</span></td></tr><tr><td colspan="2"><span><b>{{row.appointmentForwardedTo.value}}</b></span></td></tr><tr><td colspan="2"><a class="view-appointment-link" ng-click="addEditAppointmentSummary(row)"><b>{{'SUMMARY' | translate}}</b></a><p>{{row.appointmentSummaryText}}</p></td></tr></table></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 but-appointment"><div><span ng-if="isCurrentDate && (row.apptStatusCode==='CONSULTATION_COMPLETED')"><md-button class="custom-event-card-button" ng-click="manageCheckout(row)">{{"CHECK_OUT" | translate}}</md-button></span><span><md-button ng-hide="!row.serviceType || !row.serviceTypeId" class="custom-event-card-button" ng-click="createViewBill(row)">{{"CREATE_VIEW_BILL" | translate}}</md-button></span><span><md-button ng-if="isCurrentDate && row.isWalkIn && row.apptStatusCode==='CHECKED_IN' && canIssueToken" class="custom-event-card-button" ng-click="manageIssueToken(row,listForm)">{{"ISSUE_TOKEN" | translate}}</md-button></span><span ng-if="isCurrentDate && (row.apptStatusCode==='NEW' || row.apptStatusCode==='POSTPONED')"><md-button class="custom-event-card-button" ng-click="manageCheckIn(row)">{{"CHECK_IN" | translate}}</md-button></span><span ng-if="(isCurrentDate && (row.entityType!=='CAL_PROCESS' && (row.apptStatusCode==='ISSUE_TOKEN'  || row.apptStatusCode==='FORWARDED')) || ((row.entityType==='CAL_PROCESS' && (row.apptStatusCode==='ALLOCATED_TO_DOCTOR' || row.apptStatusCode==='FORWARDED'))) && canConsultationStart)"><md-button check-permission feature-privilege="{{featurePrivilegeConstants.START_CONSULTATION}}" class="custom-event-card-button" ng-click="manageConsultationStarted(row,listForm)">{{"CONSULTATION_START" | translate}}</md-button></span><span ng-if="row.apptStatusCode==='CONSULTATION_STARTED' && isCurrentDate"><md-button check-permission feature-privilege="{{featurePrivilegeConstants.COMPLETE_CONSULTATION}}" class="custom-event-card-button" ng-click="manageConsultationFinished(row,listForm)">{{"CONSULTATION_FINISH" | translate}}</md-button></span><span ng-if="isCurrentDate && row.entityType=='CAL_PROCESS' && row.apptStatusCode==='ISSUE_TOKEN' && canAllot"><md-button class="custom-event-card-button" ng-click="manageAppointmentForm(row,'manageAppointmentAllot', 'ALLOCATED')">{{"ALLOCATE" | translate}}</md-button></span><span ng-if="isCurrentDate && row.entityType=='CAL_PROCESS' && (row.apptStatusCode==='CONSULTATION_STARTED' || row.apptStatusCode==='CONSULTATION_COMPLETED') && canForword"><md-button class="custom-event-card-button" ng-click="manageAppointmentForm(row,'manageAppointmentForward', 'FORWARDED')">{{"FORWARD" | translate}}</md-button></span></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 appointment-menu-button"><div class="appointment-card-button"><div><md-button ng-if="locationCategory.code!='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="treatmentRecordDetails(row)">{{"MAP_DISEASE" | translate}}</md-button><md-button ng-if="locationCategory.code!='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="viewMedication(row)">{{"VIEW_MEDICATION" | translate}}</md-button><md-button ng-if="locationCategory.code!='SERVICE_PROVIDER_HO'" ng-if="row.patientId" class="custom-event-card-button" ng-click="searchUserTest(row,$event)">{{"DIAGNOSTIC_TESTS" | translate}}</md-button><md-button ng-if="locationCategory.code!='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="showUploadDownload(row)">{{"UPLOAD_DOWNLOAD" | translate}}</md-button><md-button ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="treatmentRecordDetails(row)">{{"PROBLEMS_ASSESSMENT" | translate}}</md-button><md-button ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="viewMedication(row)">{{"MEDICATION" | translate}}</md-button><md-button ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'" ng-if="row.patientId" class="custom-event-card-button" ng-click="searchUserTest(row,$event)">{{"LABS" | translate}}</md-button><md-button ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="showUploadDownload(row)">{{"ATTACHMENTS" | translate}}</md-button><md-button ng-if="showFwdTo && (row.apptStatusCode==='CHECKED_IN' || row.apptStatusCode==='ISSUE_TOKEN' || (row.apptStatusCode==='FORWARDED' && row.allocatedForwardedToId == currentLoggedInUserId)) && locationCategory.code!='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="forwardTo(row)">{{"FORWARD_TO" | translate}}</md-button><md-button ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'" class="custom-event-card-button" ng-click="forwardTo(row)">{{"FORWARD_TO" | translate}}</md-button><div class="btn-group appointment-menu-button-more"><a class="dropdown-toggle dropDownBtnLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bars" aria-hidden="true"></i></a><ul class="dropdown-menu dropdown-menu-links"><li ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'"><a href="" ng-click="addEditAppointmentSummary(row)">{{"ADD_EDIT_SUMMARY" | translate}}</a></li><li ng-if="showFwdTo && (row.apptStatusCode==='CHECKED_IN' || row.apptStatusCode==='ISSUE_TOKEN' || (row.apptStatusCode==='FORWARDED' && row.allocatedForwardedToId == currentLoggedInUserId))" ng-click="forwardTo(row)"><a href="">{{"FORWARD_TO" | translate}}</a></li><li ng-if="row.clinicalCategotyList && row.clinicalCategotyList.length > 0 && locationCategory.code=='SERVICE_PROVIDER_HO'" class="dropdown dropdown-submenu" ng-attr-id="{{ 'child' + $index }}"><a ng-click="test($event,'#child'+$index)" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-caret-right"></i> {{'CLINICAL_DATA'|translate}}</a><ul class="dropdown-menu dropdown-menu-links menu-left"><li ng-repeat="selectedCat in row.clinicalCategotyList"><a href="" ng-click="showSummary(row, selectedCat)"><i class="fa fa-link"></i> {{selectedCat.value | translate}}</a></li></ul></li><li><a href="" ng-click="viewUserSymptoms(row)">{{"HISTORY_OF_COMPLAINT" | translate}}</a></li><li><a href="" ng-click="viewUserIncident(row)">{{"SIGNIFICANT_EVENTS" | translate}}</a></li><li><a href="" ng-click="viewFamilyHistory(row)">{{"FAMILY_HISTORY" | translate}}</a></li><li><a href="" ng-click="viewUserAllergys(row)">{{"ALLERGIES" | translate}}</a></li><li><a href="" ng-click="viewFollowupActions(row)">{{"FOLLOWUP_ACTIONS" | translate}}</a></li><li ng-if="locationCategory.code=='SERVICE_PROVIDER_HO'"><a href="" ng-click="getSummaryPDF(row)">{{"GENERATE_SOAP" | translate}}</a></li><li ng-if="row.whetherPharmacy==true && row.whetherMedicationPresent==true"><a href="" ng-click="createPharmacyOrder(row)">{{"CREATE_PHARMACY_ORDER" | translate}}</a></li><li><a href="" ng-if="row.apptStatusCode=='CONSULTATION_STARTED' && locationCategory.code!='SERVICE_PROVIDER_HO'" ng-click="makePrescription($event,row.organizationLocationId,row.patientId,null,row.id)" check-permission feature-privilege="{{featurePrivilegeConstants.RECORD_DIAGNOSIS_ADD}}"><i class="fa fa-pencil"></i> {{"MAKE_A_PRESCRIIPTION" | translate}}</a></li><li><a href="" ng-if="validateCallMenu(row)" ng-click="startCall(row)"><i class="fa fa-pencil"></i>{{"START_CALL" | translate}}</a></li><li ng-if="row.pharmacyOrderTransactionId && row.whetherPharmacy==true"><a href="" ng-click="generateBillForOrder(row)"><i class="fa fa-pencil"></i>{{"GENERATE_PHARMACY_BILL" | translate}}</a></li><li><a href="" ng-click="viewPatientActivity(row)">{{"PATIENT_ACTIVITY" | translate}}</a></li><li><a href="" ng-click="viewTreatmentHistory(row)">{{"VIEW_TREATMENT_HISTORY" | translate}}</a></li></ul></div></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'familyHistory'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'FAMILY_HISTORY'|translate}}</h1><appointment-chips-component use-for="'familyHistory'" data="familyHistoryList" click-function="showDiseaseVariant(item)" edit-function="editFamilyHistoryById(diseaseVariant,row)" view-function="viewFamilyHistoryById(diseaseVariant,'view')" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="addFamilyHistory(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'userAllergy'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'ALLERGY'|translate}}</h1><appointment-chips-component use-for="'userAllergy'" data="userAllergyList" click-function="showDiseaseVariant(item)" edit-function="viewUserAllergyById(diseaseVariant,'edit',row)" view-function="viewUserAllergyById(diseaseVariant,'view',row)" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="addUserAllergy(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'followupActions'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'FOLLOWUP_ACTIONS'|translate}}</h1><appointment-chips-component use-for="'followupActions'" data="followupActionList" click-function="showDiseaseVariant(item)" view-function="viewFollowupActionById(diseaseVariant,'view')" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="addFollowupAction(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'userIncident'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'SIGNIFICANT_EVENTS'|translate}}</h1><appointment-chips-component use-for="'userIncident'" data="userIncidentList" click-function="showDiseaseVariant(item)" view-function="viewUserIncidentById(diseaseVariant,'view')" edit-function="editUserIncidentById(diseaseVariant,'edit')" delete-function="deleteUserIncidentById(diseaseVariant)" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="addUserIncident(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'userSymptoms'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'HISTORY_OF_COMPLAINT'|translate}}</h1><appointment-chips-component use-for="'userSymptom'" data="userSymptomList" click-function="showDiseaseVariant(item)" view-function="viewUserSymptomById(diseaseVariant,'view')" delete-function="inActivate(diseaseVariant.id)" edit-function="editUserSymptomById(diseaseVariant,'edit')" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="addUserSymptom(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'diagnosticTest'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-12 col-lg-12"><div class="col-sm-12 col-md-9 col-lg-9"><h1>{{'INVESTIGATIONS'|translate}}</h1></div><div class="col-sm-12 col-md-1 col-lg-1"><md-button type="button" class="md-raised md-warn" ng-click="addUserTest(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-2 col-lg-2"><md-button type="button" class="md-raised md-warn" ng-click="createTestOrder(row)">{{'ADD_TEST_ORDER'|translate}}</md-button></div></div><div class="col-sm-12 col-md-12 col-lg-12 listDisplay"><appointment-chips-component use-for="'diagnosticTest'" data="diagnosticTestList" click-function="showDiseaseVariant(item)" view-function="viewUserTest(diseaseVariant,'view')" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" edit-function="editUserTest(diseaseVariant,'edit')" conditional="whetherConditional" add-measurement-function="addMeasurementFunction(diseaseVariant)" view-measurement-function="viewMeasurementFunction(diseaseVariant)" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'EARLIER_INVESTIGATIONS'|translate}}</h1><appointment-chips-component use-for="'diagnosticTestOld'" data="oldDiagnosticTestList" click-function="showDiseaseVariant(item)" view-function="viewUserTest(diseaseVariant,'view')" note-function="goToAddComments(diseaseVariant,'diagnostic test',row)" conditional="whetherConditional" add-measurement-function="addMeasurementFunction(diseaseVariant)" view-measurement-function="viewMeasurementFunction(diseaseVariant)" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'showMedication'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-12 col-lg-12"><div class="col-sm-12 col-md-9 col-lg-9"><h1>{{'MEDICATIONS'|translate}}</h1></div><div class="col-sm-12 col-md-1 col-lg-1"><md-button type="button" class="md-raised md-warn" ng-click="viewUserMedication(row,'add',row.id)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-2 col-lg-2" ng-if="row.whetherMedicationPresent==true"><md-button type="button" class="md-raised md-warn" ng-click="createPrescription(row)">{{"CREATE_PRESCRIPTION" | translate}}</md-button></div></div><div class="col-sm-12 col-md-12 col-lg-12 listDisplay"><appointment-chips-component update-quantity-function="updateMedicationAppointmentDetails(diseaseVariant,'quantity',row)" update-order-with-us-function="updateMedicationAppointmentDetails(diseaseVariant,'orderWithUs',row)" use-for="'medication'" data="medicationList" click-function="showDiseaseVariant(item)" view-function="viewUserMedication(diseaseVariant,'view',row.id)" edit-function="viewUserMedication(diseaseVariant,'edit',row.id)" note-function="goToAddComments(diseaseVariant,'medication',row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div><div class="row listDisplay"><div class="col-sm-12 col-md-10 col-lg-10 listDisplay"><h1>{{'MEDICATION_HISTORY'|translate}}</h1><appointment-chips-component use-for="'oldmedication'" data="oldMedicationList" click-function="showDiseaseVariant(item)" view-function="viewUserMedication(diseaseVariant,'view')" note-function="refillMedication(row,diseaseVariant)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'showUpload'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-12 col-lg-12"><div class="col-sm-12 col-md-9 col-lg-9 listDisplay"><h1>{{'ATTACHMENTS'|translate}}</h1></div><div class="col-sm-12 col-md-3 col-lg-3"><input id="fileInput" type="file" class="upload" style="height: 40px" onchange="angular.element(this).scope().fileChange(this)" multiple=""></div></div><div class="col-sm-12 col-md-12 col-lg-12 listDisplay"><appointment-chips-component data="uploadList" use-for="'upload_download'" click-function="showDiseaseVariant(item)" view-function="viewDocumentPopup(diseaseVariant,'view')" note-function="viewNote(diseaseVariant)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'showDisease'+row.id"><div class="col-xs-12"><div class="row listDisplay"><div class="col-sm-12 col-md-9 col-lg-9 listDisplay"><h1>{{'CURRENT_PROBLEMS'|translate}}</h1><appointment-chips-component use-for="'diseaseVariant'" data="row.currentDiseaseVariants" click-function="showDiseaseVariant(item)" delete-function="deleteIssueById(diseaseVariant)" view-function="viewDiseaseVariant(diseaseVariant)" edit-function="editDiseaseVariant(diseaseVariant)" note-function="goToAddComments(diseaseVariant,'disease variant',row)" historic-function="showHistoricalNotes(diseaseVariant,row)" conditional="whetherConditional" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-3 col-lg-3"><md-button type="button" class="md-raised md-warn" ng-click="addDiseaseVariant(row)"><i class="fa fa-plus"></i></md-button></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div><div class="row listDisplay"><div class="col-sm-12 col-md-12 col-lg-12 listDisplay"><h1>{{'PROBLEM_HISTORY'|translate}}</h1><appointment-chips-component note-function="goToAddComments(diseaseVariant,'disease variant',row,'view')" add-current-function="addToCurrentFuntion(diseaseVariant,row)" historic-function="showHistoricalNotes(diseaseVariant,row)" data="row.pastDiseaseVariants" use-for="'oldDiseaseVariant'" conditional="true" required="true" disable="true" type="organization"></appointment-chips-component></div><div class="col-sm-12 col-md-6 col-lg-6"></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'showCheckin'+row.id"><form name="appointmentForm" class="form-horizontal" autocomplete="off"><div class="listDisplayLine"><div class=""><h3 ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'">{{'PATIENT_DETAILS'|translate}}</h3><h3 ng-if="WSAppointment.entityType.code=='CAL_EQUIPMENT'">{{'DOCTORS_DETAILS'|translate}}</h3></div><div class="row"><ws-image-value-combo ng-if="isRecordWalkIn && WSAppointment.entityType.code=='CAL_EQUIPMENT'" label-name="DOCTOR" query-param="false" required="false" disable="disabledFormFields" name-value-list="WSAppointment.patient" query-search-key="userName" query-url="patient.queryUrl" query-parameter="patient.queryParameter" call-blur-event="false" json-parameter="patient.jsonParameter"></ws-image-value-combo><div class="col-xs-12 col-sm-12 col-lg-4 col-md-4" ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'"><md-input-container><label>{{'PATIENT_CONTACT_NUMBER'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSAppointment.patientPhoneNumber" name="patientPhoneNumber" ng-maxlength="10" ng-pattern="/^[0-9]{10}$/" id="patientPhoneNumber" ng-disabled="disabledFormFields" ng-required="true" ng-blur="checkUsersMobileNo(WSAppointment.patientPhoneNumber)"><div ng-messages="appointmentForm.patientPhoneNumber.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="pattern">{{'INVALID_MOBILE' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-lg-4 col-md-4" ng-if="selectUserList.length>0 && isRecordWalkIn"><md-input-container class="md-block"><label>{{'SELECT_USER'|translate}}</label><md-select ng-model="WSClientExtraData.selectUserId" name="userId" id="userId" ng-change="checkOrgLocClient(WSClientExtraData.selectUserId,orgLocation);getUserDetails(WSClientExtraData.selectUserId)" ng-disabled="viewmode || reqTypeVisible"><md-option ng-repeat="userId in selectUserList" ng-value="userId" ng-selected="$index==0?true:false">{{userId.displayName}}</md-option></md-select></md-input-container></div><ws-image-value-combo ng-if="isRecordWalkIn && WSAppointment.entityType.code!='CAL_EQUIPMENT'" label-name="PATIENT" is-checkin-case="true" query-param="false" required="isRecordWalkIn && WSAppointment.entityType.code!='CAL_EQUIPMENT'" disable="disabledFormFields" name-value-list="WSAppointment.patient" query-search-key="userName" query-url="patient.queryUrl" query-parameter="patient.queryParameter" call-blur-event="false" json-parameter="patient.jsonParameter"></ws-image-value-combo><custom-number-field ng-if="WSAppointment.entityType.code=='CAL_EQUIPMENT'" label-name="DOCTORS_CELL_PHONE" model-name="WSAppointment.patientPhoneNumber" disable="disabledFormFields" required="true" regex="^[0-9]{1,15}$" minlength="10" maxlength="15"></custom-number-field><custom-text-field label-name="UHID" ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'" model-name="WSAppointment.uhidNumber" required="false" disable="true" maxlength="50"></custom-text-field></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><custom-text-area-field ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'" label-name="PATIENT_ADDRESS" model-name="WSAppointment.patientAddress" rows="10" disable="disabledFormFields" required="true" maxlength="5000" disable="true"></custom-text-area-field></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{"CITY_DISTRICT"|translate}}</label><input ng-required="true" ng-disabled="disabledFormFields" ng-model="WSAppointment.addressInfo" name="partyName" ng-maxlength="150" id="partyName" autocomplete="off" uib-typeahead="cityName as cityName.cityDistrict for cityName in getCityNameData($viewValue)" typeahead-min-length="3" typeahead-on-select="partyNameSelected($item, $model, $label)"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-button ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'" type="button" class="md-icon-button otherActionBtn md-button md-ink-ripple full-width-btn" ng-disabled="disabledFormFields" ng-click="manageTreatmentHistory(null,'add')">{{'VIEW_TREATMENT_HISTORY' | translate}}</md-button></div></div><div class="row" ng-if="isRecordWalkIn"><custom-text-field css-class="col-sm-12 col-md-8 col-lg-8" label-name="PROBLEM_DESCRIPTION" model-name="WSAppointment.problemDescription" disable="disabledFormFields" maxlength="100"></custom-text-field><ws-image-value-combo ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'" label-name="SPECIFIC_PROFESSIONAL" query-param="false" required="false" disable="isSpecificProfessionalDisabled || disabledFormFields" name-value-list="WSAppointment.specificDoctor" query-search-key="keyword" query-url="specificDoctor.queryUrl" query-parameter="specificDoctor.queryParameter" json-parameter="specificDoctor.jsonParameter"></ws-image-value-combo></div><div class="row" ng-if='(wetherUserExist==false || wetherUserExist==null) && WSAppointment.entityType.code!="CAL_EQUIPMENT"'><div class="col-sm-12 col-md-12 col-lg-12"><b>{{'AGE'|translate}}</b></div></div><div class="row" ng-if="WSAppointment.entityType.code!='CAL_EQUIPMENT'"><div ng-if="wetherUserExist==false || wetherUserExist==null" class="col-xs-12 col-sm-12 col-lg-2 col-md-2"><md-input-container><label>{{'YEARS'|translate}}</label><input ng-model="WSClientExtraData.age" name="age" ng-maxlength="3" ng-pattern="/^(0?[0-9]|[1-9][0-9]|[1-9][0-9][0-9])$/" id="age" ng-disabled="userSelectedDisabled || clientDisabled || editDisabled || disableUser" ng-blur="calculateDateOfBirth()"><div ng-messages="appointmentForm.age.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="pattern">{{'ENTER_VALID_AGE' |translate}}</div></div></md-input-container></div><div ng-if="wetherUserExist==false || wetherUserExist==null" class="col-xs-12 col-sm-12 col-lg-2 col-md-2 padding-l-0"><md-input-container><label>{{'MONTHS'|translate}}</label><input type="number" ng-model="WSClientExtraData.month" name="month" ng-disabled="userSelectedDisabled || clientDisabled || editDisabled || disableUser" ng-maxlength="2" min="0" max="11" id="month" ng-blur="calculateDateOfBirth()"><div ng-messages="appointmentForm.month.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="min">{{'ENTER_VALID_MONTH' |translate}}</div><div ng-message="max">{{'ENTER_VALID_MONTH' |translate}}</div></div></md-input-container></div><div ng-if="wetherUserExist==false || wetherUserExist==null" class="col-xs-12 col-sm-12 col-lg-8 col-md-8"><dob-component dob-required="!WSClientExtraData.age || WSClientExtraData.age<18 || WSClientExtraData.age==0" dob="guardianData.birthDate" has-guardian="guardianData.guardianCheck" name-value-list="guardianData.guardian" check-disabled="clientDisabled || disableUser" css-class="col-md-4 col-sm-12 col-xs-12 col-lg-4 padding-0" dob-change-fn="setDirectiveFn(returnFunction)"></dob-component></div></div><div class="listDisplayLine"><div><h3>{{'ABOUT_APPOINTMENT'|translate}}</h3></div><div class="row"><current-start-end-time start-time-label="CHECK_IN_TIME" end-time-label="CHECK_OUT_TIME" start-date="startDate" end-date="endDate" start-time="WSAppointment.checkInTime" end-time="WSAppointment.checkOutTime" required-start-time="isStartTimeRequired" required-end-time="isEndTimeRequired" disable-start-time="true" disable-end-time="isEndTimeDisabled || disabledFormFields"></current-start-end-time><div ng-if="!showServiceSearch && WSAppointment.serviceType" class="col-sm-12 col-md-4 col-lg-4 list margin-b-10" style="margin-top:20px">{{'SERVICE_TYPE'|translate}}: <b>{{WSAppointment.serviceType.value}}</b></div><ws-client-search-combo ng-if="(isRecordWalkIn && WSAppointment.entityType.code!='CAL_EQUIPMENT') || showServiceSearch" label-name="SERVICE_TYPE" query-param="false" required="isServiceRequired" disable="disabledFormFields" name-value-list="WSAppointment.serviceType" query-url="serviceType.queryUrl" query-parameter="serviceType.queryParameter" json-parameter="serviceType.jsonParameter"></ws-client-search-combo><div ng-if="!isServiceRequired && !WSAppointment.serviceType" class="col-xs-12 col-sm-12 col-lg-4 col-md-4 padding-l-0"><md-input-container><label class="note-class">{{'PLEASE_SELECT_SERVICE_TYPE_FOR_BILL'|translate}}</label></md-input-container></div></div></div><md-button class="md-raised md-warn" ng-disabled="!appointmentForm.$valid" ng-click="saveCheckInOutAllotment(appointmentForm,row.id,row.organizationLocationId,'CHECKEDIN')" type="button">{{'SAVE'|translate}}</md-button></div></form></div><div ng-if="row.apptStatusCode!='CHECKED_IN'" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 padding-t-10" ng-class="'showCheckout'+row.id"><form name="appointmentForm" class="form-horizontal" autocomplete="off"><div class="listDisplayLine"><div><h3>{{'ABOUT_APPOINTMENT'|translate}}</h3></div><div class="row"><current-start-end-time start-time-label="CHECK_IN_TIME" end-time-label="CHECK_OUT_TIME" start-date="startDate" end-date="endDate" start-time="WSAppointment.checkInTime" end-time="WSAppointment.checkOutTime" required-start-time="isStartTimeRequired" required-end-time="isEndTimeRequired" disable-start-time="true" disable-end-time="isEndTimeDisabled || disabledFormFields"></current-start-end-time><div ng-if="!showServiceSearch && WSAppointment.serviceType" class="col-sm-12 col-md-4 col-lg-4 list margin-b-10" style="margin-top:20px">{{'SERVICE_TYPE'|translate}}: <b>{{WSAppointment.serviceType.value}}</b></div><ws-client-search-combo ng-if="(isRecordWalkIn && WSAppointment.entityType.code!='CAL_EQUIPMENT') || showServiceSearch" label-name="SERVICE_TYPE" query-param="false" required="isServiceRequired" disable="disabledFormFields" name-value-list="WSAppointment.serviceType" query-url="serviceType.queryUrl" query-parameter="serviceType.queryParameter" json-parameter="serviceType.jsonParameter"></ws-client-search-combo><div ng-if="!isServiceRequired && !WSAppointment.serviceType" class="col-xs-12 col-sm-12 col-lg-4 col-md-4 padding-l-0"><md-input-container><label class="note-class">{{'PLEASE_SELECT_SERVICE_TYPE_FOR_BILL'|translate}}</label></md-input-container></div></div></div><md-button class="md-raised md-warn" ng-disabled="!appointmentForm.$valid" ng-click="saveCheckInOutAllotment(appointmentForm,row.id,row.organizationLocationId,'CHECKEDOUT')" type="button">{{'SAVE'|translate}}</md-button></form></div></md-card></div></div></div><view-file-pop-up visible="viewFileContent" file-resource="fileResource"><view-file-pop-up-header title="{{'VIEW_FILE_CONTENTS' | translate}}"></view-file-pop-up-header><view-file-pop-up-body></view-file-pop-up-body><view-file-pop-up-footer is-hiding-print-button="isHidingPrintButton"></view-file-pop-up-footer></view-file-pop-up>
<div class="pageTitle"><span>{{'REQ_MANAGE'|translate}}</span><help-directive help-id="REQ_MANAGE" class="divContainer"></help-directive></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div ng-show="iconStep1" class="stepwizard-step"><a id="wizard1" ng-click="goToFirstStep()" type="button" class="btn btn-primary btn-circle"><i class="fa fa-tint" aria-hidden="true"></i></a></div><div ng-show="iconStep2" class="stepwizard-step"><a id="wizard2" ng-click="goToNextStep();getAddress()" type="button" class="btn btn-default btn-circle"><i class="fa fa-map-marker" aria-hidden="true"></i></a></div><div ng-show="iconStep3" class="stepwizard-step"><a id="wizard3" ng-click="goToLastStep()" type="button" class="btn btn-default btn-circle"><i class="fa fa-heart" aria-hidden="true"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard" ng-class="{'posRelative':addOrgLocSpinner}"><spinner name="addOrgLocSpinner" img-src="{{pageLoaderImg}}" show="addOrgLocSpinner"></spinner><form name="addBloodReq" id="bloodRequest" class="form-horizontal" autocomplete="off" novalidate="novalidate"><div ng-show="step1" class="setup-content" id="step-1"><div class="col-xs-12"><h3 ng-if="pageState =='view' || pageState =='edit'">{{'REQ_MANAGE'|translate}} <span class="titleNum">({{'1_of_3' | translate}})</span></h3><h3 ng-if="pageState =='add'">{{'REQ_MANAGE'|translate}} <span class="titleNum">({{'1_of_2' | translate}})</span></h3><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_REQ_BY'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-model="bloodRequest.requestBy" name="requestby" ng-disabled="viewMode" ng-required="!viewMode"><div ng-messages="addBloodReq.requestby.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_REQ_ID'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-model="bloodRequest.requestId" name="requestId" ng-disabled="true"><div ng-messages="addBloodReq.requestId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'REQ_DATE'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-disabled="addMode || viewMode" ng-model="bloodRequest.dateRequestCreated" restrict="reject" ng-required="!viewMode" name="dateRequestCreated"><md-icon class="datepickerIcon"></md-icon><div ng-messages="addBloodReq.dateRequestCreated.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-show="!isUser"><a ng-click="callLoginPage()" class="pointer ng-binding"><i class="fa fa-sign-in">Login For Fast Filling</i></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_PHONE'|translate}}</label><input type="text" ng-model="bloodRequest.phone" ng-minlength="10" ng-maxlength="10" name="phone" ng-disabled="viewMode" regex="^[0-9]{1}[0-9]{9}$"><div ng-messages="addBloodReq.phone.$error && !viewMode"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="minlength">{{'MIN_LENGTH' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><spinner name="onBehalfOfAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><label>{{'REQ_ON_BEHALF_OF'|translate}}</label><input ng-model="bloodRequest.onBehalfOf" ng-disabled="viewMode" ng-readonly="userReadOnly" name="onBehalfOf" id="onBehalfOf" autocomplete="off" uib-typeahead="onBehalfOf as onBehalfOf.value for onBehalfOf in getOnBehalfOf($viewValue)" typeahead-on-select="getAddressByOrgId(bloodRequest.onBehalfOf.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgMinLength')"></md-input-container></div></div><div class="row"><div ng-show="givenAtField" class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><spinner name="onBehalfOfAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><label>{{'REQ_TO_BE_GIVEN_AT'|translate}}</label><input ng-model="bloodRequest.toBeGivenAt" name="tobegivenat" ng-disabled="viewMode || editMode" id="tobegivenat" autocomplete="off" uib-typeahead="onBehalfOf as onBehalfOf.value for onBehalfOf in getOnBehalfOf($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('defaultMinLength')"><div ng-messages="addBloodReq.tobegivenat.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_EMAIL'|translate}} <span style="color:red">*</span></label><input type="email" ng-model="bloodRequest.email" name="email" id="email" ng-disabled="viewMode || editMode" regex="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" ng-required="!viewMode"><div ng-messages="addBloodReq.email.$error && !viewMode"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container class="md-block"><label class="md-required">{{'REQ_BLOOD_GROUP'|translate}}</label><md-select ng-model="bloodRequest.bloodGroup" name="bloodGroup" id="bloodGroup" ng-disabled="viewMode" ng-required="!viewMode" required><md-option ng-repeat="bloodGroup in bloodgroups" ng-value="bloodGroup">{{bloodGroup}}</md-option></md-select><div ng-messages="addBloodReq.bloodGroup.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_QTY'|translate}}<span style="color:red">*</span></label><input type="text" ng-model="bloodRequest.qty" name="qty" id="qty" ng-disabled="viewMode" ng-required="!viewMode" required><div ng-messages="addBloodReq.qty.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block md-icon-right"><label class="md-required">{{'REQ_WHEN_NEED'|translate}}</label><input datepicker class="pointer" ng-disabled="viewMode" name="whenNeeded" id="whenNeeded" ng-model="bloodRequest.whenNeeded" restrict="reject" ng-required="!viewMode" name="whenneed" from-min-date="minDate" required><md-icon class="datepickerIcon"></md-icon><div ng-messages="addBloodReq.whenNeeded.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container class="md-block"><label>{{'REQ_REQ_TYPE'|translate}} <span style="color:red">*</span></label><input type="text" ng-model="bloodRequest.requesterType" name="requestertype" ng-disabled="true || field || editMode" ng-required="!viewMode"><div ng-messages="addBloodReq.requestertype.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container class="md-block"><label>{{'REQ_ON_BEHALF_TYPE'|translate}} <span style="color:red">*</span></label><md-select ng-model="bloodRequest.onBehalfOfType" name="onbehalfoftype" ng-disabled="viewMode || field || editMode" ng-required="!viewMode"><md-option ng-repeat="onBehalfOfType in behalfoftypes" ng-value="onBehalfOfType">{{onBehalfOfType}}</md-option></md-select><div ng-messages="addBloodReq.onbehalfoftype.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_REQ_DETAILS'|translate}}</label><textarea ng-model="bloodRequest.requestDescription" md-maxlength="150" rows="5" md-select-on-focus ng-disabled="viewMode"></textarea></md-input-container></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"></div><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'REQ_CANCEL'|translate}}</md-button></div><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"><button class="btn btn-default nextBtn btn-md pull-right" ng-click="goToNextStep();getAddress()" type="button"><span class="nextTextBtn">{{'REQ_NEXT_STEP'|translate}}</span> <i class="fa fa-angle-right"></i></button></div></div></div></div><div ng-show="step2" class="setup-content" id="step-2"><div class="col-xs-12"><h3 ng-if="pageState =='view' || pageState =='edit'">{{'COMMUNICATION_INFO'|translate}} <span class="titleNum">({{'2_of_3' | translate}})</span></h3><h3 ng-if="pageState =='add'">{{'COMMUNICATION_INFO'|translate}} <span class="titleNum">({{'2_of_2' | translate}})</span></h3><div class="row"><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'REQ_ADDRESS'|translate}}</label><input name="address" id="address" ng-model="bloodRequest.bloodRequestAddress.address" ng-disabled="viewMode" ng-required="!viewMode"></md-input-container></div></div><city-state-address address-filter="addressFilter.addressData" disable="viewMode" ng-readonly="userReadOnly"></city-state-address><div class="row"><div class="col-sm-12 col-md-12 col-lg-12 wizardFooter"><button ng-click="goToFirstStep()" class="btn btn-default prevBtn btn-md pull-left"><i class="fa fa-angle-left" style=""></i> <span class="previousTextBtn">{{'REQ_PREV'|translate}}</span></button><md-button ng-show="type !== 'add'" ng-click="goToLastStep()" class="btn btn-default nextBtn btn-md pull-right"><span class="nextTextBtn">{{'REQ_NEXT_STEP'|translate}}</span> <i class="fa fa-angle-right" style="margin-top:3px"></i></md-button><md-button class="md-raised md-warn pull-right" ng-disabled="!addBloodReq.$valid" ng-show="type == 'add'" ng-click="saveBloodRequest(bloodRequest)">{{'REQ_SAVE'|translate}}</md-button></div></div></div></div><div ng-show="step3" class="setup-content" id="step-3"><div class="col-xs-12"><h3>{{'FULFILLMENT_DETAILS'|translate}} <span class="titleNum">({{'3_of_3' | translate}})</span></h3><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'REQ_FUL_DETAILS'|translate}}</label><input ng-model="bloodRequest.requesFulfilment" ng-disabled="viewMode"></md-input-container></div><div class="form-group col-xs-12 col-sm-12 col-md-6 col-lg-6"><div class="padding-t-10"><md-radio-group ng-model="bloodRequest.successful"><md-radio-button style="margin-left:17px" name="successful" id="successful" ng-value="true" ng-disabled="viewMode" class="md-primary">{{'REQ_SUCCESS' | translate}}</md-radio-button></md-radio-group></div></div></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12 wizardFooter"><button ng-click="goToPreStep()" class="btn btn-default prevBtn btn-md pull-left"><i class="fa fa-angle-left" style="margin-top:2px;float:left"></i> <span class="previousTextBtn">{{'REQ_PREV'|translate}}</span></button><md-button class="md-raised md-warn pull-right" ng-click="saveBloodRequest()" ng-show="!viewMode">{{'REQ_UPDATE'|translate}}</md-button><md-button class="md-raised pull-right" ng-click="cancel()" ng-show="viewMode">{{'CANCEL'|translate}}</md-button></div></div></div></div></form></div>
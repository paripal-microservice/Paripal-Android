<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 ng-scope"><form name="addPaymentReceiptForm" class="form-horizontal panel-body-top" id="form1" runat="server" autocomplete="off" novalidate="novalidate"><help-directive help-id="MANAGE_PAYMENT_RECEIPT" class="divContainer"></help-directive><div class="pageTitle"><span ng-if="pageState==='CREATE'" class="ng-binding ng-scope">{{'ADD_PAYMENT_RECEIPT'|translate}}</span> <span ng-if="pageState==='EDIT'" class="ng-binding ng-scope">{{'EDIT_PAYMENT_RECEIPT'|translate}}</span> <span ng-if="pageState==='VIEW'" class="ng-binding ng-scope">{{'VIEW_PAYMENT_RECEIPT'|translate}}</span></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'DATE'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="receiptDetails.receiptDate" name="receiptDate" till-max-date="maxDate" from-min-date="minDate" restrict="reject" ng-required="true" required ng-disabled="pageState==='EDIT' || pageState==='VIEW'"><md-icon class="datepickerIcon"></md-icon><div ng-messages="addPaymentReceiptForm.receiptDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="tillMaxDate">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label class="md-required">{{"SELECT_ORG_LOCATION"|translate}}</label><md-select ng-required="true" ng-model="ownerLocationId" ng-disabled="pageState==='EDIT' || pageState==='VIEW'" ng-change="organizationLocationSelected(ownerLocationId)"><md-option ng-repeat="organizationLocation in addReceiptObject.organizationLocationList" ng-value="organizationLocation" ng-selected="ownerLocationId.id == organizationLocation.id?true:false || organizationLocation.id == defOrgLoc.id?true:false">{{organizationLocation.value}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label class="md-required">{{"SELECT_RECEIPT_TYPE"|translate}}</label><md-select ng-change="receiptTypeSelected(receiptDetails.typeCode, ownerLocationId)" ng-required="true" ng-model="receiptDetails.typeCode" ng-disabled="pageState==='EDIT' || pageState==='VIEW'"><md-option ng-repeat="receiptType in addReceiptObject.receiptTypeList" ng-value="receiptType">{{receiptType | translate}}</md-option></md-select></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class=""><label>{{'RECEIPT_PAYMENT_ID'|translate}}</label><input ng-disabled="true" ng-model="receiptDetails.productOrgReferenceNo" name="receiptId" ng-maxlength="50" id="receiptId"><div ng-messages="addPaymentReceiptForm.receiptId.$error" class="md-input-messages-animation ng-active ng-hide" aria-live="assertive" aria-hidden="true"><div ng-message="required" class="md-input-message-animation ng-binding ng-scope">{{"REQUIRED" | translate}}</div></div><div class="md-errors-spacer"></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class=""><label>{{'DOCUMENT_REFERENCE_ID'|translate}}</label><input ng-disabled="true" ng-model="receiptDetails.serviceProviderReferenceNo" name="documentReferenceId" ng-maxlength="50" id="documentReferenceId"><div ng-messages="addPaymentReceiptForm.documentReferenceId.$error" class="md-input-messages-animation ng-active ng-hide" aria-live="assertive" aria-hidden="true"><div ng-message="required" class="md-input-message-animation ng-binding ng-scope">{{"REQUIRED" | translate}}</div></div><div class="md-errors-spacer"></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><div class="col-sm-12 col-md-6 col-lg-6 padding-0"><md-input-container><label class="md-required">{{"SELECT_CURRENCY"|translate}}</label><md-select ng-change="currencySelected()" ng-required="true" ng-disabled="pageState==='EDIT' || pageState==='VIEW'" ng-model="receiptDetails.currency.id"><md-option ng-repeat="currencyType in addReceiptObject.currencyTypeList" ng-value="{{currencyType.id}}">{{currencyType.value}}</md-option></md-select></md-input-container></div><number-field label-name="AMOUNT" md-size="6" lg-size="6" model-name="receiptDetails.amount" disable="true" required="true" regex="^[0-9]{1,9}$" maxlength="10"></number-field></div></div><div class="row" ng-if="!hideReceipt"><div class="col-sm-12 col-md-8 col-lg-8"><div class="col-sm-12 col-md-3 col-lg-3 padding-0"><md-input-container><label class="md-required">{{"PARTY_TYPE"|translate}}</label><md-select ng-change="inFavorOfSelected()" ng-required="true" ng-model="receiptDetails.madeTo" ng-disabled="isInFavorOfTypeDisabled===true || pageState==='EDIT' || pageState==='VIEW'"><md-option ng-repeat="inFavorOfType in addReceiptObject.inFavorOfTypeList" ng-selected="inFavorOfType == receiptDetails.madeTo?true:false" ng-value="inFavorOfType">{{inFavorOfType | translate}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-9 col-lg-9 padding-0"><md-input-container ng-if="isMadeToSSVisible"><label class="md-required">{{"MADE_TO"|translate}}</label><input ng-model="inFavorOfSSId.id" name="inFavorOfName" ng-disabled="isMadeToSSDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-maxlength="50" id="inFavorOfName" autocomplete="off" uib-typeahead="inFavorOfName as inFavorOfName.value for inFavorOfName in getinFavorOfNameData($viewValue)" typeahead-editable="false" typeahead-min-length="receiptDetails.partyType == 'INDIVIDUAL'?getSmartSearchMinLength('userMinLength'):getSmartSearchMinLength('orgLocMinLength')" typeahead-on-select="inFavorOfNameSelected($item, $model, $label)" ng-required="isMadeToSSVisible"><div ng-messages="addPaymentReceiptForm.inFavorOfName.$error"><div ng-message="required">{{'REQUIRED'|translate}}</div></div></md-input-container><md-input-container ng-if="isMadeToDDVisible"><label class="md-required">{{"MADE_TO"|translate}}</label><md-select ng-disabled="isMadeToDDDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-change="inFavorOfPersonSelected(inFavorOfDD)" ng-model="inFavorOfDD" name="inFavorOfName" ng-required="isMadeToDDVisible"><md-option ng-repeat="inFavorOfOrg in addReceiptObject.inFavorOfOrgList" ng-value="inFavorOfOrg" ng-selected="inFavorOfOrg.id == inFavorOfLocationId.id?true:false">{{inFavorOfOrg.value}}</md-option></md-select><div ng-messages="addPaymentReceiptForm.inFavorOfName.$error"><div ng-message="required">{{'REQUIRED'|translate}}</div></div></md-input-container></div></div></div><div class="row" ng-if="!hidePayment"><div class="col-sm-12 col-md-8 col-lg-8"><div class="col-sm-12 col-md-3 col-lg-3 padding-0"><md-input-container><label class="md-required">{{"PARTY_TYPE"|translate}}</label><md-select ng-change="partyTypeSelected()" ng-required="true" ng-disabled="isPartyTypeDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-model="receiptDetails.madeBy"><md-option ng-repeat="partyType in addReceiptObject.partyTypeList" ng-selected="partyType == receiptDetails.madeBy?true:false" ng-value="partyType">{{partyType | translate}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-9 col-lg-9 padding-0"><md-input-container ng-if="isMadeFromSSVisible"><label>{{"MADE_FROM"|translate}}</label><input ng-model="partyNameId.id" ng-required="isMadeFromSSVisible" name="partyName" ng-disabled="isMadeFromSSDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-maxlength="100" id="partyName" autocomplete="off" uib-typeahead="partyName as partyName.value for partyName in getPartyNameData($viewValue)" typeahead-editable="false" typeahead-min-length="receiptDetails.partyType == 'INDIVIDUAL'?getSmartSearchMinLength('userMinLength'):getSmartSearchMinLength('orgLocMinLength')" typeahead-on-select="partyNameSelected($item, $model, $label)"></md-input-container><md-input-container ng-if="isMadeFromDDVisible"><md-select ng-disabled="isMadeFromDDDisabled ===true || pageState==='EDIT' || pageState==='VIEW'" ng-change="partyNameDDSelected(partyObj)" ng-model="partyObj" ng-required="isMadeFromDDVisible"><md-option ng-repeat="partyName in addReceiptObject.partyOrgList" ng-selected="partyName.id == receiptLocationId.id?true:false" ng-value="partyName">{{partyName.value}}</md-option></md-select></md-input-container><md-input-container ng-if="isThirdPartyVisible"><label>{{"MADE_FROM"|translate}}<span class="mandatoryStar">*</span></label><input ng-required="isThirdPartyVisible" ng-disabled="isThirdPartyDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-model="addReceiptObject.madeToName" name="receiptId" ng-maxlength="100" id="receiptId" ng-required="isThirdPartyVisible"><div ng-messages="listForm.receiptId.$error" class="md-input-messages-animation ng-active ng-hide" aria-live="assertive" aria-hidden="true"><div ng-message="required" class="md-input-message-animation ng-binding ng-scope">Please enter data</div></div><div class="md-errors-spacer"></div></md-input-container></div></div></div><div class="row" ng-if="!hidePayment"><div class="col-sm-12 col-md-8 col-lg-8"><div class="col-sm-12 col-md-3 col-lg-3 padding-0"><md-input-container><label class="md-required">{{"PARTY_TYPE"|translate}}</label><md-select ng-change="onBehalfOfSelected()" ng-disabled="isPartyTypeDisabled===true || pageState==='EDIT' || pageState==='VIEW'" ng-model="receiptDetails.onBehalfOf"><md-option ng-repeat="partyType in addReceiptObject.onBehalfOfPartyType" ng-selected="partyType == receiptDetails.onBehalfOf?true:false" ng-value="partyType">{{partyType | translate}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-9 col-lg-9 padding-0"><md-input-container ng-hide="isMadeFromDDVisible"><label>{{"ON_BEHALF_OF"|translate}}</label><input ng-model="onBehalfObj.id" name="onBehalfObj" ng-disabled="pageState==='EDIT' || pageState==='VIEW'" ng-maxlength="50" id="onBehalfObj" autocomplete="off" uib-typeahead="onBehalf as onBehalf.value for onBehalf in getOnBehalfObjNameData($viewValue)" typeahead-min-length="receiptDetails.partyType == 'INDIVIDUAL'?getSmartSearchMinLength('userMinLength'):getSmartSearchMinLength('orgLocMinLength')" typeahead-on-select="onBehalfNameSelected($item, $model, $label)"></md-input-container><md-input-container ng-if="isMadeFromDDVisible"><md-select ng-disabled="isMadeFromDDDisabled ===true || pageState==='EDIT' || pageState==='VIEW'" ng-change="onBehalfNameSelected(onBehalfObj.id)" ng-model="onBehalfObj.id"><md-option ng-repeat="partyName in addReceiptObject.partyOrgList" ng-selected="partyName.id == onBehalfObj.id.id?true:false" ng-value="partyName">{{partyName.value}}</md-option></md-select></md-input-container></div></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4" ng-if="pageState==='EDIT' || pageState==='VIEW'"><md-input-container><label>{{'GSTIN'|translate}}</label><input ng-model="receiptDetails.ownerLocationId.gstin" name="gstin" ng-maxlength="50" id="gstin" ng-disabled="true"></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><md-input-container class="md-block" layout="row"><custom-text-area-field label-name="NARRATION" model-name="receiptDetails.narration" rows="5" maxlength="150" disable="pageState==='VIEW'"></custom-text-area-field><div ng-messages="addPaymentReceiptForm.narration.$error"><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row" ng-if="pageState==='EDIT' || pageState==='VIEW'"><custom-text-field label-name="RECEIPT_STATUS" model-name="status" required="true" disable="true" maxlength="50"></custom-text-field><div class="col-sm-12 col-md-4 col-lg-4"><div class="pull-left padding-r-15 padding-0"><md-checkbox ng-disabled="true" ng-model="receiptDetails.whetherAccounted" aria-label="WhetherAccounted" class="padding-t-b-10 margin-l-5 pull-left padding-t-15"></md-checkbox><label class="pull-left padding-t-15" style="margin-top:6px" ng-disabled="true">{{'WHETHER_ACCOUNTED'|translate}}</label></div></div></div><div class="padding-b-10 padding-t-20 ng-scope pull-left fullWidth"><div class="padding-0"><md-button ng-disabled="pageState==='VIEW'" type="button" class="md-raised md-warn" ng-click="addPaymentReceipt()"><i class="fa fa-plus"></i> {{'ADD_NEW' | translate}}</md-button></div></div><div class="table-responsive foo"><div ng-class="{'posRelative':roleListSpinner}"><spinner name="roleListSpinner" img-src="{{pageLoaderImg}}" show="roleListSpinner"></spinner><div><table datatable="ng" dt-options="options" dt-column-defs="dtColumnDefs" class="table table-striped table-hover rwd-table" width="100%"><thead><tr><th data-priority="1">{{'PAYMENT_MODE' | translate}}</th><th>{{'PAYMENT_REF' | translate}}</th><th>{{'REFERENCE_DATE' | translate}}</th><th>{{'AMOUNT' | translate}}</th><th>{{'DELETE' | translate}}</th></tr></thead><tbody><tr ng-repeat="receiptReference in receiptReferenceList track by $index"><td><div class="btn-group"><a class="dropdown-toggle dropDownBtnLink" ng-class="isDisabled" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ receiptReference.paymentMode.value}}</a><ul ng-if="pageState!=='VIEW'" class="dropdown-menu"><li><a href="" class="" ng-class="" ng-click="editReference(receiptReference,$index)"><i class="fa fa-pencil"></i>{{"EDIT_REFERENCE" | translate}}</a></li><li><a href="" ng-click="viewReference(receiptReference,$index)"><i class="fa fa-eye"></i>{{"VIEW_REFERENCE" | translate}}</a></li></ul></div></td><td>{{receiptReference.paymentReferenceNo}}</td><td>{{receiptReference.paymentRefDate | timestampToDate }}</td><td>{{receiptReference.amount}}</td><td><a ng-click="removeReference(receiptReferenceList,$index)" href=""><i ng-class="isDisabled" class="fa fa-trash"></i></a></td></tr></tbody></table></div><div ng-if="totalItems > 0"><div class="pageRecord"><span>{{'SHOWING' | translate}} {{pagingInfo.startRecord + '-' + pagingInfo.endRecord + ' '+("OF"|translate) + ' '+ totalItems + ' '+("ITEMS"|translate)}}</span></div><div class="text-center"><uib-pagination max-size="4" total-items="totalItems" ng-model="currentPage" items-per-page="itemPerPage" ng-change="pageChanged()" boundary-links="true" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 textAlign-R wizardFooter"><md-button ng-click="back()" ng-disabled="" class="md-raised">{{"BACK"|translate}}</md-button><md-button type="button" class="md-raised md-warn" ng-click="savePaymentReceipt()" ng-disabled="!addPaymentReceiptForm.$valid || pageState==='VIEW' || isReferenceBlank">{{actionName|translate}}</md-button></div></div></form></div>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><md-dialog class="calendar-event-popup" style="max-width:250%;min-height: 80%" aria-label="Mango(Fruit)" ng-cloak><md-toolbar><div class="md-toolbar-tools"><h2>{{'MANAGE_MEDICATION' | translate}}</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel1()"><i class="fa fa-times" aria-hidden="true"></i></md-button></div></md-toolbar><div class="dialog-content"><div class="pull-left fullWidth" style="border:1px solid #EEE"><form name="userMedicationSummaryForm"><div class="clearfix"></div><div class="row"><div class="col-xs-6" ng-hide="whethersub"><md-input-container><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><label>{{'USER'|translate}} <span style="color:red">*</span></label><input ng-model="userMedication.user" ng-readonly="userReadOnly" name="user" id="user" autocomplete="off" uib-typeahead="user as user.value for user in getUserNamesForRoleHistory($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" required ng-disabled="viewmode ||whethersub|| editmode || hideDetailForm"><div ng-messages="medicationform.user.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="minlength">{{'MIN_LENGTH'|translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="medicationLoad" is-auto-complete="true"></spinner><label>{{'MEDICATION'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-blur="validate(medication,addUserMedication.medication)" name="medication" id="medication" ng-model="userMedication.medication" autocomplete="off" uib-typeahead="medication as medication.value for medication in getMedications($viewValue)" typeahead-on-select="getVariant(userMedication.medication.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength(medicationMinLength)" required ng-disabled="viewmode"><div ng-messages="medicationform.user.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'DRUG_VARIANT'|translate}}</label><input name="medicationVariant" ng-maxlength="commonConstants.inputTypeMaxLength150" id="medicationVariant" ng-model="userMedication.medicationVariant" autocomplete="off" uib-typeahead="variants as variants.value for variants in getVariant($viewValue)" typeahead-loading="loading" typeahead-min-length="minVariantLength" ng-required="true" ng-disabled="false"><div ng-messages="medicationform.medicationVariant.$error "><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'MED_DOSAGE'|translate}}<span class="mandatoryStar">*</span></label><input type="text" required name="dosage" id="dosage" ng-model="userMedication.dosage" ng-disabled="viewmode"><div ng-messages="medicationform.dosage.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="minlength">{{'MIN_LENGTH'|translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><label>{{'TIMING_PATTERN'|translate}}<span class="mandatoryStar">*</span></label><md-chips ng-model="timePattern" readonly="readonlyDates" md-removable="false" placeholder="Add dates..."></md-chips><md-time-picker ng-model="time.twentyfour" ng-required="true" no-meridiem no-auto-switch></md-time-picker></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'START_ON'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-disabled="viewmode" id="startDate" ng-change="getDate(userMedication.startDate)" ng-model="userMedication.startDate" from-min-date="userMedication.prescribedDate" name="startDate" required><md-icon class="datepickerIcon"></md-icon><div ng-messages="medicationform.startDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'PLANNED_STOPPED_DATE'|translate}}</label><input datepicker class="pointer" ng-disabled="viewmode" id="plannedStoppedDate" ng-model="userMedication.plannedStoppedDate" name="plannedStoppedDate"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'MED_LNK_TO_FOOD'|translate}}</label><md-select name="linkageWithFood" id="linkageWithFood" ng-model="userMedication.linkageWithFood" ng-disabled="viewmode" required><md-option ng-repeat="foodLink in linkageWithFood" ng-value="foodLink" ng-selected="{{foodLink.id == userMedication.linkageWithFood.id}}">{{foodLink.value}}</md-option></md-select><div ng-messages="medicationform.linkageWithFood.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><label>{{'FREQUENCY'|translate}}</label><md-input-container><md-radio-group ng-model="userMedication.frequencyPattern"><div class="col-xs-3"><md-radio-button ng-value="'daily'">{{'DAILY'|translate}}</md-radio-button></div><div class="col-xs-4"><md-radio-button ng-value="'weekly'">{{'WEEKLY'|translate}}</md-radio-button></div><div class="col-xs-3"><md-radio-button ng-value="'dates'">{{'DATES'|translate}}</md-radio-button></div></md-radio-group></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-if="userMedication.frequencyPattern=='weekly'" style="padding-left:60px"><div class="md-dialog-content md-dialog-content-custom"><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'MONDAY_VAL'|translate}}</label><md-checkbox ng-model="userMedication.onMonday" aria-label="Monday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'TUESDAY'|translate}}</label><md-checkbox ng-model="userMedication.onTuesday" aria-label="Tuesday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'WEDNESDAY'|translate}}</label><md-checkbox ng-model="userMedication.onWednesday" aria-label="Wednesday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'THURSDAY'|translate}}</label><md-checkbox ng-model="userMedication.onThursday" aria-label="Thursday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'FRIDAY'|translate}}</label><md-checkbox ng-model="userMedication.onFriday" aria-label="Friday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'SATURDAY'|translate}}</label><md-checkbox ng-model="userMedication.onSaturday" aria-label="Saturday"></md-checkbox></div><div class="pull-left padding-r-15 day-checkbox-width"><label class="displayBlock">{{'SUNDAY'|translate}}</label><md-checkbox ng-model="userMedication.onSunday" aria-label="Sunday"></md-checkbox></div></div></div><div class="col-sm-12 col-md-11 col-lg-11" style="margin-left: 4%"><div class="input-group calenderDiv" style="width:200px" ng-show="isDatepickerOpen"><input type="text" class="form-control" uib-datepicker-popup="MM-dd-yyyy" ng-model="date" ng-change="appendDates(date)" is-open="isDatepickerOpen" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="isDatepickerOpen = !isDatepickerOpen"><i class="glyphicon glyphicon-calendar"></i></button></span></div><div ng-if="userMedication.frequencyPattern=='dates'"><md-chips ng-model="userMedication.followUpDates" readonly="readonlyDates" md-removable="false" placeholder="Add dates..."><md-icon class="datepickerIcon"></md-icon></md-chips></div><md-button type="button" ng-hide="userMedication.frequencyPattern!='dates'" style="margin-bottom:10px !important;min-width: 30px !important" class="md-raised md-warn" ng-click="isDatepickerOpen = !isDatepickerOpen"><i class="fa fa-calendar"></i></md-button></div></div><div class="row"><div ng-if="!hideDetailForm" class="col-xs-4"><a ng-click="callManageMedication(userMedication)" class="pointer ng-binding"><i class="fa fa-pencil-square-o"></i>{{'GO_TO_DETAILED_FORM' |translate}}</a></div><div class="col-xs-4"><a class="pointer" ng-click="showDiseaseDetails()"><i class="fa fa-bug"></i>{{'MED_DISEASE_DETAILS' | translate}}</a></div><div class="col-xs-4"><a class="pointer" ng-click="showDocDetails()"><i class="fa fa-user"></i>{{'MED_DOCTOR_DETAILS' | translate}}</a></div></div><div class="row" ng-if="visibleDiseaseDetails"><div class="col-xs-6"><md-input-container class="md-block"><label>{{'DISEASE_VARIANT'|translate}}</label><input type="text" name="diseaseVariant" ng-disabled="viewmode || editmode" ng-model="userMedication.diseaseVariant" typeahead-on-select="getDisease(userMedication.diseaseVariant.id)" ng-disabled="viewmode" autocomplete="off" uib-typeahead="diseaseVariant as diseaseVariant.value for diseaseVariant in getDiseaseVariant($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('diseaseVariantMinLength')"></md-input-container></div><div class="col-xs-6"><md-input-container class="md-block"><label>{{'BRAND'|translate}}<span class="mandatoryStar">*</span></label><input type="text" ng-model="userMedication.medicationBrand" required name="medicationBrand" id="medicationBrand" ng-disabled="viewmode"><div ng-messages="medicationform.medicationBrand.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row" ng-if="visibleDocDetails"><div class="col-xs-6" ng-hide="whethersub"><md-input-container class="md-block"><label>{{'LOCATION_RECORD_IN'|translate}}<span class="mandatoryStar">*</span></label><input type="text" required ng-blur="validate(userMedication.creatingOrgn,medicationSideEffectForm.creatingOrganizationId)" name="creatingOrganizationId" id="creatingOrganizationId" ng-model="userMedication.creatingOrganizationId" ng-disabled="viewmode || editmode ||whethersub || hideDetailForm" required autocomplete="off" uib-typeahead="orgLocationCode as orgLocationCode.value for orgLocationCode in getCreatedBy($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgMinLength')" typeahead-on-select="getDoctor(userMedication.creatingOrganizationId.id)"><div ng-messages="medicationform.creatingOrganizationId.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-6"><md-input-container class="md-block"><label>{{'ORGNL_PRES_BY'|translate}}<span class="mandatoryStar">*</span></label><input type="text" required ng-disabled="viewmode" ng-model="userMedication.prescribedOriginallyBy" name="prescribedOriginallyBy" ng-required="!viewMode" autocomplete="off" uib-typeahead="prescribedOriginallyBy as prescribedOriginallyBy.value for prescribedOriginallyBy in getDoctor($viewValue)" typeahead-min-length="getSmartSearchMinLength('defaultMinLength')"><div ng-messages="medicationform.prescribedOriginallyBy.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-xs-6"><md-input-container class="md-block"><label>{{'CRNT_PRES_FROM'|translate}}<span class="mandatoryStar">*</span></label><input type="text" required ng-disabled="viewmode" name="currentPrescriptionFrom" ng-model="userMedication.currentPrescriptionFrom" ng-value="currentPrescriptionFrom" ng-required="!viewMode" autocomplete="off" uib-typeahead="currentPrescriptionFrom as currentPrescriptionFrom.value for currentPrescriptionFrom in getDoctor($viewValue)" typeahead-min-length="getSmartSearchMinLength('defaultMinLength')"><div ng-messages="medicationform.currentPrescriptionFrom.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><br><div class="col-xs-12 padding-b-10"><div class="pull-right"><md-button class="md-raised" ng-click="cancel1()">{{'CANCEL'|translate}}</md-button><md-button type="submit" ng-click="saveUserMedication()" ng-if="!viewmode" class="md-raised md-warn" name="save" ng-disabled="!userMedicationSummaryForm.$valid">{{'SAVE'|translate}}</md-button></div></div></form></div></div></md-dialog><style>.time-colon {
    position: absolute;
    top: 23px;
    padding-left: 4px;
    visibility: hidden;
}

md-hours-minutes {
    width: 60px;
    visibility: hidden;
}

.md-chips .md-chip {
    padding: 8px 6px !important;
    border-radius: 5px;
    text-align: center;
    box-shadow: 0px 0px 2px rgba(0,0,0,0.2);
    height: auto !important;
    width: 106px !important;
}

.calenderTxt {
    margin-left: 10%;
}
.calenderDiv input[type="text"] {
    visibility: hidden;
}
.calenderDiv .input-group-btn {
    visibility: hidden;
}

.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    display: none;
}

.btn-group>.btn:last-child:not(:first-child), .btn-group>.dropdown-toggle:not(:first-child) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    display: none;
}


.btn-success {
    color: #fff;
    background-color: #5cb85c;
    border-color: #4cae4c;
    display: none;
}

.padding-r-15 {
    padding-right: 45px !important;
}</style>
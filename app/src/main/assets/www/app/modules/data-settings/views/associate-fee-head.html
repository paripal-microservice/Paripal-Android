<help-directive help-id="MANAGE_ASSOCIATE_FEE_HEAD" class="divContainer"></help-directive><div class="pageTitle"><span ng-if="pageState==='add'">{{'ASSOCIATE_FEE_HEAD'|translate}}</span> <span ng-if="pageState==='edit'">{{'EDIT_ASSOCIATE_FEE_HEAD'|translate}}</span> <span ng-if="pageState==='view'">{{'VIEW_ASSOCIATE_FEE_HEAD'|translate}}</span></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 ng-scope" style="background-color:#CCC; margin-bottom:15px"><div class="row"><div class="col-sm-12 col-md-4 col-lg-4" style="margin-top:10px"><span><strong>{{'FEE_TYPE' | translate}} : </strong>{{associateFeeHeadObj.selectedFeeType.value}}</span></div><div class="col-sm-12 col-md-4 col-lg-4" style="margin-top:10px"><span><strong>{{'FEE_SCHEDULE'| translate }} : </strong>{{associateFeeHeadObj.feeScheduleName}}</span></div><div class="col-sm-12 col-xs-12 col-md-4 col-lg-4"><md-input-container><md-checkbox ng-model="associateFeeHeadObj.whetherResidual" ng-disabled="true">{{"RESIDUAL"|translate}}</md-checkbox></md-input-container></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard" ng-class="{'posRelative':explressionOfIntgerestViewSpinner}" ng-cloak class="ng-cloak"><spinner name="associateFeeHeadFormSpinner" img-src="{{pageLoaderImg}}" show="showSpinner"></spinner><div><form name="associateFeeHeadForm" autocomplete="off" novalidate id-generator><div class="col-xs-12"><div class="row" style="margin-top: 10px"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label class="md-required">{{'FEE_HEAD_TYPE'|translate}}</label><md-select ng-model="selcetedCalculatable" name="calculatable" ng-change="setCalculatable(selcetedCalculatable)" ng-disabled="pageState != 'add'" required><md-option ng-repeat="row in calculatable" ng-value="row">{{row|translate}}</md-option></md-select><div class="md-errors-spacer"></div><div ng-messages="userTestForm.diseaseId.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div><currency-dropdown currency-value="associateFeeHeadObj.currency" disable="pageState == 'view' || pageState == 'edit'" label="CURRENCY" on-select="onCurrencyChanged()" required="true"></currency-dropdown><div class="col-sm-12 col-md-4 col-lg-4"><ws-name-value-combo css-class="col-sm-12 col-md-4 col-lg-4 padding-0 float-width-l-100" min-length="getSmartSearchMinLength('feeHeadMinLength')" label-name="FEE_HEAD" name-value-list="associateFeeHeadObj.feeHead" query-search-key="keyword" query-url="feeHead.queryUrl" query-parameter="feeHead.queryParameter" disable="(pageState != 'add')" method="POST" json-parameter="feeHead.jsonParameter" required="true" on-select="findFormulaFeeHeads()"></ws-name-value-combo></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4" ng-if="!associateFeeHeadObj.whetherAdhoc && (selcetedCalculatable == 'FIXED_AMOUNT_FEE_HEAD')"><md-input-container><label>{{'AMOUNT'| translate }}</label><input name="amount" ng-model="associateFeeHeadObj.amount" ng-pattern="/^[1-9]\d{0,8}$/" ng-maxlength="commonConstants.cellMaxLength" ng-disabled="associateFeeHeadObj.whetherAdhoc || pageState == 'view' || associateFeeHeadObj.whetherAmountAutoGenerated" required><div ng-messages="associateFeeHeadForm.amount.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="pattern">{{'PATTERN_ERR' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'ROUND_OFF_ALGO'|translate}}</label><md-select ng-model="associateFeeHeadObj.roundOff"><md-option ng-repeat="roundOff in associateFeeHeadObj.roundOffAlgoList" ng-value="roundOff">{{roundOff | translate}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-xs-12 col-md-4 col-lg-4" ng-if="selcetedCalculatable == 'FIXED_AMOUNT_FEE_HEAD'"><md-input-container><md-checkbox ng-model="associateFeeHeadObj.whetherMandatory" ng-disabled="pageState == 'view'">{{"MANDATORY"|translate}}</md-checkbox></md-input-container></div></div><div ng-hide="!isFormulaGenerater "><span class="redText" ng-show="!(columns.length> 0) && associateFeeHeadObj.feeHead != undefined">{{'NOTE' | translate}} : {{'NO_FEE_HEADS_AVAILABLE_IN_SELECTED_CURRENCY' | translate}}</span><div class="formula-body query-builder-demo-container col-sm-12 col-md-12 col-lg-12"><div class="demo-container"><formula-builder data="query" suffix="formula.suffix" columns="columns" operations="operations" formulae="associateFeeHeadObj.formulae" mode="pageState" disable="pageState == 'view' || !whetherColumnData"></formula-builder></div></div></div><div class="row" ng-if="isCondition"><div class="col-sm-12 col-md-12 col-lg-12"><div class="table-responsive foo"><div class="standard-master-table"><h4 class="pull-left">{{'CONDITION' | translate}}</h4><md-button style="margin-left: 5px" type="button" ng-click="addCondition()" class="btn btn-sm btn-success pull-right"><i class="fa fa-plus"></i> {{'CONDITION' | translate}}</md-button><table class="table table-striped table-hover" style="min-width: 768px"><thead><tr><th>{{'AMOUNT' | translate}}</th><th>{{'CONDITION_DESCRIPTION' | translate}}</th><th></th><th></th></tr></thead><tbody ui-sortable="sortableOptions" ng-model="feeScheduleFeeHeadOptions"><tr ng-repeat="item in feeScheduleFeeHeadOptions" class="grabbable"><td><div><md-input-container><input type="text" name="conditionAmount" ng-model="item.amount" ng-disabled="pageState==='view'" ng-maxlength="commonConstants.cellMaxLength" ng-blur="checkConditionValidity($index)" required><div ng-messages="associateFeeHeadForm.conditionAmount.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></td><td><div><md-input-container><input type="text" name="conditionDesc" ng-model="item.conditionDesc" ng-disabled="pageState==='view'" ng-maxlength="commonConstants.cellMaxLength" ng-blur="checkConditionValidity($index)" required><div ng-messages="associateFeeHeadForm.conditionDesc.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></td><td><div><a href="" ng-click="displayCondition(item, $index)">{{'DEFINE_CONDITION' |translate}}</a></div></td><td><div><md-input-container><md-radio-group ng-model="associateFeeHeadObj.defaultFeeScheduleFeeHeadOption"><md-radio-button ng-value="item" class="md-primary">{{'WHETHER_DEFAULT' | translate}}</md-radio-button></md-radio-group><div ng-messages="associateFeeHeadForm.whetherDefault.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></td></tr></tbody></table></div></div></div></div><div class="col-sm-12 col-md-12 col-lg-12"><div ng-if="showCondition"><h3>{{"CONDITION_DEFINITION"|translate}}</h3><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><md-input-container><label>{{"DESCRIPTION"|translate}}</label><input type="text" ng-model="feeScheduleFeeHead.conditionDesc" name="description" ng-disabled="pageState==='view'" ng-maxlength="commonConstants.textAreaLengthSmall" id="description" required><div ng-messages="associateFeeHeadForm.description.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="description-box"><query-builder group="feeScheduleFeeHead.conditionUIDef.group" pre-populated-condition="false" query-meta-data="queryMetaData" entity-fields="entityFields" output="feeScheduleFeeHead.sqlQueryWhereDef" description="feeScheduleFeeHead.conditionDesc" table-alias="feeScheduleFeeHead.conditionEntityDef" mode="{{pageState}}" disabled="pageState==='view' || (feeScheduleFeeHead.amount == undefined && feeScheduleFeeHead.conditionDesc == undefined )"></query-builder></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"></div><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><span><md-button type="submit" class="md-raised md-warn" ng-hide="pageState === 'view'" ng-click="saveAssociateFeeHead(associateFeeHeadForm)">{{'SAVE'|translate}}</md-button></span></div></div></form></div></div>
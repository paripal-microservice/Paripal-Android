<div ng-class="{'posRelative':orgListPageSpinner}"><spinner name="orgListPageSpinner" img-src="{{pageLoaderImg}}" show="orgListPageSpinner"></spinner><div class="pageTitle"><span>{{'FORUM_LIST'|translate}}</span></div><div class="filterPanel filter"><uib-accordion><uib-accordion-group is-open="status.open"><uib-accordion-heading><i class="fa fa-filter"></i> <span>{{'FILTER'|translate}}</span> <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i></uib-accordion-heading><form name="listForm" class="form-horizontal panel-body-top" id="listForm" autocomplete="off"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-select placeholder="Forum Type" ng-model="forumSearch.forumType" flex-gt-sm><md-option ng-value="type" ng-repeat="type in types">{{type}}</md-option></md-select></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-select placeholder="Forum Category" ng-model="forumSearch.forumCategory.id" flex-gt-sm><md-option ng-value="category.id" ng-repeat="category in categories">{{category.name}}</md-option></md-select></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-select placeholder="Forum Visibility" ng-disabled="forumSearch.forumType != 'Organisation Specific'" ng-model="forumSearch.forumVisibility" flex-gt-sm><md-option ng-value="visiblity" ng-repeat="visiblity in visiblities">{{visiblity}}</md-option></md-select></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" style="padding-top:11px"><md-input-container flex-gt-sm><label>{{'FORUM'|translate}}</label><input style="height:auto;resize: none" ng-model="forumSearch.forumName"></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{ "ADMIN_NAME" |translate}}</label><input type="text" name="ownedBy" id="ownedBy" ng-maxlength="250" ng-model="ownedBy" ng-disabled="forumSearch.forumType == 'Public'" autocomplete="off" uib-typeahead="ownedBy as ownedBy.value  for ownedBy in getUserNamesForRoleHistory($viewValue)" typeahead-on-select="selectOwnedByChanged($item, $model, $label)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container ng-show="isOrgUser"><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmpLoading" is-auto-complete="true"></spinner><label>{{'USER NAME'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="selectedUser" name="userName" id="userName" autocomplete="off" uib-typeahead="user as user.value for user in getUserNamesForRoleHistoryAdmin($viewValue)" ng-disabled="forumSearch.forumType != 'Interest Group'" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" required></md-input-container></div></div><div ng-if="forumSearch.forumType == 'Interest Group' && !isOrgUser" layout="row" flex-gt-sm><label style="padding-left: 5px;padding: 3px;margin-top:5px">Not Yet Subscribed</label><md-checkbox ng-model="forumSearch.subscribed" aria-label="Checkbox 1" ng-true-value="1" ng-false-value="0"></md-checkbox></div><div ng-if="forumSearch.forumType == 'Interest Group' && isOrgUser && selectedUser" layout="row" flex-gt-sm><label style="padding-left: 5px;padding: 3px">Not Yet Subscribed</label><md-checkbox ng-model="forumSearch.subscribed" aria-label="Checkbox 1" ng-true-value="1" ng-false-value="0"></md-checkbox></div></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 textAlign-R wizardFooter"><md-button type="reset" ng-click="clear()" class="md-raised">{{"RESET"|translate}}</md-button><md-button class="md-raised md-warn" ng-click="searchForum(selectedUser)">{{"APPLY"|translate}}</md-button></div></div></div></form></uib-accordion-group></uib-accordion></div></div><div class="row padding-b-10 padding-t-20"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><md-button type="button" class="md-raised md-warn" ng-show="hasOrgForumAddPrivilege || hasForumAddPrivilege " ng-click="redirectToAdd()"><i class="fa fa-plus"></i> {{'ADD_NEW' | translate}}</md-button><div class="pull-right"><md-menu><md-button type="button" class="md-raised" ng-click="$mdOpenMenu($event)">{{'SHOW'|translate}} {{itemPerPage}}</md-button><md-menu-content width="3" ng-init="maxRecordsAr = [10,25,50,100]"><md-menu-item ng-repeat="item in maxRecordsAr"><md-button ng-click="setMaxRecords(item)"><span md-menu-align-target>{{'SHOW'|translate}} {{item}} </span></md-button></md-menu-item></md-menu-content></md-menu></div></div></div><div class="table-responsive foo" ng-class="{'posRelative':orgloclistSpinner}"><spinner name="orgloclistSpinner" img-src="{{pageLoaderImg}}" show="orgloclistSpinner"></spinner><div><table datatable="ng" ng-hide="requestFields" dt-options="options" dt-column-defs="dtColumnDefs" class="table table-striped table-hover rwd-table" width="100%" id="data-table"><thead><tr><th ng-click="sortType = 'forumName'; sortReverse = !sortReverse">{{'NAME_OF_FORUM'|translate}} <span ng-show="sortType !== 'forumName' && !sortReverse" class="fa fa-sort-down"></span> <span ng-show="sortType == 'forumName' && !sortReverse" class="fa fa-sort-down"></span> <span ng-show="sortType == 'forumName' && sortReverse" class="fa fa-sort-up"></span></th><th>{{'FORUM_TYPE'|translate}}</th><th>{{'ADMINISTRATOR'|translate}}</th><th>{{'DATE_CREATED'|translate}}</th><th>{{'FORUM_STATUS'|translate}}</th><th>Goto</th></tr></thead><tbody><tr ng-repeat="list in forumList | orderBy:sortType:sortReverse"><td><div class="btn-group"><a class="dropdown-toggle dropDownBtnLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{list.forumName}}</a><ul class="dropdown-menu"><li><a href="" ng-if="list.forumType == 'Public' || list.forumType == 'Organisation Specific'" ng-show="hasForumEditPrivilege || hasOrgForumEditPrivilege" ng-click="redirectTo('edit', list.id)"><i class="fa fa-pencil"></i> {{"EDIT" | translate}}</a><a href="" ng-if="list.forumType == 'Interest Group' && list.admin == userId && list.isAdmin == 1 && !isOrgUser" ng-click="redirectTo('edit', list.id)"><i class="fa fa-pencil"></i> {{"EDIT" | translate}}</a></li><li><a href="" class="md-raised" ng-click="redirectTo('view', list.id)"><i class="fa fa-eye"></i>{{"VIEW" | translate}}</a></li><li><a href="" ng-if="list.forumType == 'Public' || list.forumType == 'Organisation Specific'" ng-show="hasForumInActivePrivilege || hasOrgForumInActivePrivilege" ng-click="inActivateForum(list.id, $index);"><i class="fa fa-stop"></i> {{"INACTIVATE" | translate}}</a><a href="" ng-if="list.forumType == 'Interest Group' && list.admin == userId && list.isAdmin == 1 && !isOrgUser" ng-click="inActivateForum(list.id, $index);"><i class="fa fa-stop"></i> {{"INACTIVATE" | translate}}</a></li><li><a href="" ng-if="!isOrgUser && list.admin == userId && list.isAdmin == 1 && list.forumType == 'Interest Group'" ng-click="redirectToRequest(list.id)"><i class="fa fa-user"></i> {{"PENDING_REQUESTS" | translate}}</a></li><li><a href="" ng-if="!isOrgUser && list.admin == userId && list.isAdmin == 1 && list.forumType == 'Interest Group'" ng-click="openExcludePopup($event, list);"><i class="fa fa-user-times"></i> {{"EXCLUDE_USER" | translate}}</a></li></ul></div></td><td>{{list.forumType}}</td><td>{{list.forumType == 'Interest Group' && list.adminName ? list.adminName : 'Organisation Admin'}}</td><td>{{list.createdDate | date:'dd-MM-yyyy'}}</td><td>{{list.isActive == '1' ? 'Active' : 'InActive' }}</td><td><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 padding-0" ng-if="!isCordova"><a ng-hide="hideLink && requestFields" href="{{jforumUrl}}{{list.jforumId}}.page" target="_Forum"><i class="fa fa-comment result" aria-hidden="true"></i></a></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 padding-0" ng-if="isCordova"><span class="clickCls" vote="false" data="{{list.jforumId}}" style="float:left"><i class="fa fa-comment result" aria-hidden="true"></i></span></div></td></tr></tbody></table></div></div><div class="table-responsive foo" ng-class="{'posRelative':orgloclistSpinner}"><spinner name="orgloclistSpinner" img-src="{{pageLoaderImg}}" show="orgloclistSpinner"></spinner><div><table ng-if="requestFields" datatable="ng" dt-options="options" dt-column-defs="dtColumnDefs" class="table table-striped table-hover rwd-table" width="100%" id="data-table"><thead><tr><th>{{'NAME_OF_FORUM'|translate}}</th><th>{{'FORUM_TYPE'|translate}}</th><th>{{'ADMINISTRATOR'|translate}}</th><th>{{'DATE_CREATED'|translate}}</th><th>{{'FORUM_STATUS'|translate}}</th><th>{{'REQUEST_STATUS'|translate}}</th><th>{{'REJECT_REASON'|translate}}</th><th>Goto</th></tr></thead><tbody><tr ng-repeat="list in forumList"><td><div class="btn-group"><a class="dropdown-toggle dropDownBtnLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{list.forumName}}</a><ul class="dropdown-menu"><li><a href="" ng-if="list.forumType == 'Public'" check-permission feature-privilege="{{featurePrivilegeConstants.FORUM_EDIT}}" ng-click="redirectTo('edit', list.id)"><i class="fa fa-pencil"></i> {{"EDIT" | translate}}</a> <a href="" ng-if="list.forumType == 'Organisation Specific'" check-permission feature-privilege="{{featurePrivilegeConstants.ORG_FORUM_EDIT}}" ng-click="redirectTo('edit', list.id)"><i class="fa fa-pencil"></i> {{"EDIT" | translate}}</a> <a href="" ng-if="list.forumType == 'Interest Group' && list.adminId.id == userId && list.isAdmin == 1 && !isOrgUser" ng-click="redirectTo('edit', list.id)"><i class="fa fa-pencil"></i> {{"EDIT" | translate}}</a></li><li><a href="" class="md-raised" ng-click="redirectTo('view', list.id)"><i class="fa fa-eye"></i>{{"VIEW" | translate}}</a></li><li><a href="" ng-if="list.forumType == 'Public'" check-permission feature-privilege="{{featurePrivilegeConstants.FORUM_EDIT}}" ng-click="inActivateForum(list.id, $index);"><i class="fa fa-pencil-square-o"></i> {{"INACTIVATE" | translate}}</a> <a href="" ng-if="list.forumType == 'Organisation Specific'" check-permission feature-privilege="{{featurePrivilegeConstants.ORG_FORUM_EDIT}}" ng-click="inActivateForum(list.id, $index);"><i class="fa fa-pencil-square-o"></i> {{"INACTIVATE" | translate}}</a> <a href="" ng-if="list.forumType == 'Interest Group' && list.adminId.id == userId && list.isAdmin == 1 && !isOrgUser" ng-click="inActivateForum(list.id, $index);"><i class="fa fa-pencil-square-o"></i> {{"INACTIVATE" | translate}}</a></li><li><a href="" ng-if="list.userId != userId && list.forumType == 'Interest Group' && list.requestStatus != 'Requested' && !isOrgUser" ng-click="sendRequest(list, $index);"><i class="fa fa-user-plus"></i> {{"Send Request" | translate}}</a></li><li><a href="" ng-if="list.adminId.id == userId && list.isAdmin == 1 && list.forumType == 'Interest Group' && !isOrgUser" ng-click="redirectToRequest(list.id)"><i class="fa fa-user"></i> {{"Pending Requests" | translate}}</a></li><li><a href="" ng-if="list.adminId.id == userId && list.isAdmin == 1 && list.forumType == 'Interest Group' && !isOrgUser" ng-click="openExcludePopup($event, list);"><i class="fa fa-user-times"></i> {{"Exclude User" | translate}}</a></li></ul></div></td><td>{{list.forumType}}</td><td>{{list.forumType == 'Interest Group' && list.adminId ? list.adminId.value : 'Organisation Admin'}}</td><td>{{list.createdDate | date:'dd-MM-yyyy'}}</td><td>{{list.isActive == '1' ? 'Active' : 'InActive' }}</td><td ng-show="hideLink && requestFields">{{!list.requestStatus && list.rejectionReason ? 'Rejected' : list.requestStatus ? list.requestStatus : 'Not Yet Subscribed' }}</td><td ng-show="!hideLink && requestFields">Subscribed</td><td>{{list.rejectionReason}}</td><td><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 padding-0" ng-if="!isCordova"><a ng-hide="hideLink && requestFields" href="{{jforumUrl}}{{list.jforumId}}.page" target="_Forum"><i class="fa fa-comment result" aria-hidden="true"></i></a></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 padding-0" ng-if="isCordova"><span class="clickCls" vote="false" data="{{list.jforumId}}" style="float:left"><i class="fa fa-comment result" aria-hidden="true"></i></span></div></td></tr></tbody></table></div></div><div ng-show="totalItems > 0"><div class="pageRecord"><span>{{'SHOWING' | translate}} {{pagingInfo.startRecord + '-' + pagingInfo.endRecord + ' of ' + totalItems + ' items'}}</span></div><div class="text-center"><uib-pagination max-size="4" total-items="totalItems" ng-model="currentPage" items-per-page="itemPerPage" ng-change="pageChanged()" boundary-links="true" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div>
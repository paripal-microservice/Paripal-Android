<div class="col-xs-12 col-sm-12" ng-if="dateError"><div class="col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4 errorListBox"><span class="errorMsg" ng-repeat="error in dateErrorList">{{$index + 1}}. {{error}}<br></span></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10"><form name="addForum" ng-submit="addForums(addForum)" novalidate="novalidate" autocomplete="off"><div class="pageTitle"><span ng-if="!forumId">{{'ADD_NEW_FORUM'|translate}}</span> <span ng-if="forumId">{{'EDIT_FORUM'|translate}}</span></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'FORUM_NAME'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="forum.forumName" name="forumName" ng-maxlength="50" id="forumName" required><div ng-messages="addForum.forumName.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'FORUM_TYPE'|translate}}</label><md-select name="forumType" id="forumType" ng-model="forum.forumType" ng-disabled="forumAddType == 'orgForum'" required><md-option ng-value="type" ng-repeat="type in types">{{type}}</md-option></md-select><div ng-messages="addForum.forumType.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'FORUM_CATEGORY'|translate}}</label><md-select name="category.id" id="category.id" ng-model="forum.category.id" required><md-option ng-value="category.id" ng-repeat="category in categories">{{category.name}}</md-option></md-select><div ng-messages="addForum.category.id.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'FORUM_VISIBILITY'|translate}}</label><md-select ng-disabled="forum.forumType !== 'Organisation Specific'" placeholder="Forum Visibility" ng-model="forum.forumVisibility" ng-required="forum.forumType === 'Organisation Specific'"><md-option ng-value="visiblity" ng-repeat="visiblity in visiblities">{{visiblity}}</md-option></md-select></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label>{{'DATE_VALID_FROM'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-disabled="viewmode" ng-change="getDate(forum.forumValidFrom)" ng-model="forum.forumValidFrom" till-max-date="maxDate" ng-required="requireValidFrom" name="validFrom" required><md-icon class="datepickerIcon"></md-icon><div ng-messages="forum.forumValidFrom.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'DATE_VALID_TILL'|translate}}</label><input datepicker class="pointer" ng-disabled="viewmode" id="startDate" ng-change="getDate(forum.forumValidTo)" ng-model="forum.forumValidTo" from-min-date="forum.forumValidFrom" name="startDate"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container ng-show="forum.forumType == 'Interest Group'"><label class="md-required">{{ "ADMIN_NAME" |translate}}</label><input type="text" name="ownedBy" id="ownedBy" ng-maxlength="50" ng-model="ownedBy" autocomplete="off" uib-typeahead="ownedBy as ownedBy.value  for ownedBy in getUserNamesForRoleHistory($viewValue)" typeahead-on-select="selectOwnedByChanged($item, $model, $label)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-required="forum.forumType == 'Interest Group'"><div ng-messages="addForum.ownedBy.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container ng-show="forum.forumType === 'Organisation Specific'"><label class="md-required">{{ "ORGANIZATION" |translate}}</label><md-select ng-model="forum.orgId" ng-required="forum.forumType === 'Organisation Specific'"><md-option ng-value="org.id" ng-selected="org.id == forum.orgId?true:false" ng-repeat="org in orgList">{{org.value}}</md-option></md-select><div ng-messages="addForum.orgId.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-6 col-lg-6"><md-input-container ng-show="forum.forumVisibility == 'Clients of Location' || forum.forumVisibility == 'All Users With Access to Location'"><label class="md-required">{{ "LOCATION" |translate}}</label><md-select multiple="multiple" placeholder="Organisation Location" ng-model="orgLocIds" ng-required="forum.forumVisibility == 'Clients of Location' || forum.forumVisibility == 'All Users With Access to Location'"><md-option ng-value="loc.organizationLocation.id" ng-repeat="loc in orgLoc" multiple="multiple">{{loc.organizationLocation.value}}</md-option></md-select></md-input-container></div></div><md-input-container class="md-block"><label>{{'DESCRIPTION'|translate}}<span class="mandatoryStar">*</span></label><textarea id="forumDescription" name="forumDescription" ng-model="forum.forumDescription" md-maxlength="250" rows="5" md-select-on-focus ng-required="true"></textarea><div ng-messages="addForum.forumDescription.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 textAlign-R wizardFooter"><md-button class="md-raised" ng-click="back()">{{'CANCEL'|translate}}</md-button><md-button ng-if="!forumId" ng-disabled="!addForum.$valid" type="submit" class="md-raised md-warn">{{'SAVE' | translate}}</md-button><md-button ng-if="forumId" type="submit" class="md-raised md-warn" ng-click="updateForum()">{{'UPDATE' | translate}}</md-button></div></div></form></div>
<div class="pageTitle"><span>{{'TEST_ORDER'|translate}}</span><help-directive help-id="USER_TEST_LIST" class="divContainer"></help-directive></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 margin-b-10 padding-b-10"><form name="testOrderForm" ng-cloak><div class="row"><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" ng-if="pageState == 'edit' || pageState == 'view'"><md-input-container><label>{{'ORDER_CODE' | translate}}</label><input ng-model="WSDiagnosticTestUser.orderCode" ng-disabled="pageState == 'view' || pageState == 'edit'" name="hospitalSelected" autocomplete="off" uib-typeahead="user as user.value for user in getAccessibleUsers($viewValue)" typeahead-min-length="3" typeahead-editable="commonConstants.typeaheadEditable"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" ng-if="(pageState == 'edit' || pageState == 'view') && WSDiagnosticTestUser.locationOrderId != null"><md-input-container><label>{{'LOC_ORDER_ID' | translate}}</label><input ng-model="WSDiagnosticTestUser.locationOrderId" ng-disabled="pageState == 'view' || pageState == 'edit'" name="hospitalSelected" autocomplete="off" uib-typeahead="user as user.value for user in getAccessibleUsers($viewValue)" typeahead-min-length="3" typeahead-editable="commonConstants.typeaheadEditable"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4" ng-if="WSDiagnosticTestUser.locationOrderId == null"><md-input-container><label>{{'REQUESTED_ON'|translate}}<span ng-if="true" class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.requestedOn" from-min-date="minDate" name="apptDate" ng-disabled="true" ng-required="true"><md-icon class="datepickerIcon"></md-icon><div ng-messages="listForm.apptDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmp" is-auto-complete="true"></spinner><label>{{'PATIENT_NAME'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSDiagnosticTestUserData.userId" name="userId" ng-maxlength="commonConstants.textFieldLengthMedium" id="userId" autocomplete="off" uib-typeahead="userData.value for userData in getUserData($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" typeahead-editable="false" typeahead-on-select="onUserSelect($item, $model, $label)" ng-disabled="pageState === 'edit' || pageState==='view' || isUserDisable || isIndUser || disableUserSelection" ng-required="true"><div ng-messages="userTestForm.userId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><pick-list-dropdown disable="disableGender" pick-list-value="user.gender" type="GENDER" required="{{!disableForCompany}}" label="GENDER"></pick-list-dropdown><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="advisedBySpinner" img-src="{{autoCompletLoaderImg}}" show="advisedBySpinner" is-auto-complete="true"></spinner><label>{{'ADVISED_BY'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSDiagnosticTestUserData.advisedBy" name="advisedBy" ng-maxlength="50" id="advisedBy" autocomplete="off" uib-typeahead="advisedByData as advisedByData.value for advisedByData in getAdvisedByData($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-blur="onAdvisedBySelect(WSDiagnosticTestUserData.advisedBy)" ng-disabled="pageState==='view' || isPrescribed" required><div ng-messages="testOrderForm.advisedBy.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-button type="button" ng-class="fileClass" class="md-raised col-lg-10 col-md-10" ng-click="fileUploader($event)" ng-disabled="pageState==='view'" style="background-color: darkcyan; color: white"><i class="fa fa-list-alt" aria-hidden="true"></i> <b>{{'ADD_PRESCRIPTION_FILE'|translate}}</b></md-button><button type="button" id="uploadBtn" class="btn btn-signin width-15-height-38" ng-disabled="!uploadFileObject.fileName" tooltip-placement="bottom" uib-tooltip="{{'PREVIEW'|translate}}" ng-click="viewPrintFile($event,uploadFileObject)"><i class="fa fa-bar-chart" aria-hidden="true"></i></button></div><div class="col-md-4 col-sm-12 col-xs-12 col-lg-4"><md-input-container><label>{{'SELECTED_FILE_NAME' | translate}}</label><input ng-model="uploadFileObject.fileName" disabled="disabled"></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4 col-xs-12"><md-input-container><md-checkbox ng-model="WSDiagnosticTestUser.whetherHomePickupRequest" aria-class="md-warn md-align-top-left" ng-show="pageState != 'prescription'" ng-disabled="pageState == 'view'" flex>{{'REQUEST_HOME_PICKUP' |translate}}</md-checkbox></md-input-container></div><div ng-if="WSDiagnosticTestUser.whetherHomePickupRequest"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'HOME_PICKUP_DATE'|translate}}<span ng-if="true" class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.homePickupDate" from-min-date="minDate" name="apptDate" ng-disabled="false || pageState == 'view'" ng-required="true"><md-icon class="datepickerIcon"></md-icon><div ng-messages="listForm.apptDate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><label class="labelFontSize">{{'HOME_PICKUP_TIME'|translate}}<span class="mandatoryStar">*</span></label><uib-timepicker name="startTime" ng-model="testOrder.homePickupTime" ng-required="WSDiagnosticTestUser.whetherHomePickupRequest" ng-disabled="disableStartTime || pageState == 'view'" show-meridian="true" hour-step="1" arrowkeys="false" minute-step="1"></uib-timepicker><div ng-messages="timeForm.startTime.$error"><div class="mandatoryStar" ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div><div class="mandatoryStar" ng-message="less">{{'START_TIME_SHOULD_LESS' |translate}}</div></div></div></div></div><div class="row margin-t-10"><h4 class="col-lg-2 col-md-2 col-sm-6 col-xs-6 margin-t-10">{{'ADD_TEST' | translate}}</h4><div class="padding-l-0"><md-button class="md-raised md-warn md-button md-ink-ripple fa fa-plus availability-add-btn" ng-disabled="$next || pageState == 'view'" ng-click="addTest()" style="float: left"></md-button></div></div><div class="repeatDiv" ng-repeat="test in testItArray"><div class="row"><div class="col-sm-10 col-md-3 col-lg-3 col-xs-10 margin-t-10"><md-input-container><label>{{'TEST_PRESCRIBED'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="testArray[$index]" name="testPrescribed" ng-maxlength="commonConstants.inputTypeMaxLength50" id="testPrescribed" autocomplete="off" uib-typeahead="testPrescribedData as testPrescribedData.value for testPrescribedData in getTestPrescribed($viewValue, true)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" typeahead-on-select="onTestPrescribedSelect($item, $model, $label, $index)" ng-disabled="pageState==='view' || disableTest" typeahead-editable="commonConstants.typeaheadEditable" required><div ng-messages="testOrderForm.testPrescribed.$error "><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><md-button class="md-raised md-warn availability-remove-btn fa fa-minus" ng-click="removeTest($index)" style="float: left; margin-top: 10px" ng-disabled="pageState == 'view'"></md-button></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-8 col-sm-8 col-md-12 col-lg-12 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><md-button ng-if="showTestBtn!=true" class="md-raised md-warn" ng-disabled="!testOrderForm.$valid || pageState == 'view'" ng-click="submitOrder()">{{'SAVE'|translate}}</md-button></div></div></form></div><script src="components/js/custom/custom.js"></script><view-file-pop-up visible="viewFileContent" file-resource="fileResource"><view-file-pop-up-header title="{{'VIEW_FILE_CONTENTS' | translate}}"></view-file-pop-up-header><view-file-pop-up-body></view-file-pop-up-body><view-file-pop-up-footer is-hiding-print-button="isHidingPrintButton"></view-file-pop-up-footer></view-file-pop-up><delete-pop-up delete-dialog-box="deleteDialogBox"></delete-pop-up>
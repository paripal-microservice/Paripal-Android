<help-directive help-id="MANAGE_USER_TEST" class="divContainer"></help-directive><div class="pageTitle"><span ng-if="pageState==='edit'">{{'EDIT_USER_TEST'|translate}}</span> <span ng-if="pageState==='view'">{{'VIEW_USER_TEST'|translate}}</span> <span ng-if="pageState==='add'">{{'ADD_USER_TEST'|translate}}</span></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div class="stepwizard-step"><a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-file-powerpoint-o"></i></a></div><div class="stepwizard-step"><a href="#step-2" type="button" class="btn btn-default btn-circle"><i class="fa fa-book"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard" ng-class="{'posRelative':explressionOfIntgerestViewSpinner}"><spinner name="manageUserTestSpinner" img-src="{{pageLoaderImg}}" show="manageUserTestSpinner"></spinner><div><form name="userTestForm" autocomplete="off" novalidate id-generator><div class="setup-content" id="step-1"><div class="col-xs-12"><h3>{{'PATIENT_DETAILS'|translate}} <span class="titleNum">(1 of 2)</span></h3><div class="row margin-t-10"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="userNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="userNameAutoCmp" is-auto-complete="true"></spinner><label>{{'PATIENT_NAME'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSDiagnosticTestUserData.userId" name="userId" ng-maxlength="commonConstants.textFieldLengthMedium" id="userId" autocomplete="off" uib-typeahead="userData.value for userData in getUserData($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" typeahead-editable="false" typeahead-on-select="onUserSelect($item, $model, $label)" ng-disabled="pageState === 'edit' || pageState==='view' || isUserDisable" ng-required="true"><div ng-messages="userTestForm.userId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><spinner name="advisedBySpinner" img-src="{{autoCompletLoaderImg}}" show="advisedBySpinner" is-auto-complete="true"></spinner><label>{{'ADVISED_BY'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSDiagnosticTestUserData.advisedBy" name="advisedBy" ng-maxlength="50" id="advisedBy" autocomplete="off" uib-typeahead="advisedByData as advisedByData.value for advisedByData in getAdvisedByData($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-blur="onAdvisedBySelect(WSDiagnosticTestUserData.advisedBy)" ng-disabled="pageState==='view' || pageState==='edit'|| isPrescribed" required><div ng-messages="userTestForm.advisedBy.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><h3>{{'PRESCRIPTION_DETAILS'|translate}}</h3><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'TEST_PRESCRIBED'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSDiagnosticTestUserData.testPrescribed" name="testPrescribed" ng-maxlength="commonConstants.inputTypeMaxLength50" id="testPrescribed" autocomplete="off" uib-typeahead="testPrescribedData.value for testPrescribedData in getTestPrescribed($viewValue, true)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" typeahead-on-select="onTestPrescribedSelect($item, $model, $label)" ng-disabled="pageState === 'edit' || pageState==='view' || isPrescribed" typeahead-editable="commonConstants.typeaheadEditable" required><div ng-messages="userTestForm.testPrescribed.$error "><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'TRANSACTION_ID'|translate}}</label><input ng-model="WSDiagnosticTestUser.transactionId" name="transactionId" ng-maxlength="commonConstants.inputTypeMaxLength50" id="transactionId" autocomplete="off" uib-typeahead="transactionIdData for transactionIdData in transactionIds | filter:$viewValue" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('defaultMinLength0')" ng-disabled="pageState==='view'"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'REASON'|translate}}</label><input ng-model="WSDiagnosticTestUser.reason " name="reason" ng-maxlength="commonConstants.textFieldLengthMedium" id="reason" ng-disabled="pageState === 'edit' || pageState==='view' || isPrescribed"><div ng-messages="userTestForm.reason.$error "><div ng-message="required ">{{'REQUIRED' |translate}}</div><div ng-message="maxlength ">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'LABS_REFFERED'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="labsReferred" name="labsReferred" ng-maxlength="commonConstants.textFieldLengthMedium" id="labsReferred" autocomplete="off" uib-typeahead="labData.value for labData in labsReferredList | filter:$viewValue" typeahead-loading="loading" typeahead-on-select="onLabRefferedSelect($item, $model, $label)" typeahead-editable="true" typeahead-min-length="getSmartSearchMinLength('orgMinLength')" ng-disabled="pageState === 'edit' || pageState==='view'|| isPrescribed" required><div ng-messages="userTestForm.labsReferred.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'SPECIAL_INSTRUCTIONS'|translate}}</label><input ng-model="WSDiagnosticTestUser.specialInstructions " name="specialInstructions " ng-maxlength="100 " id="specialInstructions " ng-disabled="pageState==='view' || pageState === 'edit' || isUserDisable"><div ng-messages="userTestForm.specialInstructions.$error"><div ng-message="maxlength">{{'MAX_LENGTH' | translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-button type="button" ng-class="fileClass" class="md-raised" ng-click="fileUploader($event)" ng-disabled="pageState==='view'"><i class="fa fa-list-alt" aria-hidden="true"></i> <b>{{'PRESCRIPTION_FILE'|translate}}</b></md-button><button type="button" id="uploadBtn" class="btn btn-signin width-15-height-38" ng-disabled="!uploadFileObject.fileName" ng-if="pageState !== 'add'" tooltip-placement="bottom" uib-tooltip="{{'PREVIEW'|translate}}" ng-click="viewPrintFile($event,uploadFileObject)"><i class="fa fa-bar-chart" aria-hidden="true"></i></button></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'PRESCRIPTION_REFERENCE'|translate}}</label><input ng-model="WSDiagnosticTestUser.prescriptionRef " name="prescriptionRef " ng-maxlength="100 " id="prescriptionRef " ng-disabled="pageState === 'edit' || pageState==='view' || !uploadFileObject.fileName"></md-input-container></div><div class="col-md-4 col-sm-12 col-xs-12 col-lg-4"><md-input-container><label>{{'SELECTED_FILE_NAME' | translate}}</label><input ng-model="uploadFileObject.fileName" disabled="disabled"></md-input-container></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"></div><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0 textAlign-C"><md-button class="md-raised md-warn" ng-click="viewUserTestReportsOrMeasurements('report') " ng-show="WSDiagnosticTestUser.hasAttachments">{{'VIEW_REPORT'|translate}}</md-button><md-button class="md-raised md-warn" ng-click="viewUserTestReportsOrMeasurements('measurements') " ng-show="WSDiagnosticTestUser.hasMeasurements">{{'VIEW_MEASUREMENTS'|translate}}</md-button><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><md-button type="submit" class="md-raised md-warn" ng-if="fromClientsPage" ng-click="fileUploadCall(userTestForm)">{{'SAVE'|translate}}</md-button></div><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"><button class="btn btn-default nextBtn btn-md pull-right" type="button"><span class="nextTextBtn">{{'NEXT_STEP'|translate}}</span> <i class="fa fa-angle-right"></i></button></div></div></div><div class="setup-content" id="step-2"><div class="col-xs-12"><h3>{{'TEST_DETAILS'|translate}} <span class="titleNum">(2 of 2)</span></h3><div class="row margin-t-10"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'REQUEST_ON'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.requestedOn" placeholder="{{userDateFormat}}" till-max-date="currentDate" restrict="reject" name="requestedOn" ng-disabled="pageState === 'edit' || pageState==='view'" required><md-icon class="datepickerIcon"></md-icon><div ng-messages="userTestForm.requestedOn.$error "><div ng-message="required ">{{'REQUEST_DATE_REQ' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'FIXED_ON'|translate}}</label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.fixedOn" placeholder="{{userDateFormat}}" from-min-date="WSDiagnosticTestUser.requestedOn" till-max-date="WSDiagnosticTestUser.testConductedOn" restrict="reject" name="fixedOn" ng-disabled="pageState==='view'" ng-change="changeStatus()"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'TEST_DATE'|translate}}</label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.testConductedOn" placeholder="{{userDateFormat}}" from-min-date="WSDiagnosticTestUser.fixedOn" till-max-date="currentDate" restrict="reject" name="testConductedOn" ng-disabled="pageState==='view'" ng-change="changeStatus()"><md-icon class="datepickerIcon"></md-icon></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'RESULT_ON'|translate}}</label><input datepicker class="pointer" ng-model="WSDiagnosticTestUser.resultUploadedOn " placeholder="{{userDateFormat}} " from-min-date="WSDiagnosticTestUser.testConductedOn" restrict="reject " name="resultUploadedOn" ng-disabled="pageState==='view' || (WSDiagnosticTestUser.testConductedOn | checkNull)"><md-icon class="datepickerIcon"></md-icon></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'AMOUNT'|translate}}</label><input ng-model="WSDiagnosticTestUser.amount " name="amount " ng-maxlength="100 " id="amount " ng-disabled="pageState==='view'"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label class="md-required">{{'DISEASES'|translate}}</label><md-select ng-model="WSDiagnosticTestUser.disease" name="diseaseId" ng-change="diseasesChanged()" ng-disabled="pageState === 'edit' || pageState==='view'"><md-option ng-repeat="disease in diseases" value="{{disease}}" ng-selected="disease.id == diseaseFieldId ? true:false">{{disease.value}}</md-option></md-select><div class="md-errors-spacer"></div><div ng-messages="userTestForm.diseaseId.$error"><div ng-message="required">{{'REQUIRED_SELECTION' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'SYMPTOM'|translate}}</label><input ng-model="WSDiagnosticTestUserData.symptom " name="symptomId " ng-maxlength="50 " id="symptomId " autocomplete="off" uib-typeahead="symptomData.name for symptomData in getSymptom($viewValue) " typeahead-loading="loading " typeahead-min-length="getSmartSearchMinLength('symptomMinLength')" typeahead-editable="false" typeahead-on-select="onSymptomSelect($item, $model, $label) " ng-disabled="pageState==='view'"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'STATUS'|translate}}</label><md-select ng-model="WSDiagnosticTestUser.status" name="status" ng-change="statusChanged()" disabled="disabled"><md-option ng-repeat="status in statuses" value="{{status}}">{{status | translate}}</md-option></md-select></md-input-container></div></div><h3>{{'TEST_CONDUCTED_AT'|translate}}</h3><div class="row"><org-loc-id-generator-combo form-name="userTestForm" selected-org="organization" disable-org="pageState === 'view'" required-org="orgLocRequired" selected-org-loc="testConductedAt" disable-org-loc="pageState === 'view'" required-org-loc="orgLocRequired" independant="false"></org-loc-id-generator-combo></div><h3>{{'IDENTIFIERS'|translate}}</h3><div class="row"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'USER_TEST_ID'|translate}}</label><input ng-model="WSDiagnosticTestUser.userTestId " name="userTestId" ng-maxlength="100 " id="userTestId" ng-disabled="true"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container class="md-block" layout="row "><label>{{'TEST_INDENTIFIER'|translate}}</label><input ng-model="WSDiagnosticTestUser.testIdentifier " name="testIdentifier " ng-maxlength="100" id="testIdentifier " ng-disabled="pageState==='view'"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'USER_TEST_CODE'|translate}}</label><input ng-model="WSDiagnosticTestUser.userTestCode" name="userTestCode" ng-maxlength="50" id="userTestCode"><div ng-messages="userTestForm.userTestId.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"><button class="btn btn-default prevBtn btn-md pull-left" type="button"><span class="previousTextBtn">{{'PREV_STEP'|translate}}</span> <i class="fa fa-angle-left"></i></button></div><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0 textAlign-C"><md-button class="md-raised md-warn" ng-click="viewUserTestReportsOrMeasurements('report') " ng-show="WSDiagnosticTestUser.hasAttachments">{{'VIEW_REPORT'|translate}}</md-button><md-button class="md-raised md-warn" ng-click="viewUserTestReportsOrMeasurements('measurements') " ng-show="WSDiagnosticTestUser.hasMeasurements">{{'VIEW_MEASUREMENTS'|translate}}</md-button><md-button class="md-raised" ng-click="cancel() ">{{'CANCEL'|translate}}</md-button><span><md-button type="submit" class="md-raised md-warn" ng-hide="pageState === 'view'" ng-click="fileUploadCall(userTestForm) ">{{'SAVE'|translate}}</md-button></span></div></div></div></form></div></div><script src="components/js/custom/custom.js"></script><view-file-pop-up visible="viewFileContent" file-resource="fileResource" user-id="WSDiagnosticTestUser.user.id"><view-file-pop-up-header title="{{'VIEW_FILE_CONTENTS' | translate}}"></view-file-pop-up-header><view-file-pop-up-body></view-file-pop-up-body><view-file-pop-up-footer is-hiding-print-button="isHidingPrintButton"></view-file-pop-up-footer></view-file-pop-up>
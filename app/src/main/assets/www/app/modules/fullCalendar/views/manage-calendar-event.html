<div class="pageTitle"><span>{{'DEFINE_EVENT'|translate}}</span><help-directive help-id="DEFINE_EVENT" class="divContainer"></help-directive></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div class="stepwizard-step"><a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-calendar" aria-hidden="true"></i></a></div><div class="stepwizard-step" ng-show="pageState==='edit'"><a href="#step-2" type="button" class="btn btn-default btn-circle"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 wizard"><form name="calendarEventForm" class="form-horizontal" autocomplete="off"><div class="setup-content" id="step-1"><div><h3>{{'EVENT_DETAILS'|translate}} <span class="titleNum">{{'1_of_2'|translate}}</span></h3></div><div class="row"><ws-client-search-combo label-name="CALENDAR" query-param="true" required="true" disable="true" name-value-list="WSCalendarEvent.calendarMaster" query-url="calendarMaster.queryUrl" query-parameter="calendarMaster.queryParameter" json-parameter="calendarMaster.jsonParameter"></ws-client-search-combo><ws-name-value-combo min-length="orgLocMinLength" org-loc-permission="featurePrivilegeConstants.ORGANIZATION_LOCATION_MGMT_VIEW" label-name="ORG_LOCATION" query-param="false" required="true" disable="true" name-value-list="WSCalendarEvent.orgLocation" query-search-key="keyword" query-url="orgLocation.queryUrl" query-parameter="orgLocation.queryParameter" json-parameter="orgLocation.jsonParameter"></ws-name-value-combo></div><div class="row"><ws-client-search-combo label-name="ENTITY_TYPE" required="true" disable="true" name-value-list="WSCalendarEvent.entityType" query-url="entityType.queryUrl" query-parameter="entityType.queryParameter" json-parameter="entityType.jsonParameter"></ws-client-search-combo><ws-client-search-combo label-name="ENTITY_NAME" disable="true" ng-show="isEquipment" query-param="false" required="isEquipment" disable="isEntityNameDisabled" name-value-list="WSCalendarEvent.entityName" query-search-key="" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-name-value-combo min-length="entityNameMinLength" label-name="ENTITY_NAME" disable="true" ng-show="isOrgUser" query-param="false" required="isOrgUser" disable="isEntityNameDisabled" name-value-list="WSCalendarEvent.entityName" query-search-key="searchString" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-name-value-combo><ws-client-search-combo label-name="ENTITY_NAME" disable="true" ng-show="isProcess" query-param="false" required="isProcess" disable="isEntityNameDisabled" name-value-list="WSCalendarEvent.entityName" query-search-key="" query-url="entityName.queryUrl" query-parameter="entityName.queryParameter" json-parameter="entityName.jsonParameter"></ws-client-search-combo><ws-client-search-combo label-name="EVENT_TYPE" query-param="false" required="true" disable="disabledFormFields" name-value-list="WSCalendarEvent.eventType" query-url="eventType.queryUrl" query-parameter="eventType.queryParameter" json-parameter="eventType.jsonParameter"></ws-client-search-combo></div><div class="row"><custom-text-field label-name="EVENT_NAME" disable="disabledFormFields" model-name="WSCalendarEvent.eventName" required="true" maxlength="50"></custom-text-field><valid-from-valid-till valid-from="WSCalendarEvent.eventStartDate" from-date-label="EVENT_START_DATE" require-valid-from="true" disable-valid-from="disabledFormFields || disableStartDate" valid-till="WSCalendarEvent.eventEndDate" to-date-label="EVENT_END_DATE" on-change-valid-till="validateEditView()" require-valid-till="true" disable-valid-till="disabledFormFields"></valid-from-valid-till></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><h3>{{'APPOINTMENT_TYPE_DETAILS'|translate}}</h3></div><div class="col-sm-12 col-md-4 col-lg-4 padding-b-25" ng-hide="isAppointmentTypeHide"><p style="margin-top: -12px; padding-bottom: 14px">{{'APPOINTMENT_TYPE'|translate}}</p><md-radio-group ng-model="WSCalendarEvent.appointmentType" layout="row"><md-radio-button ng-disabled="isFcfsDisabled || disabledFormFields || pageState == 'edit'" value="FCFS">{{'FCFS'|translate}}</md-radio-button><md-radio-button ng-disabled="isSlotDisabled || disabledFormFields || pageState == 'edit'" value="SLOT_BASED">{{'SLOT_BASED'|translate}}</md-radio-button><md-radio-button ng-disabled="isAdhocDisabled || disabledFormFields || pageState == 'edit'" value="ADHOC">{{'ADHOC'|translate}}</md-radio-button></md-radio-group></div><custom-number-field ng-hide="isAppointmentTypeHide" css-class="col-sm-12 col-md-3 col-lg-3" label-name="SLOT_SIZE_MINUTES" model-name="WSCalendarEvent.slotSize" disable="disabledFormFields || !isSlotBased || pageState == 'edit'" required="isSlotBased" regex="^[0-9]*$"></custom-number-field><div class="col-sm-12 col-xs-12 col-md-2 col-lg-2" style="padding-top:10px" ng-if="WSCalendarEvent.appointmentType == 'FCFS'"><md-checkbox ng-model="WSCalendarEvent.isAllowBookingForFCFS"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-l-0 padding-r-0 padding-t-10" style="width: 95px"><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 padding-0">{{'ALLOW_BOOKING'|translate}}</div></div></md-checkbox></div><custom-number-field ng-if="WSCalendarEvent.isAllowBookingForFCFS == true" css-class="col-sm-12 col-md-3 col-lg-3" label-name="PATIENT_CAPACITY" model-name="WSCalendarEvent.capacity" regex="^[0-9]*$" decimal-digit="2" disable="disabledFormFields" required="isCapacityRequired"></custom-number-field></div><div class="row" ng-hide="isRoundRobinHide"><div class="col-sm-12 col-md-2 col-lg-2" style="padding-top:10px"><md-input-container><md-checkbox ng-model="WSCalendarEvent.isRoundRobin" ng-disabled="disabledFormFields " aria-class="md-warn md-align-top-left padding-b-25" flex>{{'IS_ROUND_ROBIN' |translate}}</md-checkbox></md-input-container></div><custom-number-field css-class="col-sm-12 col-md-3 col-lg-3" label-name="PATIENT_CAPACITY" model-name="WSCalendarEvent.capacity" regex="^[0-9]*$" decimal-digit="2" disable="disabledFormFields" required="isCapacityRequired"></custom-number-field><custom-text-field css-class="col-sm-12 col-md-3 col-lg-3" label-name="PROCESS_ROOM" model-name="WSCalendarEvent.roomName" disable="disabledFormFields" required="false" maxlength="50"></custom-text-field></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><h3>{{'EVENT_DETAILS'|translate}}</h3></div><current-start-end-time start-time-label="START_TIME" end-time-label="END_TIME" start-date="startDate" end-date="endDate" start-time="WSCalendarEvent.eventStartTime" end-time="WSCalendarEvent.eventEndTime" required-start-time="true" required-end-time="true" disable-start-time="disabledFormFields || pageState == 'edit'" disable-end-time="disabledFormFields || pageState == 'edit'"></current-start-end-time><div class="row col-sm-12 col-xs-12 col-md-8 col-lg-8"><div class="col-sm-12 col-xs-12 col-md-3 col-lg-3" style="padding-top:10px"><md-checkbox ng-disabled="disabledFormFields || (pageState == 'edit' && !isEnabled)" ng-required="WSCalendarEvent.eventStartDate!=WSCalendarEvent.eventEndDate" ng-model="WSCalendarEvent.isRepeat"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-l-0 padding-r-0 padding-t-10" style="width: 95px"><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 padding-0">{{'REPEAT_EVENT'|translate}}</div><div class="mandatoryStar col-xs-1 col-sm-1 col-md-1 col-lg-1 padding-0" ng-if="WSCalendarEvent.eventStartDate!=WSCalendarEvent.eventEndDate">*</div></div></md-checkbox></div><ws-enum-combo min-length="uiSideMinLength" label-name="REPEATING_SPAN" query-param="true" required="isRepeatChecked" disable="disabledFormFields || !isRepeatChecked || (pageState == 'edit' && !isEnabled)" name-value-list="WSCalendarEvent.repeatFrequency" query-url="repeatFrequency.queryUrl" query-parameter="repeatFrequency.queryParameter" json-parameter="repeatFrequency.jsonParameter"></ws-enum-combo><div class="col-sm-12 col-md-10 col-lg-10" ng-show="isWeekEnabled"><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isMondayRepeat">{{'MON'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isTuesdayRepeat">{{'TUE'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isWednesdayRepeat">{{'WED'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isThursdayRepeat">{{'THU'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isFridayRepeat">{{'FRI'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isSaturdayRepeat">{{'SAT'|translate}}</md-checkbox><md-checkbox ng-disabled="(pageState == 'edit' && !isEnabled)" ng-model="WSCalendarEvent.isSundayRepeat">{{'SUN'|translate}}</md-checkbox></div></div></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><h3>{{'APPOINTMENT_PREFERENCES'|translate}}</h3></div><custom-number-field css-class="col-sm-12 col-md-4 col-lg-4" label-name="RESTRICT_ADVANCE_APPOINTMENT" model-name="WSCalendarEvent.advanceBookingDaysLimit" regex="^[0-9]*$" max-value="30" disable="disabledFormFields" required="false"></custom-number-field><div ng-if="calendarData.entityType.code!='CAL_EQUIPMENT'" class="col-sm-12 col-md-4 col-lg-4" style="margin-top: 8px"><p style="margin-top: -12px; padding-bottom: 14px">{{'PAYMENT_TO_BE_TAKEN'|translate}}</p><md-radio-group ng-model="WSCalendarEvent.paymentToBeTaken" layout="row"><md-radio-button value="AT_BOOKING">{{'BOOKING'|translate}}</md-radio-button><md-radio-button value="AT_CHECKIN">{{'BY_CHECK_IN'|translate}}</md-radio-button><md-radio-button value="AT_CHECKOUT">{{'AT_CHECK_OUT'|translate}}</md-radio-button></md-radio-group></div></div><div class="row" ng-if="calendarData.entityType.code!='CAL_EQUIPMENT'"><div class="col-sm-12 col-md-4 col-lg-4" style="padding-top:16px"><div layout-wrap layout-gt-sm="row"><div flex-gt-sm="50"><md-checkbox ng-model="WSCalendarEvent.isAutoRefund">{{'AUTO_REFUND'|translate}}</md-checkbox></div></div></div><custom-number-field regex="^[0-9]*$" css-class="col-sm-12 col-md-4 col-lg-4" label-name="AUTO_REFUND_HRS" model-name="WSCalendarEvent.autoRefundTimeLimit" type="INTEGER" decimal-digit="2" max-value="180" disable="disabledFormFields || isAutoRefundDisabled" required="isAutoRefundRequired"></custom-number-field></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><md-button class="md-raised md-warn" ng-click="saveCalendarEvent(calendarEventForm)" ng-disabled="isRecordSaved==true || !calendarEventForm.$valid" type="button">{{'SAVE'|translate}}</md-button></div><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"><button class="btn btn-default nextBtn btn-md pull-right" ng-show="pageState==='edit'" type="button"><span class="nextTextBtn">{{'EVENT_EXCEPTION'|translate}}</span> <i class="fa fa-angle-right"></i></button></div></div></div><div class="setup-content" id="step-2"><div><h3>{{'EVENT_EXCEPTION'|translate}}<span class="titleNum"> {{'2_of_2'|translate}}</span></h3><div><h5><b>{{'ORIGINAL_EVENT_DETAILS'|translate}}</b></h5></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12 listDisplay"><div class="col-sm-12 col-md-4 col-lg-4 list">{{'CALENDAR'|translate}}: <b>{{calendarEvent.calendarName}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'ORG_LOCATION'|translate}}: <b>{{calendarEvent.organizationLocationName}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">&nbsp;</div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'ENTITY_TYPE'|translate}}: <b>{{calendarEvent.entityTypeDetails.value}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'ENTITY_NAME'|translate}}: <b>{{calendarEvent.entityName}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'EVENT_TYPE'|translate}}:<b>{{calendarEvent.eventType.value}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'EVENT_NAME'|translate}}: <b>{{calendarEvent.eventName}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'START_DATE'|translate}}:<b>{{calendarEvent.eventStartDate | timestampToDate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'END_DATE'|translate}}:<b>{{calendarEvent.eventEndDate | timestampToDate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'APPOINTMENT_TYPE'|translate}}:<b>{{calendarEvent.appointmentType |translate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'SLOT_SIZE_MINUTES'|translate}}: <b>{{calendarEvent.slotSize}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'IS_ROUND_ROBIN'|translate}}: <b>{{calendarEvent.isRoundRobin |translate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'CAPACITY'|translate}}: <b>{{calendarEvent.capacity |translate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'PROCESS_ROOM'|translate}}: <b>{{calendarEvent.roomName}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'START_TIME'|translate}}: <b>{{calendarEvent.eventStartTime | time24to12Hour}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'END_TIME'|translate}}: <b>{{calendarEvent.eventEndTime | time24to12Hour}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 list">{{'REPEAT_EVENT'|translate}}: <b>{{calendarEvent.isRepeat |translate}}</b></div></div></div></div><div class="padding-b-10 padding-t-20 ng-scope pull-left fullWidth"><div class="padding-0"><md-button type="button" class="md-raised md-warn" ng-click="manageEventException(null,'add')"><i class="fa fa-plus"></i> {{'ADD_NEW' | translate}}</md-button><div class="pull-right"><md-menu><md-button type="button" class="md-raised" ng-click="$mdOpenMenu($event)">{{'SHOW'|translate}} {{itemPerPage}}</md-button><md-menu-content width="3" ng-init="maxRecordsAr = [10,25,50,100]"><md-menu-item ng-repeat="item in maxRecordsAr"><md-button ng-click="setMaxRecords(item)"><span md-menu-align-target>{{'SHOW'|translate}} {{item}} </span></md-button></md-menu-item></md-menu-content></md-menu></div></div></div><div class="table-responsive foo"><table datatable="ng" dt-options="options" dt-column-defs="dtColumnDefs" class="table table-striped table-hover rwd-table" width="100%"><thead><tr><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="EXCEPTION_DATE" data-priority="1">{{'DATE' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="EVENT_START_TIME">{{'START_TIME' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="EVENT_END_TIME">{{'END_TIME' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="APPOINTMENT_TYPE">{{'APPOINTMENT_TYPE' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="SLOT_SIZE">{{'SLOT_SIZE_MINUTES' | translate}}</th><th>{{'CANCEL_EVENT_FOR_DAY' | translate}}</th><th>{{'IS_ROUND_ROBIN' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="CAPACITY">{{'CAPACITY' | translate}}</th><th sortable searchobject="searchCriteria" searchfunction="searchCalendarEventException()" name="PROCESS_ROOM">{{'PROCESS_ROOM' | translate}}</th></tr></thead><tbody><tr ng-repeat="row in WSEventExceptionList"><td><div class="btn-group"><a class="dropdown-toggle dropDownBtnLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{row.exceptionDate | timestampToDate}}</a><ul class="dropdown-menu"><li><a href="" ng-click="manageEventException(row,'edit')"><i class="fa fa-pencil"></i>{{"EDIT" | translate}}</a></li><li><a href="" ng-click="manageEventException(row,'view')"><i class="fa fa-pencil"></i>{{"VIEW" | translate}}</a></li></ul></div></td><td>{{row.startTime | time24to12Hour}}</td><td>{{row.endTime | time24to12Hour}}</td><td>{{row.appointmentType | translate}}</td><td>{{row.slotSize}}</td><td>{{row.isCancelled | translate}}</td><td>{{row.isRoundRobin | translate}}</td><td>{{row.capacity}}</td><td>{{row.roomName}}</td></tr></tbody></table><div ng-show="totalItems > 0"><div class="pageRecord"><span>{{'SHOWING' | translate}} {{pagingInfo.startRecord + '-' + pagingInfo.endRecord + ' of ' + totalItems + ' items'}}</span></div><div class="text-center"><uib-pagination max-size="4" total-items="totalItems" ng-model="currentPage" items-per-page="itemPerPage" ng-change="pageChanged()" boundary-links="true" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooterSteps"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-0"><button class="btn btn-default prevBtn btn-md pull-left" type="button"><span class="previousTextBtn">{{'DEFINE_EVENT'|translate}}</span> <i class="fa fa-angle-left"></i></button></div><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button></div></div></div></form></div><script src="components/js/custom/custom.js"></script>
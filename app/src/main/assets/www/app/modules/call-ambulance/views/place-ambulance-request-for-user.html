<md-dialog aria-label="Add test group link" ng-cloak class="width-dialog-1000"><ng-form name="placeRequestForm" class="fileUploadFormHolder" ng-cloak><md-toolbar><div class="md-toolbar-tools" style="height:58px !important"><h2>{{('ADD_NEW_AMBULANCE_REQUEST'|translate)}}</h2><span flex></span></div></md-toolbar><div class="padding-b-10"><md-dialog-content ng-show="!showMap"><div class="md-dialog-content"><h4>{{'USER_DETAILS' | translate}}</h4><div class="row padding-t-5"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'CELL_NO'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="WSClientExtraData.cellNo" name="cell1" ng-maxlength="10" ng-pattern="/^[0-9]{10}$/" id="cell1" ng-disabled="userSelectedDisabled || clientDisabled || editDisabled || disableUser" ng-required="true" ng-blur="checkUsersMobileNo()"><div ng-messages="placeRequestForm.cell1.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="pattern">{{'INVALID_MOBILE' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4" ng-show="userList.length>1"><md-input-container class="md-block"><label>{{'SELECT_USER'|translate}}</label><md-select ng-model="WSClientExtraData.selectUserId" name="userId" id="userId" ng-change="checkOrgLocClient(WSClientExtraData.selectUserId,orgLocation);getUserDetails(WSClientExtraData.selectUserId)" ng-disabled="viewmode || reqTypeVisible"><md-option ng-selected="$index==0?true:false" ng-repeat="userId in userList" ng-value="userId">{{userId.displayName}}</md-option></md-select><div ng-messages="placeRequestForm.userId.$error"></div></md-input-container></div><referred-component referred-data="user.userData" label="USER" disable="clientDisabled || editDisabled" required="true" record-type="{{WSClient.clientType}}" editable="true"></referred-component><div class="col-sm-12 col-md-4 col-lg-4" ng-if="userList.length == 0 || userList.length == 1"><md-input-container><label>{{'EMAIL'|translate}}</label><input ng-model="WSClientExtraData.email" name="email1" ng-maxlength="100" ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/" id="email1" ng-disabled="userSelectedDisabled || clientDisabled || editDisabled || disableUser"><div ng-messages="placeRequestForm.email1.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="pattern">{{'ENTER_VALID_EMAIL' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4" ng-if="userList.length>1"><md-input-container><label>{{'EMAIL'|translate}}</label><input ng-model="WSClientExtraData.email" name="email1" ng-maxlength="100" ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/" id="email1" ng-disabled="userSelectedDisabled || clientDisabled || editDisabled || disableUser"><div ng-messages="placeRequestForm.email1.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="pattern">{{'ENTER_VALID_EMAIL' |translate}}</div></div></md-input-container></div><pick-list-dropdown pick-list-value="picklistData.ambulanceType" required="true" type="AMBULANCE_TYPE" label="AMBULANCE_TYPE"></pick-list-dropdown></div><h4>{{'ADDRESS_INFO' | translate}}</h4><div class="row"><div class="col-lg-11 col-md-11 col-sm-10 col-xs-10 padding-t-5"><md-input-container><label>{{'ADDRESS'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="addressInfo.addressLine1" name="addressLine1" ng-maxlength="300" id="addressLine1" ng-blur="addressTextValue(addressInfo.addressLine1,'addressLine1');setAddress(addressInfo.addressLine1,0)" ng-disabled="disabledFormFields" required><div ng-messages="placeRequestForm.addressLine1.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-md-1 col-lg-1 col-sm-1 col-xs-1 pull-left" style="margin-left: -15px"><button type="button" class="btn" ng-click="findRequester('search-hospitals')" tooltip-placement="bottom" uib-tooltip="{{'LOCATE_ON_MAP'|translate}}"><i class="fa fa-map-marker fa-lg" aria-hidden="true"></i></button></div></div><div class="row"><div class="col-lg-4"><md-input-container><label>{{'ORG_COUNTRY'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="addressInfo.country" name="orgCountry" ng-maxlength="50" id="OrgCountry" autocomplete="off" uib-typeahead="countryData.value for countryData in getOrgCountries($viewValue)" typeahead-min-length="getSmartSearchMinLength('countryMinLength')" typeahead-editable="false" typeahead-on-select="onCountrySelect($item, $model, $label);" ng-blur="validateValue(WSOrganizationLocationAddress.country,'country');setAddress(WSOrganizationLocationAddress.country,6)" ng-disabled="disabledFormFields" required><div ng-messages="placeRequestForm.orgCountry.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-lg-4"><md-input-container><label>{{'ORG_STATE'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="addressInfo.state" name="orgState" ng-maxlength="50" id="OrgState" autocomplete="off" uib-typeahead="stateData.value for stateData in getOrgState($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('stateMinLength')" typeahead-editable="false" typeahead-on-select="onStateSelect($item, $model, $label)" ng-disabled="stateDisabled || disabledFormFields" ng-blur="validateValue(WSOrganizationLocationAddress.state,'state');setAddress(WSOrganizationLocationAddress.state,5)" required><div ng-messages="placeRequestForm.orgState.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-lg-4"><md-input-container><label>{{'ORG_DIST'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="addressInfo.district" name="orgDist" ng-maxlength="50" id="OrgDist" autocomplete="off" uib-typeahead="districtData.value for districtData in getOrgDists($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('DistrictMinLength')" typeahead-editable="false" typeahead-on-select="onDistrictSelect($item, $model, $label)" ng-disabled="cityDistValue || disabledFormFields" ng-blur="validateValue(WSOrganizationLocationAddress.district,'district');setAddress(WSOrganizationLocationAddress.district,4)" required><div ng-messages="placeRequestForm.orgDist.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-lg-4"><md-input-container><label>{{'ORG_CITY'|translate}}<span class="mandatoryStar">*</span></label><input name="orgCity" ng-maxlength="50" id="OrgCity" ng-model="addressInfo.city" autocomplete="off" uib-typeahead="cityData.value for cityData in getOrgCities($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('cityMinLength')" typeahead-editable="false" typeahead-on-select="onCitySelect($item, $model, $label)" ng-blur="setAddress(WSOrganizationLocationAddress.district,3)" ng-disabled="cityDistValue || disabledFormFields" required><div ng-messages="placeRequestForm.orgCity.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-lg-4"><md-input-container><label>{{'POSTAL_CODE'|translate}}</label><input ng-model="addressInfo.postalCode" name="postalCode" ng-maxlength="15" id="postalCode" ng-blur="addressTextValue(addressInfo.postalCode,'postalCode');setAddress(addressInfo.postalCode,7)" ng-disabled="disabledFormFields"><div ng-messages="placeRequestForm.postalCode.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div></div></md-dialog-content><md-dialog-content ng-show="showMap"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><ng-map default-style="false" id="map" center="{{currentPosition}}" zoom="16" style="height:550px;width:100%" ng-if="mapDisplay"><marker position="{{currentPosition}}" animation="DROP" on-dragend="getPosition($event)" draggable="true"></marker></ng-map></div><div class="col-xs-12 padding-t-10"><div class="pull-right"><md-button class="md-raised md-button md-ink-ripple" type="button" ng-click="saveAddress()">{{'BACK'|translate}}</md-button><md-button class="md-raised md-warn md-button md-ink-ripple" type="button" ng-click="saveAddress()">{{'SAVE_ADDRESS'|translate}}</md-button></div></div></md-dialog-content></div><div class="col-xs-12 padding-b-10" ng-show="!showMap"><div class="pull-right"><md-button class="md-raised md-button md-ink-ripple" type="button" ng-click="hide()">{{'CANCEL'|translate}}</md-button><md-button class="md-raised md-warn md-button md-ink-ripple" type="button" ng-click="placeAmbulanceRequest()" ng-disabled="placeRequestForm.$invalid">{{'SAVE_REQUEST'|translate}}</md-button></div></div><br><br></ng-form></md-dialog>
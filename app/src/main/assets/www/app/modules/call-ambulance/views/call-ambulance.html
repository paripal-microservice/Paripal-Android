<div style="background-color:#FFF;padding: 15px"><div class="pageTitle"><span>{{'CALL_AMBULANCE' | translate}}</span><help-directive help-id="CALL_AMBULANCE" class="divContainer"></help-directive></div><div class="filterPanel filter"><uib-accordion><uib-accordion-group is-open="status.open"><uib-accordion-heading><i class="fa fa-filter"></i> <span>&nbsp;{{'FILTER' | translate}}</span> <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i></uib-accordion-heading><form name="listForm" class="form-horizontal panel-body-top" id="form1" runat="server" autocomplete="off" novalidate="novalidate"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="row"><ws-name-value-editable min-length="cityMinLength" label-name="CITY" disable="false" required="false" editable="false" name-value-list="filter.city" query-search-key="cityName" query-url="city.queryUrl" query-parameter="city.queryParameter" json-parameter="city.jsonParameter"></ws-name-value-editable><custom-number-field label-name="PINCODE" model-name="filter.postalCode" regex="^[0-9]{1,10}$" maxlength="10"></custom-number-field><custom-text-field label-name="LANDMARK" model-name="filter.landmark" disable="false" required="false" maxlength="20"></custom-text-field></div><div class="row"><pick-list-dropdown pick-list-value="filterCriteria.ambulanceType" type="AMBULANCE_TYPE" label="AMBULANCE_TYPE"></pick-list-dropdown></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><div class="pull-left" style="padding: 14px 0"><b>{{'RADIUS' | translate}}</b> :</div><div class="pull-left" style="width: 50px !important"><md-input-container style="width: 50px !important; height: 37px"><input flex="" aria-label="" type="number" ng-model="filter.slider" aria-controls="radius-slider" ng-change="changeRadius()" style="height: 30px"></md-input-container></div><div class="pull-left" style="padding: 14px 0">({{'KM' | translate}})</div></div></div><div class="row"><div class="col-sm-12 col-md-12 col-lg-12"><md-slider-container flex><md-slider flex="" md-discrete="" ng-model="filter.slider" min="{{commonConstants.minMapRadius}}" max="{{commonConstants.maxMapRadius}}" step="{{commonConstants.radiusStep}}" ng-change="changeRadius()" aria-label="bass" class="md-warn"></md-slider></md-slider-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-t-b-10 padding-0 textAlign-R wizardFooter"><md-button type="button" ng-click="cancel()" class="md-raised" ng-if="showCancelBtn">{{"CANCEL"|translate}}</md-button><md-button type="reset" ng-click="clear()" class="md-raised">{{"CLEAR"|translate}}</md-button><md-button type="button" class="md-raised md-warn" ng-click="applyFilter()">{{"APPLY"|translate}}</md-button></div></div></div></form></uib-accordion-group></uib-accordion></div><div class="location-mark"><span></span></div><div class="row padding-t-10"><div class="col-sm-12 col-md-9 col-lg-9"><spinner name="searchHospSpinner" img-src="{{pageLoaderImg}}" show="searchHospSpinner"></spinner><ng-map default-style="false" id="map" center="{{currentLocation}}" zoom="{{defaultZoom}}" style="height:550px;width:100%"><marker id="id_{{ambulance.id}}" position="{{ambulance.location}}" on-click="selectAmbulance(ambulance)" ng-repeat="ambulance in ambulanceList" draggable="{{ambulance.isDraggable}}" on-dragend="changeLocation($event)" on-position-changed="getMarkerPosition()" icon="{{ambulance.id ==  selectedId?iconsList.SELECTED_ICONS[ambulance.ambulanceIconsEnum]:ambulance.ambulanceIcon}}"></marker><shape id="circle" name="circle" centered="false" stroke-color="#ffad33" stroke-opacity="0.7" stroke-weight="2.5" center="{{currentLocation}}" radius="{{filter.radius}}" on-dragend="changeLocation($event)" editable="false"></shape><info-window id="ambulanceDetails"><div ng-non-bindable="" class="location-details"><div class="head"><h3>{{'AMBULANCE_DETAILS' | translate}}</h3>Ambulance Details</div><div class="table-holder table-black"><table class="table"><tr><td width="60px" class="graytext">{{'TYPE' | translate}}:</td><td>{{ambulanceLocationDetails.ambulanceType}}</td></tr><tr><td class="graytext">{{'VEHICLE_NO' | translate}}:</td><td>{{ambulanceLocationDetails.vehicleNo}}</td></tr><tr><td class="graytext">{{'MAKE' | translate}}:</td><td>{{ambulanceLocationDetails.make}} , {{ambulanceLocationDetails.color}}</td></tr></table></div><div class="table-holder"><table class="table"><tr><td width="25px" class="icon"><i class="fa fa-plane" aria-hidden="true"></i></td><td><b>{{'DISTANCE_FROM_MY_LOCATION' | translate}}</b><br>{{map.directionsRenderers[0].directions.routes[0].legs[0].distance.text}}</td></tr><tr><td class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i></td><td><b>{{'LOCATION_ADDRESS' | translate}}</b><br>{{locationAddress}}</td></tr></table></div><div><md-button type="button" ng-if="requestNotPlaced" class="md-raised md-warn pull-right" ng-click="confirmSelection($event)">{{"PLACE_NEW_REQUEST"|translate}}</md-button></div></div></info-window><info-window id="userDetails"><div ng-non-bindable="" class="location-details"><div class="head"><h3>{{'MY_LOCATION' | translate}}</h3></div><div><table class="table"><tr><td width="25px" class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i></td><td>{{userAddress}}</td></tr></table></div></div></info-window><info-window id="locationDetails"><div ng-non-bindable="" class="location-details"><div class="head"><h3>{{ambulanceLocationDetails.orgLocName}}</h3><span class="star-rating" star-rating rating-value="address.ratings" data-max="5" readonly="true"></span></div><div class="table-holder table-green"><table class="table"><tr ng-if="ambulanceLocationDetails.advanceTypeCount"><td style="width: 25px"><span class="green-no">{{ambulanceLocationDetails.advanceTypeCount}}</span></td><td>{{'ADVANCED_LIFE_SUPPORT_AMBULANCE' | translate}}</td></tr><tr ng-if="ambulanceLocationDetails.basicTypeCount"><td style="width: 25px"><span class="green-no">{{ambulanceLocationDetails.basicTypeCount}}</span></td><td>{{'BASIC_LIFE_SUPPORT_AMBULANCE' | translate}}</td></tr><tr ng-if="ambulanceLocationDetails.patientTypeCount"><td style="width: 25px"><span class="green-no">{{ambulanceLocationDetails.patientTypeCount}}</span></td><td>{{'PATIENT_LIFE_SUPPORT_AMBULANCE' | translate}}</td></tr></table></div><div class="table-holder"><table class="table"><tr><td width="25px" class="icon"><i class="distance-between" aria-hidden="true"></i></td><td><b>{{'DISTANCE_FROM_MY_LOCATION' | translate}}</b><br>{{map.directionsRenderers[0].directions.routes[0].legs[0].distance.text}}</td></tr><tr><td class="icon"><i class="fa fa-map-marker" aria-hidden="true"></i></td><td><b>{{'LOCATION_ADDRESS' | translate}}</b><br>{{ambulanceLocationDetails.address}}<br>{{ambulanceLocationDetails.cityName}}</td></tr></table></div><div><md-button type="button" ng-if="requestNotPlaced" class="md-raised md-warn pull-right" ng-click="confirmSelection($event)">{{"PLACE_NEW_REQUEST"|translate}}</md-button></div></div></info-window><directions draggable="true" suppress-markers="true" panel="direction" travel-mode="{{data.travelMode.value}}" origin="{{currentLocation}}" destination="{{destination}}" suppressmarkers="true"></directions></ng-map></div><div class="col-sm-12 col-md-3 col-lg-3 map-right"><div><div><p class="ambulance-info">{{'AMBULANCE_INFO' | translate}}</p><br></div><div ng-if="requestNotPlaced"><md-input-container><label>{{"EMERGENCY_ADDRESS"|translate}}</label><textarea ng-blur="updateaddress(newAddressFieldCheck)" ng-model="newAddressFieldCheck" ng-disabled="false" rows="2" style="overflow-y: scroll"></textarea></md-input-container><md-input-container><md-checkbox ng-model="confirmEnteredAddress" ng-change="checkAdd(true)"><span>{{'CONFIRM_ADDRESS'|translate}}</span></md-checkbox></md-input-container><md-input-container><label>{{"NO_OF_PATIENTS"|translate}}</label><input ng-model="noOfPatients" ng-maxlength="10" ng-disabled="true"></md-input-container><md-button type="button" class="md-raised md-warn fullWidth" style="margin-bottom: 10px" ng-if="requestNotPlaced" ng-click="sendRequestToAllAmbulance($event)">{{"PLACE_NEW_REQUEST"|translate}}</md-button><md-button type="button" class="md-raised md-warn fullWidth" ng-if="requestNotPlaced" ng-click="placeNewRequest($event)">{{"SELECT_PROVIDER_AND_PLACE_REQEUST"|translate}}</md-button><br><br></div><div ng-repeat="ambulanceType in ambulanceTypeList" class="ambulance-list-type" ng-class="ambulanceType.isSelected ? 'checkbox-btn-green' : 'checkbox-btn-blue'" ng-if="requestNotPlaced" ng-click="getAmbulanceByType(ambulanceType)"><span class="check"><i class="fa fa-ambulance" aria-hidden="true"></i></span> <span class="text">{{ambulanceType.value}}</span><br></div><div ng-if="requestNotPlaced"><md-slider-container flex style="float:left; width:100%"><br><span>{{'RADIUS' | translate}} : {{filter.slider}} ({{'KM' | translate}})</span><md-slider flex="" md-discrete="" ng-model="filter.slider" min="{{commonConstants.minMapRadius}}" max="{{commonConstants.maxMapRadius}}" step="{{commonConstants.radiusStep}}" ng-change="changeRadius()" aria-label="bass" class="md-warn"></md-slider></md-slider-container></div><div ng-if="requestNotPlaced">________________________________</div><div ng-if="requestNotAccepted"><md-button type="button" class="md-raised md-primary" ng-if="requestNotAccepted" ng-click="cancelUnAcceptedRequest($event)">{{"CANCEL_THIS_REQUEST"|translate}}</md-button><br><br></div><span class="green-info-text" ng-if="requestNotAccepted"><i class="fa fa-check" aria-hidden="true"></i>{{'NEARBY_AMBULANCE_SERVICES_HAVE_BEEN_NOTIFIED' | translate}}</span> <span class="green-info-text" ng-if="requestPlaced"><i class="fa fa-check" aria-hidden="true"></i>{{'REQUEST_PLACED' | translate}}</span><br><span class="green-info-text" ng-if="requestLastCancelled">{{'AMBULANCE_REQUEST_IS_CANCELLED_PLEASE_PLACE_NEW_REQUEST' | translate}}</span> <span class="green-info-text" ng-if="requestCancelled">{{'AMBULANCE_REQUEST_IS_CANCELLED' | translate}}</span><div class="table-holder-border table-black" ng-if="requestPlaced"><br><b>{{'DRIVER_DETAILS' | translate}}</b><table class="table table-border-none"><tr><td width="50px" class="graytext" rowspan="2"><span style="float: left; margin: 10px 5px"><img ng-if="!currentRequestData.driverPhoto" ng-src="app/images/user.jpg" class="img-circle special-img profileImg"> <img ng-if="currentRequestData.driverPhoto" ng-src="data:image/png;base64,{{currentRequestData.driverPhoto}}" class="img-circle special-img profileImg"></span></td></tr><tr><td>{{currentRequestData.driverName}}<br><br><md-button type="button" class="md-raised md-warn blue-btn"><i class="fa fa-phone" aria-hidden="true"></i> <a style="color:rgba(255,255,255,0.87)" href="tel:{{currentRequestData.driverContact}}">{{currentRequestData.driverContact}}</a></md-button></td></tr></table></div><div class="table-holder-border table-black" ng-if="requestPlaced"><br><b>{{'AMBULANCE_DETAILS' | translate}}</b><table class="table table-border-none"><tr><td width="70px" class="graytext">{{'TYPE' | translate}}:</td><td>{{currentRequestData.ambulanceType}}</td></tr><tr><td class="graytext">{{'VEHICLE_NO' | translate}}:</td><td>{{currentRequestData.vehicleNo}}</td></tr><tr><td class="graytext">{{'MAKE' | translate}}:</td><td>{{currentRequestData.make}} , {{currentRequestData.color}}</td></tr></table></div><br><md-button type="button" class="md-raised md-primary" ng-if="requestPlaced && patientNotPicked" ng-click="cancelCurrentRequest($event)">{{"CANCEL_THIS_REQUEST"|translate}}</md-button></div></div></div></div>
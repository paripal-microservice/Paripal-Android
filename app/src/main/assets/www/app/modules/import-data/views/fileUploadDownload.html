<md-dialog aria-label="Add test group link" ng-cloak><ng-form name="fileUploadDownloadForm" class="fileUploadFormHolder" ng-cloak><md-toolbar><div class="md-toolbar-tools" style="height:58px !important"><h2 ng-if="type == 'import'">{{'IMPORT_DATA'|translate}}</h2><h2 ng-if="type == 'download'">{{('DOWNLOAD'|translate)+" "+('TEMPLATE' | translate)}}</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel()" aria-label="Cancel"><i class="fa fa-times" aria-hidden="true"></i></md-button></div></md-toolbar><div class="padding-b-10" style="width:350px"><md-dialog-content><div class="md-dialog-content"><div><md-input-container><label ng-if="type == 'import'">{{'IMPORT_FOR' | translate}}</label><label ng-if="type == 'download'">{{'DOWNLOAD_FOR' | translate}}</label><md-select ng-model="userState" aria-label="Template for"><md-option ng-repeat="option in importOptions" ng-value="option" ng-selected="requestTypeCode == option.value?true:false">{{option.value | translate}}</md-option></md-select></md-input-container></div><div ng-if="type == 'download' && userState.value == 'CREATE_REQUEST_IMPORT'"><md-input-container class="md-block md-icon-right"><label>{{'START_DATE'|translate}}</label><input datepicker class="pointer" from-min-date="minDate" ng-change="getTillDate(createRequest.start)" ng-model="createRequest.startDate" ng-disabled="viewmode"><md-icon class="datepickerIcon ng-isolate-scope material-icons"></md-icon></md-input-container></div><div ng-if="type == 'download' && userState.value == 'CREATE_REQUEST_IMPORT'"><md-input-container class="md-block md-icon-right"><label>{{'END_DATE'|translate}}</label><input datepicker class="pointer" from-min-date="endDate" ng-model="createRequest.endDate" ng-disabled="viewmode"><md-icon class="datepickerIcon ng-isolate-scope material-icons"></md-icon></md-input-container></div><div ng-if="type == 'download' && userState.value == 'CREATE_REQUEST_IMPORT'"><md-input-container><label>{{'REQUEST_TYPE'|translate}}</label><md-select name="requestType" id="requestType" ng-model="createRequest.requestTypeName"><md-option ng-repeat="requestsType in requestType" ng-value="requestsType" ng-selected="((requestsType.id==createRequest.requestTypeName.requestType.id) || (requestTypeCode==requestsType.code))?true:false">{{requestsType.value}}</md-option></md-select></md-input-container></div><div><md-input-container><label>{{'SELECT_ORG'|translate}}<span ng-if="requiredOrgValue" class="mandatoryStar">*</span></label><input ng-model="organization" name="autocompleteFieldOrg" ng-maxlength="50" id="autocompleteFieldOrg" autocomplete="off" uib-typeahead="organizations as organizations.value for organizations in getOrganizations($viewValue)" typeahead-editable="false" typeahead-min-length="orgMinLength" typeahead-on-select="selectChangedOrg($item, $model, $label)" ng-blur="validateValue(orgLocValues.organization,'organization')" ng-required="requiredOrgValue" ng-disabled="disableOrgValue ||isPatientRecord"><div ng-messages="searchForm.autocompleteFieldOrg.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div><md-input-container><label>{{'SELECT_ORG_LOC'|translate}}<span ng-if="requiredOrgLocValue" class="mandatoryStar">*</span></label><input ng-model="orgLocation" name="autocompleteFieldOrgLoc" ng-maxlength="50" id="autocompleteFieldOrgLoc" autocomplete="off" uib-typeahead="orgLocations as orgLocations.value for orgLocations in getOrganizationLocations($viewValue)" typeahead-editable="false" typeahead-min-length="orgLocMinLength" typeahead-on-select="selectChangedOrgLoc($item, $model, $label)" ng-blur="validateValue(orgLocValues.organizationLocation,'orgLocation')" ng-required="requiredOrgLocValue" ng-disabled="disableOrgLocValue || isPatientRecord" typeahead-no-results="noResults"> <span ng-if="noResults" uib-dropdown uib-dropdown-toggle auto-close="disabled" is-open="true"><div class="uib-dropdown-menu">No results found</div></span><div ng-messages="searchForm.autocompleteFieldOrgLoc.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div><div ng-if="type == 'download'"><label style="margin-right:10px"><b>{{'TEMPLATE' | translate}} :</b></label><md-button class="md-raised md-warn" ng-click="downloadFile(createRequest,successCallback, errorCallback)"><i class="fa fa-download"></i> {{'DOWNLOAD' | translate}}</md-button></div><div ng-if="type == 'import'"><input type="file" name="file" id="file" class="inputfile" name="importOrgUserFile" file-model="fileObj.myFile"><label for="file" class="inputlabel"><i class="fa fa-upload"></i><b> {{'SELECT_FILE' | translate}}</b></label><label class="browse-file-input">{{fileObj.myFile.name}}</label></div></div></div></md-dialog-content></div><div class="col-xs-12 padding-b-10"><div class="pull-right"><button class="md-raised md-button md-ink-ripple" type="button" ng-click="cancel()" aria-label="Cancel"><span class="ng-binding ng-scope"><span class="ng-binding ng-scope">{{'CANCEL'|translate}}</span></span></button> <button class="md-warn md-raised md-button md-ink-ripple" type="submit" aria-label="Save" ng-click="uploadFile()" ng-if="type == 'import'"><span class="ng-binding ng-scope"><i class="fa" aria-hidden="true"></i> {{'IMPORT'|translate}}</span></button></div></div></ng-form></md-dialog>
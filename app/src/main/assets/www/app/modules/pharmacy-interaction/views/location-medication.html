<div class="pageTitle"><span>{{'LOCATION_MEDICATION'|translate}}</span></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-t-10 margin-b-10 padding-b-10"><form name="medLocationForm" ng-cloak><div class="row"><div class="col-xs-12 col-sm-12 col-md-3 col-lg-3"><spinner name="locationNameAutoCmp" img-src="{{autoCompletLoaderImg}}" show="locationNameAutoCmp" is-auto-complete="true"></spinner><md-input-container><label class="md-required">{{'LOCATION'|translate}}</label><input ng-model="medicationObj.organizationLocation" ng-required="true" name="userName" ng-maxlength="100" id="userObj" autocomplete="off" uib-typeahead="userObj as userObj.value for userObj in findLocation($viewValue)" typeahead-on-select="getLocationTaxes(medicationObj.organizationLocation)" typeahead-editable="commonConstants.typeaheadEditable" typeahead-min-length="getSmartSearchMinLength('userMinLength')" ng-disabled="pageState == 'edit'"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-3 col-lg-3"><md-input-container class="md-block"><label class="md-required">{{'MEDICATION'|translate}}</label><input type="text" name="medication" ng-model="medicationObj.medication" ng-disabled="pageState == 'edit'" autocomplete="off" uib-typeahead="medication as medication.value for medication in getMedication($viewValue)" typeahead-loading="loading" typeahead-on-select="getMedicationVariant(medicationObj.medication.id)" typeahead-min-length="getSmartSearchMinLength('medicationMinLength')" required><div ng-messages="medLocationForm.medication.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-3 col-lg-3"><md-input-container><label class="md-required">{{'DRUG_VARIANT'|translate}}</label><md-select ng-model="medicationObj.medicationVariant" ng-required="true" ng-disabled="pageState == 'edit'"><md-option ng-repeat="medicationVariant in medicationVariants" ng-value="medicationVariant" ng-selected="medicationVariant.id == diseaseMedication.medicationVariant.id ? true:false || medicationVariants.length == 1">{{medicationVariant.value}}</md-option></md-select></md-input-container></div><div class="col-sm-12 col-md-3 col-lg-3"><md-input-container><label>{{'PRICE'|translate}}<span ng-if="true" class="mandatoryStar">*</span></label><input ng-model="medicationObj.price" ng-required="true"><div ng-messages="medLocationForm.price.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-sm-12 col-md-4 col-lg-4 col-xs-12"><md-input-container><md-checkbox ng-model="medicationObj.whetherTaxesApplicable" aria-class="md-warn md-align-top-left" ng-disabled="!medicationObj.organizationLocation" ng-click="taxApplicableClicked(medicationObj.whetherTaxesApplicable)" flex>{{'WHETHER_TAX_APPLICABLE' |translate}}</md-checkbox></md-input-container></div></div><div class="row" ng-if="medicationObj.whetherTaxesApplicable"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-t-10 padding-0"><h4 class="col-lg-2 col-md-2 col-sm-4 col-xs-4 margin-t-10">{{'ADD_MORE' | translate}}</h4><div class="padding-l-0"><md-button class="md-raised md-warn md-button md-ink-ripple fa fa-plus availability-add-btn" ng-disabled="$next || pageState == 'view'" ng-click="addMed()" style="float: left"></md-button></div></div><div class="repeatDiv" ng-repeat="test in medicationTaxes"><div class="col-xs-12 col-sm-12 col-md-5 col-lg-5"><md-input-container><label>{{'TAX'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="testArray[$index]" name="summaryField" ng-maxlength="commonConstants.inputTypeMaxLength50" id="summaryField" autocomplete="off" uib-typeahead="tax as tax.tax for tax in testTax | filter:$viewValue" typeahead-loading="loading" typeahead-min-length="0" typeahead-on-select="onTaxSelect($item, $model, $label, $index)" typeahead-editable="commonConstants.typeaheadEditable" required><div ng-messages="medLocationForm.tax.$error "><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-5 col-lg-5 col-xs-12"><md-input-container><label>{{'PERCENTAGE_RATE'|translate}}<span ng-if="true" class="mandatoryStar">*</span></label><input ng-model="mappedTaxes[$index].percentage" ng-required="true"><div ng-messages="medLocationForm.perRate.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><md-button class="md-raised md-warn availability-remove-btn fa fa-minus" ng-disabled="medicationTaxes.length == 1" ng-click="removeMed($index)" style="float: left; margin-left: 18px"></md-button></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-8 col-sm-8 col-md-12 col-lg-12 padding-0 textAlign-C"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><md-button class="md-raised md-warn" ng-disabled="!medLocationForm.$valid" ng-click="submitLocMed()">{{'SAVE'|translate}}</md-button></div></div></form></div>
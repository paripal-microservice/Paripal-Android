<div class="pageTitle treepageTitle"><span>{{'ADVANCED_SHARE_VPR'|translate}}</span></div><form name="sharingform"><div class="tree-holder col-sm-12 col-md-12 col-lg-12" style="padding:0 0 20px"><div><div class="col-sm-12 col-md-12 col-lg-12" style="margin-top: 20px"><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'SHARED_BY'|translate}}<span class="mandatoryStar">*</span></label><input ng-model="loggedInUser" name="status" ng-disabled="true" ng-required="true"></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{'SHARE_TILL_DATE'|translate}}<span class="mandatoryStar">*</span></label><input datepicker class="pointer" ng-model="WSAdvanceSharing.shareValidTill" from-min-date="minDateValidFrom" name="shareTill" ng-required="true"><md-icon class="datepickerIcon"></md-icon><div ng-messages="sharingform.shareTill.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-sm-12 col-md-4 col-lg-4"><md-input-container><label>{{ 'SHARE_WITH_USER' |translate}}<span class="mandatoryStar">*</span></label><input ng-model="sharedWith" name="user" ng-maxlength="50" id="user" autocomplete="off" uib-typeahead="referredDataValues.value for referredDataValues in getUsers($viewValue)" typeahead-min-length="getSmartSearchMinLength('userMinLength')" typeahead-on-select="onUserSelect($item, $model, $label)" ng-required="true" typeahead-editable="false"><div ng-messages="sharingform.user.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div><div ng-message="pattern">{{'PATTERN_ERR' |translate}}</div></div></md-input-container></div></div></div><div><div class="col-xs-12 col-sm-12 col-lg-12 col-md-12" style="padding: 0 30px"><md-input-container><label>{{'ENTER_SHARER_COMMENT'|translate}}</label><input ng-model="WSAdvanceSharing.sharedByComments" name="sharerComment"></md-input-container></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="textAlign-R"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><md-button class="md-raised md-warn" ng-disabled="!sharingform.$valid" ng-click="saveSharedDetails()">{{'CONFIRM_SHARE'|translate}}</md-button></div></div><div><div class="tree well tree-holder"><div class="row"><div class="col-sm-12 col-md-6"><h4>Share Selections</h4></div><div class="col-sm-12 col-md-6"><span class="pull-right" style="margin:0 10px"><a ng-click="expandAll()">Expand details</a></span> <span class="pull-right" style="margin:0 10px"><a ng-click="collapseAll()">Collapse details</a></span> <span class="pull-right" style="margin:0 10px"><a ng-click="selectAll()">Select All</a></span></div></div><ul class="padding-0 tree-margin-0 first-level" ng-if="advanceSharingList.length > 0"><li ng-repeat="diseaseVarientList in advanceSharingList"><div class="list" ng-class="{'selected': diseaseVarientList.isSelected }"><div class="pull-left tree-width90" ng-click="diseaseVarientPanel(diseaseVarientList)"><i class="fa" ng-class="{'fa-folder-open': diseaseVarientList.isFolder, 'fa-folder': !diseaseVarientList.isFolder}"></i> {{diseaseVarientList.entityType |translate}}: <b>{{diseaseVarientList.entityName}}</b></div><div class="pull-left tree-width10"><span class="pull-right"><i class="fa fa-info-circle" ng-if="false" ng-class="{'info-selected' : diseaseVarientList.isInfo }" aria-hidden="true" ng-click="infoClick($event, diseaseVarientList,'#diseaseVarient-'+$index)"></i><md-checkbox ng-click="diseaseVarientChecked(diseaseVarientList,diseaseVarientList.isSelected)" ng-model="diseaseVarientList.isSelected"></md-checkbox></span></div></div><div ng-attr-id="{{ 'diseaseVarient-' + $index }}" class="info-text" ng-if="false"><div class="col-sm-12 col-md-4 col-lg-4 part-one">From: <b>{{diseaseVarientList.dateStart | timestampToDate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 part-two">To: <b>{{diseaseVarientList.dateEnd | timestampToDate}}</b></div></div><ul class="second-level"><li ng-repeat="treatmentTypes in diseaseVarientList.children" ng-if="treatmentTypes.isCollapsible"><div class="list" ng-class="{'selected' : treatmentTypes.isSelected }"><div class="pull-left tree-width90" ng-click="treatmentTypePanel(treatmentTypes)"><i class="fa" ng-class="{'fa-folder-open': treatmentTypes.isFolder, 'fa-folder': !treatmentTypes.isFolder}"></i> {{treatmentTypes.entityType |translate}}: <b>{{treatmentTypes.entityName}}</b></div><div class="pull-left tree-width10"><span class="pull-right"><i class="fa fa-info-circle noclick inpitclick" ng-class="{'info-selected' : treatmentTypes.isInfo }" aria-hidden="true" ng-click="infoClick($event, treatmentTypes,'#treatmentType-'+$index)"></i><md-checkbox ng-click="treatmentTypeChecked(treatmentTypes,treatmentTypes.isSelected)" ng-model="treatmentTypes.isSelected"></md-checkbox></span></div></div><div ng-attr-id="{{ 'treatmentType-' + $index }}" class="info-text" ng-if="treatmentTypes.isInfo"><div class="col-sm-12 col-md-4 col-lg-4 part-one">From: <b>{{treatmentTypes.dateStart | timestampToDate}}</b></div><div class="col-sm-12 col-md-4 col-lg-4 part-two">To: <b>{{treatmentTypes.dateEnd | timestampToDate}}</b></div></div><ul class="third-level"><li ng-repeat="treatmentRecords in treatmentTypes.children" ng-if="treatmentRecords.isCollapsible"><div class="list" ng-class="{'selected' : treatmentRecords.isSelected  }"><div class="pull-left tree-width90" ng-click="treatmentRecordPanel(treatmentRecords)"><i class="fa" ng-class="{'fa-folder-open': treatmentRecords.isFolder, 'fa-folder': !treatmentRecords.isFolder}"></i> {{treatmentRecords.entityType |translate}}: <b>{{treatmentRecords.entityName}}</b></div><div class="pull-left tree-width10"><span class="pull-right"><i class="fa fa-info-circle noclick inpitclick" ng-class="{'info-selected' : treatmentRecords.isInfo }" aria-hidden="true" ng-click="infoClick($event, treatmentRecords,'#treatmentRecord-'+$index)"></i><md-checkbox ng-model="treatmentRecords.isSelected" ng-click="treatmentRecordChecked(treatmentRecords,treatmentRecords.isSelected)"></md-checkbox></span></div></div><div ng-attr-id="{{ 'treatmentRecord-' + $index }}" class="info-text" ng-if="treatmentRecords.isInfo"><div class="col-sm-12 col-md-3 col-lg-3 part-one">From: <b>{{treatmentRecords.dateStart | timestampToDate}}</b></div><div class="col-sm-12 col-md-3 col-lg-3 part-two">To: <b>{{treatmentRecords.dateEnd | timestampToDate}}</b></div><div class="col-sm-12 col-md-6 col-lg-6 part-three">Last Doctor: <b>{{treatmentRecords.doctor.value}}</b></div></div><ul class="fourth-level"><li ng-repeat="appointments in treatmentRecords.children" ng-if="appointments.isCollapsible"><div class="list" ng-class="{'selected' : appointments.isSelected }"><div class="pull-left tree-width90" ng-click="appointmentPanel(appointments)"><i class="fa" ng-class="{'fa-folder-open': appointments.isFolder, 'fa-folder': !appointments.isFolder}"></i>{{appointments.entityType |translate}}: <b>{{appointments.entityName}}</b></div><div class="pull-left tree-width10"><span class="pull-right"><i class="fa fa-info-circle noclick inpitclick" ng-class="{'info-selected' : appointments.isInfo }" aria-hidden="true" ng-click="infoClick($event, appointments,'#appointment-'+$index)"></i><md-checkbox ng-model="appointments.isSelected" ng-click="appointmentChecked(appointments,appointments.isSelected)"></md-checkbox></span></div></div><div ng-attr-id="{{ 'appointment-' + $index }}" class="info-text" ng-if="appointments.isInfo"><div class="col-sm-12 col-md-4 col-lg-4 part-one">Date: <b>{{appointments.date | timestampToDate}}</b></div><div class="col-sm-12 col-md-6 col-lg-6 part-three">Last Doctor: <b>{{appointments.doctor.value}}</b></div></div><ul class="fifth-level"><li ng-repeat="appointmentDetails in appointments.children | orderBy: '-entityType'" ng-if="appointmentDetails.isCollapsible"><div class="list" ng-class="{'selected' : appointmentDetails.isSelected }"><div class="pull-left tree-width90"><i class="fa fa-circle" aria-hidden="true"></i> {{appointmentDetails.entityType |translate}}</div><div class="pull-left tree-width10"><span class="pull-right"><i class="fa fa-info-circle" ng-class="{'info-selected' : appointmentDetails.isInfo }" aria-hidden="true" ng-click="infoClick($event, appointmentDetails,'#appointmentDetail-'+$index)"></i><md-checkbox ng-model="appointmentDetails.isSelected" ng-click="appointmentDetailChecked(appointmentDetails,appointmentDetails.isSelected)"></md-checkbox></span></div></div><div ng-attr-id="{{ 'appointmentDetail-' + $index }}" class="info-text" ng-if="appointmentDetails.isInfo"><div class="col-sm-12 col-md-3 col-lg-3 part-one" ng-if="appointmentDetails.entityType == 'PRESCRIPTION'">Date: <b>{{appointmentDetails.date | timestampToDate}}</b></div><div class="col-sm-12 col-md-3 col-lg-3 part-one" ng-if="appointmentDetails.entityType == 'DOCUMENT'">Date: <b>{{appointmentDetails.dateStart | timestampToDate}}</b></div><div class="col-sm-12 col-md-6 col-lg-6 part-three" ng-if="appointmentDetails.entityType == 'DOCUMENT'">Name: <b>{{appointmentDetails.entityName}}</b></div></div></li></ul></li></ul></li></ul></li></ul></li></ul></div></div></div></form>
<div class="pageTitle"><span>{{'MNGE_USR_INC'|translate}}</span><help-directive help-id="MNGE_USR_INC" class="divContainer"></help-directive></div><div class="stepwizard"><div class="stepwizard-row setup-panel"><div class="stepwizard-step"><a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-tint" aria-hidden="true"></i></a></div></div></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelBorder padding-0 wizard"><spinner name="addOrgLocSpinner" img-src="{{pageLoaderImg}}" show="addOrgLocSpinner"></spinner><form name="addUserIncident" class="form-horizontal" autocomplete="off" novalidate><div class="col-xs-12"><h3>{{'MNGE_USR_INC'|translate}}</h3><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-hide="true"><md-input-container class="md-block"><label>{{'INC_ID'|translate}}</label><input type="text" ng-model="userIncident.incidentId" name="incidentId" id="incidentId" ng-disabled="viewmode || field || !viewMode"></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'USER'|translate}} <span style="color:red">*</span></label><input ng-model="userIncident.user" ng-readonly="userReadOnly" name="userName" id="userName" autocomplete="off" uib-typeahead="user as user.value for user in getUserNamesForRoleHistory($viewValue)" typeahead-on-select="getDisease(userIncident.user.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('userMinLength')" required ng-disabled="viewmode || whethersub|| editmode"><div ng-messages="addUserIncident.userName.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label>{{'LOCATION'|translate}}<span style="color:red">*</span></label><input ng-model="userIncident.location" ng-disabled="viewmode || whethersub" ng-readonly="userReadOnly" name="location" id="location" autocomplete="off" uib-typeahead="location as location.value for location in getCreatedBy($viewValue)" typeahead-on-select="getAddressByOrgId(userIncident.location.id)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('orgLocMinLength')" required><div ng-messages="addUserIncident.location.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 selectDropDown"><md-input-container><label class="md-required">{{'INC_DATE'|translate}}</label><input datepicker class="pointer" ng-change="getDate(userIncident.incidentDate)" ng-model="userIncident.incidentDate" till-max-date="maxDate" name="validFrom" ng-disabled="viewmode" ng-change="validFromChnaged()" required><md-icon class="datepickerIcon"></md-icon><div ng-messages="addUserIncident.validFrom.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block"><label>{{'INC_TYPE'|translate}}<span style="color:red">*</span></label><input type="text" name="incidentType" ng-model="userIncident.incidentType" ng-disabled="viewmode" autocomplete="off" uib-typeahead="incidentType as incidentType.value for incidentType in getIncidentType($viewValue)" typeahead-loading="loading" typeahead-min-length="getSmartSearchMinLength('defaultMinLength')" required><div ng-messages="addUserIncident.incidentType.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'LINKED_TO_DIS'|translate}}</label><md-select ng-model="userIncident.linkedToDisease" ng-disabled="viewmode || allMode" name="disease" ng-change="getDiseaseVariant(userIncident.user.id,userIncident.linkedToDisease.id)"><md-option ng-repeat="disease in linkedToDisease" ng-value="disease" ng-selected="{{disease.id == diseaseId}}" required="mandatoryYes">{{disease.value}}</md-option></md-select><div ng-messages="addUserIncident.disease.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container><label class="md-required">{{'DISEASE_VARIANT'|translate}}</label><md-select ng-model="userIncident.linkedToDiseaseVarriant" ng-disabled="viewmode || allMode" name="diseaseVarriant"><md-option ng-repeat="diseaseVarriant in linkedToDiseaseVarriant" ng-value="diseaseVarriant" ng-selected="{{diseaseVarriant.id == diseaseVariantId}}" required="mandatoryYes">{{diseaseVarriant.value}}</md-option></md-select><div ng-messages="addUserIncident.diseaseVarriant.$error"><div ng-message="required">{{'REQUIRED' |translate}}</div></div></md-input-container></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><md-input-container class="md-block" layout="row"><label>{{'EQU_REMARKS'|translate}}</label><textarea ng-model="userIncident.remarks" rows="3" cols="50" ng-disabled="viewmode" name="remarks" md-select-on-focus="" style="overflow-y: scroll;max-height:150px"></textarea><div ng-messages="userIncident.remark.$error"><div ng-message="maxlength">{{'MAX_LENGTH' |translate}}</div></div></md-input-container></div></div><div class="col-sm-12 col-md-12 col-lg-12 padding-t-b-10 wizardFooter"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0 textAlign-R"><md-button class="md-raised" ng-click="cancel()">{{'CANCEL'|translate}}</md-button><span ng-if="pageState !=='view' && expressionDisabled !== true"><md-button class="md-raised md-warn" ng-click="saveUserIncident()" ng-disabled="!addUserIncident.$valid">{{'SAVE'|translate}}</md-button></span></div></div></div></form></div>
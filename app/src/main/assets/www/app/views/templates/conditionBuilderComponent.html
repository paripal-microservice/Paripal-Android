<ng-form name="conditionForm"><div ng-init="saveForm(conditionForm)"><div class="form-inline"><div style="margin-bottom:10px"><select ng-options="o.name as o.name for o in operators" ng-model="group.operator" class="form-control input-sm" ng-disabled="disabled" style="margin-bottom:5px"></select><button type="button" style="margin-left: 5px; margin-bottom:5px" ng-click="addCondition()" ng-disabled="disabled" class="btn btn-sm btn-success">{{'ADD_CONDITION' |translate}}</button> <button type="button" style="margin-left: 5px; margin-bottom:5px" ng-click="addGroup()" ng-disabled="disabled || group.rules.length == 0" class="btn btn-sm btn-success">{{'ADD_CONDITION_GROUP' |translate}}</button> <button type="button" style="margin-left: 5px; margin-bottom:5px" ng-click="removeGroup($index)" ng-disabled="disabled" class="btn btn-sm btn-danger">{{'REMOVE_GROUP' |translate}}</button></div></div><div class="group-conditions"><div ng-repeat="rule in group.rules | orderBy:'index'" class="condition"><div ng-switch="rule.hasOwnProperty('group')"><div ng-switch-when="true"><query-builder group="rule.group" query-meta-data="queryMetaData" conditions="conditions" entity-fields="entityFields" output="output" table-alias="tableAlias" disabled="disabled" require="true"></query-builder></div><div ng-switch-default="ng-switch-default"><div class="form-inline"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 condition-description-box"><div class="col-sm-12 col-md-2 col-lg-2"><select name="entity" ng-model="rule.entity" ng-options="t as t.entityName for t in   queryMetaData.entities" ng-disabled="disabled" class="form-control input-sm" required></select><div class="md-errors-spacer"></div><div class="md-input-message-animation redText" ng-if="conditionForm.$submitted && conditionForm.entity.$invalid">{{'REQUIRED' |translate}}</div></div><div class="col-sm-12 col-md-2 col-lg-2"><select name="entityField" ng-options="t as t.fieldName for t in   entityFields[rule.entity.entityId]" ng-model="rule.entityField" ng-change="onEntityFieldChange(rule)" ng-disabled="rule.entity.entityId == undefined || disabled" class="form-control input-sm" required></select><div class="md-errors-spacer"></div><div class="md-input-message-animation redText" ng-if="conditionForm.$submitted && conditionForm.entityField.$invalid">{{'REQUIRED' |translate}}</div></div><div class="col-sm-12 col-md-2 col-lg-2"><select name="conditionOperand" style="margin-left: 5px" ng-options="c as c.name for c in conditions[rule.entityField.fieldType]" ng-model="rule.condition" ng-disabled="rule.entityField.fieldType == null || disabled" class="form-control input-sm" required></select><div class="md-errors-spacer"></div><div class="md-input-message-animation redText" ng-if="conditionForm.$submitted && conditionForm.conditionOperand.$invalid">{{'REQUIRED' |translate}}</div></div><div ng-if="rule.condition.name"><template-factory rule="rule" disabled="disabled" type="rule.entityField.type" form-submitted="conditionForm.$submitted"></template-factory></div><button type="button" style="margin-left: 5px" ng-click="removeCondition($index)" ng-disabled="disabled" class="btn btn-sm btn-danger"><span class="glyphicon glyphicon-minus-sign"></span></button></div></div></div></div></div></div></div></ng-form>